# Prometheus v4.0 é«˜çº§ç‰¹æ€§æ–‡æ¡£

## ä¸‰å¤§é«˜çº§ç³»ç»Ÿ

v4.0 å¼•å…¥äº†ä¸‰ä¸ªé«˜çº§ç³»ç»Ÿï¼Œä½¿Prometheusæˆä¸ºçœŸæ­£æ™ºèƒ½çš„è‡ªè¿›åŒ–äº¤æ˜“ç”Ÿæ€ï¼š

1. **LLMå…ˆçŸ¥å†³ç­–** - AIé©±åŠ¨çš„æˆ˜ç•¥å†³ç­–
2. **å¥–ç« åˆ¶åº¦** - è£èª‰æ¿€åŠ±å’ŒåŸºå› åº“å‡†å…¥
3. **æ¶…æ§ƒç³»ç»Ÿ** - æç«¯æƒ…å†µå¿«é€Ÿå¤æ´»å¥—åˆ©

---

## ä¸€ã€LLMå…ˆçŸ¥å†³ç­–ç³»ç»Ÿ

### æ¦‚è¿°

v4.0 ä»¥LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰ä¸ºä¸»è¦å†³ç­–æ¨¡å¼ï¼Œäººå·¥åŸºæœ¬ä¸å‚ä¸æ—¥å¸¸è¿è¥ã€‚

### å†³ç­–æµç¨‹

```
å¸‚åœºæ•°æ® + Agentç»Ÿè®¡ + ç³»ç»ŸæŒ‡æ ‡
           â†“
    LLMå…ˆçŸ¥åˆ†æ
           â†“
    JSONæ ¼å¼å»ºè®®
    {
      "market_regime": "bull/bear/ranging",
      "system_health": "healthy/warning/critical",
      "strategy_adjustments": {...},
      "warnings": [...],
      "recommendations": [...]
    }
           â†“
      ä¸»è„‘æ‰§è¡Œ
```

### ä½¿ç”¨æ–¹å¼

```python
from prometheus.core import Mastermind

# åˆ›å»ºä¸»è„‘ï¼ˆé»˜è®¤LLMæ¨¡å¼ï¼‰
mastermind = Mastermind(
    initial_capital=100000,
    decision_mode="llm",  # é»˜è®¤å€¼
    llm_model="gpt-4"
)

# LLMè‡ªåŠ¨å†³ç­–
decision = mastermind.make_strategic_decision(
    market_data=current_market,
    agent_statistics=agent_stats,
    system_metrics=sys_metrics
)

# decisionåŒ…å«ï¼š
# - market_regime: å¸‚åœºåˆ¤æ–­
# - strategy: è°ƒæ•´åçš„å…¨å±€ç­–ç•¥
# - health: ç³»ç»Ÿå¥åº·è¯„ä¼°
# - decision_source: "llm"
```

### LLMåˆ†æå†…å®¹

1. **å¸‚åœºçŠ¶æ€åˆ¤æ–­**
   - ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡/é«˜æ³¢åŠ¨
   - ç½®ä¿¡åº¦è¯„åˆ†

2. **ç³»ç»Ÿå¥åº·è¯„ä¼°**
   - Agentç¾¤ä½“è¡¨ç°
   - ç­–ç•¥å¤šæ ·æ€§
   - é£é™©æ°´å¹³

3. **ç­–ç•¥è°ƒæ•´å»ºè®®**
   - èµ„é‡‘åˆ©ç”¨ç‡ (0.5-1.0)
   - é£é™©ç­‰çº§ (1-5)
   - æ·˜æ±°å‹åŠ› (0-1)
   - ç¯å¢ƒå‹åŠ› (0-2)

4. **é¢„è­¦å’Œå»ºè®®**
   - é£é™©æç¤º
   - å…·ä½“è¡ŒåŠ¨å»ºè®®

### äººå·¥ä»‹å…¥ï¼ˆç´§æ€¥æƒ…å†µï¼‰

```python
# äººå·¥è¦†ç›–ï¼ˆä»…æç«¯æƒ…å†µï¼‰
decision = mastermind.make_strategic_decision(
    market_data=...,
    agent_statistics=...,
    system_metrics=...,
    human_override={
        'capital_utilization': 0.5,  # é™ä½èµ„é‡‘ä½¿ç”¨
        'risk_level': 1,              # æœ€ä½é£é™©
        'environmental_pressure': 2.0  # é«˜å‹åŠ›
    }
)
```

---

## äºŒã€å¥–ç« åˆ¶åº¦ç³»ç»Ÿ

### è®¾è®¡ç†å¿µ

**å¥–ç« æ˜¯Agentçš„è£èª‰å‹‹ç« ï¼Œä¹Ÿæ˜¯è¿›å…¥åŸºå› åº“çš„é—¨ç¥¨ã€‚**

- ğŸ“Š å¤šç»´åº¦è¯„ä»·Agentè¡¨ç°
- ğŸ† æ¿€åŠ±ä¼˜ç§€è¡Œä¸º
- ğŸ§¬ æ§åˆ¶åŸºå› åº“è´¨é‡
- ğŸ’ª å½±å“Agentæ€§æ ¼å’Œä¿¡å¿ƒ

### å¥–ç« ç±»å‹ï¼ˆå…±19ç§ï¼‰

#### ğŸ… ç›ˆåˆ©ç›¸å…³ (3)
| å¥–ç«  | æ¡ä»¶ | éš¾åº¦ | åŸºå› åº“æƒé‡ |
|------|------|------|-----------|
| ç›ˆåˆ©å¤§å¸ˆ | æ€»æ”¶ç›Š > 50% | â­â­â­â­ | 2.0 |
| ç¨³å®šç›ˆåˆ© | è¿ç»­30å¤©ç›ˆåˆ© | â­â­â­â­ | 2.5 |
| å¿«é€Ÿç›ˆåˆ© | 7å¤©ç›ˆåˆ© > 20% | â­â­â­ | 1.5 |

#### ğŸ›¡ï¸ é£é™©æ§åˆ¶ (3)
| å¥–ç«  | æ¡ä»¶ | éš¾åº¦ | åŸºå› åº“æƒé‡ |
|------|------|------|-----------|
| é£é™©å¤§å¸ˆ | æœ€å¤§å›æ’¤ < 10% | â­â­â­ | 1.8 |
| æ­¢æŸä¹‹ç‹ | ä¸¥æ ¼æ‰§è¡Œæ­¢æŸ | â­â­â­ | 1.5 |
| å¹¸å­˜è€… | å­˜æ´» > 90å¤© | â­â­â­ | 1.5 |

#### ğŸ¯ äº¤æ˜“æŠ€å·§ (3)
| å¥–ç«  | æ¡ä»¶ | éš¾åº¦ | åŸºå› åº“æƒé‡ |
|------|------|------|-----------|
| é«˜èƒœç‡ | èƒœç‡ > 70% | â­â­â­ | 1.5 |
| å¤æ™®é«˜æ‰‹ | Sharpe > 2.0 | â­â­â­â­ | 2.2 |
| è¶‹åŠ¿å¤§å¸ˆ | è¶‹åŠ¿ä¸­ç›ˆåˆ© | â­â­â­â­ | 2.0 |

#### ğŸ”¥ é€†å¢ƒæ±‚ç”Ÿ (3)
| å¥–ç«  | æ¡ä»¶ | éš¾åº¦ | åŸºå› åº“æƒé‡ |
|------|------|------|-----------|
| ç»åœ°åå‡» | ä»30%æ¢å¤åˆ°100% | â­â­â­â­â­ | 3.0 |
| æ‹¼æèƒœåˆ© | æ‹¼æ­»ä¸€ææˆåŠŸ | â­â­â­â­â­ | 2.8 |
| å‡¤å‡°æ¶…æ§ƒ | å¤šæ¬¡ä»å›°å¢ƒå¤æ´» | â­â­â­â­â­ | 3.5 |

#### ğŸŒŸ ç‰¹æ®Šæˆå°± (3)
| å¥–ç«  | æ¡ä»¶ | éš¾åº¦ | åŸºå› åº“æƒé‡ |
|------|------|------|-----------|
| ä¼ å¥‡ | æ‹¥æœ‰5ä¸ªä»¥ä¸Šå¥–ç«  | â­â­â­â­â­ | 5.0 |
| å®Œç¾æœˆ | 30å¤©æ— äºæŸ | â­â­â­â­ | 2.5 |
| ç™¾æˆ˜å‹‡å£« | å®Œæˆ100ç¬”äº¤æ˜“ | â­â­â­ | 1.5 |

### å¥–ç« å½±å“

#### 1. å¯¹ä¿¡å¿ƒçš„å½±å“
```python
# æ¯ä¸ªå¥–ç« å¢åŠ ä¿¡å¿ƒå€¼
confidence_boost = sum(
    MEDAL_CRITERIA[medal.type].influence_on_confidence
    for medal in agent.medals
)

# å¥–ç« æ•°é‡é¢å¤–åŠ æˆ
medal_count_bonus = len(agent.medals) * 0.02

# æœ€ç»ˆä¿¡å¿ƒ
agent.emotion.confidence += min(confidence_boost + medal_count_bonus, 0.5)
```

**ç¤ºä¾‹**ï¼š
- æ— å¥–ç« ï¼šåŸºç¡€ä¿¡å¿ƒ 0.5
- 3ä¸ªå¥–ç« ï¼š+0.3 â†’ ä¿¡å¿ƒ 0.8
- 5ä¸ªå¥–ç« ï¼ˆä¼ å¥‡ï¼‰ï¼š+0.5 â†’ ä¿¡å¿ƒ 1.0ï¼ˆæ»¡ä¿¡å¿ƒï¼‰

#### 2. å¯¹æ€§æ ¼çš„å½±å“
```python
personality_changes = {
    'PROFIT_MASTER': {'optimism': +0.1, 'confidence': +0.15},
    'RISK_MANAGER': {'discipline': +0.15, 'risk_tolerance': -0.05},
    'COMEBACK_HERO': {'survival_will': +0.2, 'optimism': +0.15},
    ...
}

# ç´¯ç§¯åº”ç”¨åˆ°Agentæ€§æ ¼
for medal in agent.medals:
    for trait, adjustment in medal.personality_effects.items():
        agent.personality[trait] += adjustment
```

**ç¤ºä¾‹**ï¼š
- è·å¾—"ç»åœ°åå‡»"ï¼šç”Ÿå­˜æ„å¿— +0.2, ä¹è§‚åº¦ +0.15
- è·å¾—"é£é™©å¤§å¸ˆ"ï¼šçºªå¾‹æ€§ +0.15, é£é™©æ‰¿å—åº¦ -0.05

#### 3. åŸºå› åº“å‡†å…¥æ ‡å‡†

**v4.0è§„åˆ™ï¼šå¿…é¡»æœ‰å¥–ç« æ‰èƒ½è¿›å…¥åŸºå› åº“ï¼**

```python
def is_qualified_for_gene_pool(agent):
    # 1. å¿…é¡»è‡³å°‘æœ‰1ä¸ªå¥–ç« 
    if len(agent.medals) == 0:
        return False
    
    # 2. è®¡ç®—ç»¼åˆå¾—åˆ†
    score = (
        base_fitness * 3 +
        sum(medal.gene_pool_weight for medal in agent.medals)
    )
    
    # 3. ä¼ å¥‡å¥–ç« é¢å¤–1.5å€åŠ æˆ
    if has_legend_medal(agent):
        score *= 1.5
    
    # 4. é—¨æ§›ï¼šå¾—åˆ† > 3.0
    return score > 3.0
```

**å¾—åˆ†ç¤ºä¾‹**ï¼š
| Agent | åŸºç¡€é€‚åº”åº¦ | å¥–ç«  | ç»¼åˆå¾—åˆ† | æ˜¯å¦æ”¶å½• |
|-------|-----------|------|---------|---------|
| A | 0.7 | æ—  | 2.1 | âŒ æ— å¥–ç«  |
| B | 0.6 | 2ä¸ª(æƒé‡3.0) | 4.8 | âœ… |
| C | 0.8 | 5ä¸ª(ä¼ å¥‡) | 12.0 | âœ… ä¼ å¥‡ |

### ä½¿ç”¨æ–¹å¼

```python
from prometheus.core import Supervisor

# ç›‘ç£è€…è‡ªåŠ¨è¯„ä¼°å’Œé¢å‘å¥–ç« 
supervisor = Supervisor()

# è¯„ä¼°Agent
report = supervisor.evaluate_agent(agent_data, environmental_pressure)

# å¥–ç« ä¼šè‡ªåŠ¨è¯„ä¼°å¹¶é¢å‘
# æŸ¥çœ‹Agentå¥–ç« 
medals = supervisor.medal_system.get_agent_medals(agent_id)
print(f"Agent {agent_id} æ‹¥æœ‰ {len(medals)} ä¸ªå¥–ç« :")
for medal in medals:
    print(f"  ğŸ… {medal.medal_type.value} - {medal.reason}")

# æ£€æŸ¥æ˜¯å¦æœ‰èµ„æ ¼è¿›å…¥åŸºå› åº“
qualified = supervisor.medal_system.is_qualified_for_gene_pool(
    agent_id, 
    base_fitness=0.7
)
```

---

## ä¸‰ã€æ¶…æ§ƒç³»ç»Ÿ

### è®¾è®¡ç†å¿µ

**å¹³æ—¶ç¼“æ…¢è¿›åŒ–ï¼Œæç«¯æƒ…å†µå¿«é€Ÿå“åº”ã€‚**

æ¶…æ§ƒç³»ç»Ÿç›‘æµ‹æç«¯å¸‚åœºæƒ…å†µï¼Œåœ¨å…³é”®æ—¶åˆ»å¿«é€Ÿå¤æ´»å¤§é‡Agentè¿›è¡Œå¥—åˆ©ã€‚

### è§¦å‘æ¡ä»¶

#### 1. å¤§ç­ç» (Mass Extinction)
```python
è§¦å‘ï¼š24å°æ—¶å†… > 70% Agentæ­»äº¡
ç­–ç•¥ï¼šå¤æ´»20ä¸ªAgentï¼Œå¤šæ ·åŒ–åŸºå› 
ç›®çš„ï¼šé‡å»ºç”Ÿæ€ç³»ç»Ÿ
```

#### 2. å¸‚åœºå´©ç›˜ (Market Crash)
```python
è§¦å‘ï¼š1å°æ—¶è·Œå¹… > 15% æˆ– 24å°æ—¶è·Œå¹… > 30%
ç­–ç•¥ï¼šå¤æ´»15ä¸ªAgentï¼Œé€†å‘åŸºå› ï¼ˆæŠ„åº•ï¼‰
ç›®çš„ï¼šä½ä½å»ºä»“ï¼Œåå¼¹è·åˆ©
```

#### 3. å¸‚åœºæš´æ¶¨ (Market Surge)
```python
è§¦å‘ï¼š1å°æ—¶æ¶¨å¹… > 20% æˆ– 24å°æ—¶æ¶¨å¹… > 40%
ç­–ç•¥ï¼šå¤æ´»12ä¸ªAgentï¼ŒåŠ¨é‡åŸºå› ï¼ˆè¿½æ¶¨ï¼‰
ç›®çš„ï¼šè¶‹åŠ¿è·åˆ©
```

#### 4. æç«¯æ³¢åŠ¨ (Extreme Volatility)
```python
è§¦å‘ï¼š1å°æ—¶æ³¢åŠ¨ç‡ > 5%
ç­–ç•¥ï¼šå¤æ´»10ä¸ªAgentï¼ŒçŸ­çº¿åŸºå› 
ç›®çš„ï¼šé«˜é¢‘å¥—åˆ©
```

#### 5. å¥—åˆ©æœºä¼š (Arbitrage Opportunity)
```python
è§¦å‘ï¼šå¥—åˆ©è¯„åˆ† > 0.8
ç­–ç•¥ï¼šå¤æ´»8ä¸ªAgentï¼Œå¥—åˆ©åŸºå› 
ç›®çš„ï¼šç²¾å‡†å¥—åˆ©
```

### æ¶…æ§ƒæµç¨‹

```
ç›‘æµ‹æç«¯æƒ…å†µ
     â†“
è§¦å‘æ¶…æ§ƒï¼ˆå†·å´æœŸ24hï¼‰
     â†“
è®¡ç®—å¤æ´»å‚æ•°
  - Agentæ•°é‡
  - åˆå§‹èµ„é‡‘
  - åŸºå› ç­–ç•¥
     â†“
ä»åŸºå› åº“é€‰æ‹©åŸºå› 
  - å¤šæ ·åŒ–
  - é€†å‘
  - åŠ¨é‡
  - çŸ­çº¿
  - å¥—åˆ©
     â†“
æ‰¹é‡åˆ›å»ºAgent
     â†“
ç‰¹æ®Šä»»åŠ¡æ‰§è¡Œ
  - æŠ„åº•åå¼¹
  - è¿½æ¶¨è·åˆ©
  - çŸ­çº¿å¥—åˆ©
     â†“
ç»Ÿè®¡æ¶…æ§ƒç»“æœ
  - æˆåŠŸç‡
  - å¹³å‡ç›ˆåˆ©
```

### ä½¿ç”¨æ–¹å¼

```python
from prometheus.core import NirvanaSystem, GenePool

# åˆå§‹åŒ–
gene_pool = GenePool(max_genes=1000)
nirvana = NirvanaSystem(
    gene_pool=gene_pool,
    mass_extinction_threshold=0.7,
    market_crash_threshold=-0.15,
    cooldown_hours=24
)

# æ¯ä¸ªå‘¨æœŸæ£€æŸ¥
reason = nirvana.evaluate_nirvana_trigger(
    agent_statistics={
        'total_agents': 10,
        'recent_deaths_24h': 8  # 80%æ­»äº¡ï¼
    },
    market_data={
        'price_change_1h': -0.18  # æš´è·Œ18%ï¼
    },
    system_metrics={}
)

if reason:
    # è§¦å‘æ¶…æ§ƒ
    event = nirvana.trigger_nirvana(
        reason=reason,
        market_context={'regime': 'bear', 'volatility': 0.06},
        available_capital=50000,
        current_agent_count=2
    )
    
    # ç”Ÿæˆå¤æ´»Agenté…ç½®
    revival_configs = nirvana.generate_revival_agents(event)
    
    # åˆ›å»ºAgentï¼ˆç”±ç³»ç»Ÿæ‰§è¡Œï¼‰
    for config in revival_configs:
        agent = AgentV4(
            agent_id=config['agent_id'],
            initial_capital=config['initial_capital'],
            gene=config['gene'],
            personality=config['personality']
        )
        # agent.special_mission = config['special_mission']
        agents.append(agent)
    
    print(f"ğŸ”¥ æ¶…æ§ƒï¼å¤æ´»äº† {len(revival_configs)} ä¸ªAgent")
    print(f"   ä»»åŠ¡: {revival_configs[0]['special_mission']}")
```

### æ¶…æ§ƒç­–ç•¥è¯¦è§£

#### ç­–ç•¥1ï¼šå¤šæ ·åŒ– (Diverse)
```python
é€‚ç”¨ï¼šå¤§ç­ç»
ç‰¹ç‚¹ï¼šéšæœºé€‰æ‹©ä¸åŒåŸºå› 
ç›®çš„ï¼šé‡å»ºå¤šæ ·æ€§ç”Ÿæ€
```

#### ç­–ç•¥2ï¼šé€†å‘ (Contrarian)
```python
é€‚ç”¨ï¼šå¸‚åœºå´©ç›˜
ç‰¹ç‚¹ï¼šé€‰æ‹©å‡å€¼å›å½’å€¾å‘é«˜çš„åŸºå› 
ç›®çš„ï¼šæŠ„åº•ï¼Œç­‰å¾…åå¼¹
```

#### ç­–ç•¥3ï¼šåŠ¨é‡ (Momentum)
```python
é€‚ç”¨ï¼šå¸‚åœºæš´æ¶¨
ç‰¹ç‚¹ï¼šé€‰æ‹©è¶‹åŠ¿è·Ÿéšå€¾å‘é«˜çš„åŸºå› 
ç›®çš„ï¼šè¿½æ¶¨ï¼Œè¶‹åŠ¿è·åˆ©
```

#### ç­–ç•¥4ï¼šçŸ­çº¿ (Scalping)
```python
é€‚ç”¨ï¼šæç«¯æ³¢åŠ¨
ç‰¹ç‚¹ï¼šå¿«è¿›å¿«å‡º
ç›®çš„ï¼šé«˜é¢‘å¥—åˆ©
```

#### ç­–ç•¥5ï¼šå¥—åˆ© (Arbitrage)
```python
é€‚ç”¨ï¼šå¥—åˆ©æœºä¼š
ç‰¹ç‚¹ï¼šæœ€ä¼˜åŸºå› ï¼Œæ›´å¤šèµ„é‡‘
ç›®çš„ï¼šç²¾å‡†å¥—åˆ©
```

### é£é™©æ§åˆ¶

1. **å†·å´æœŸæœºåˆ¶**
   - é»˜è®¤24å°æ—¶å†·å´
   - é¿å…é¢‘ç¹è§¦å‘
   - ç»™ç³»ç»Ÿæ¢å¤æ—¶é—´

2. **èµ„é‡‘é™åˆ¶**
   - æœ€å¤šä½¿ç”¨70%å¯ç”¨èµ„é‡‘
   - åˆ†æ•£åˆ°å¤šä¸ªAgent
   - ä¿ç•™å®‰å…¨è¾¹é™…

3. **æ•°é‡æ§åˆ¶**
   - æ ¹æ®æƒ…å†µ8-20ä¸ªAgent
   - é¿å…è¿‡åº¦æ‰©å¼ 
   - ä¿æŒå¯ç®¡ç†æ€§

---

## ç³»ç»Ÿåä½œç¤ºæ„

```
         ä¸»è„‘ (LLMé©±åŠ¨)
              â†“
    [æˆ˜ç•¥å†³ç­–] [ç¯å¢ƒå‹åŠ›è°ƒæ•´]
              â†“
         ç›‘ç£è€… + å¥–ç« ç³»ç»Ÿ
              â†“
    [ç›‘æ§] [è¯„ä¼°] [é¢å¥–] [åŸºå› åº“å‡†å…¥]
              â†“
         Agentç¾¤ä½“
         /   |   \
    Agent  Agent  Agent
      â†“      â†“      â†“
   [äº¤æ˜“] [è¿›åŒ–] [ç”Ÿæ­»]
              â†“
    [è·å¾—å¥–ç« ] â†’ ä¿¡å¿ƒâ†‘ æ€§æ ¼å˜åŒ–
              â†“
    [æ­»äº¡] â†’ åŸºå› åº“ï¼ˆéœ€è¦å¥–ç« ï¼‰
              â†“
         æç«¯æƒ…å†µ
              â†“
      æ¶…æ§ƒç³»ç»Ÿè§¦å‘
              â†“
    ä»åŸºå› åº“å¤æ´»å¤§é‡Agent
              â†“
         å¿«é€Ÿå¥—åˆ©
```

---

## å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

```python
from prometheus.core import (
    Mastermind, Supervisor, AgentV4,
    GenePool, NirvanaSystem
)

# 1. åˆå§‹åŒ–ç³»ç»Ÿ
mastermind = Mastermind(initial_capital=100000)  # LLMæ¨¡å¼
supervisor = Supervisor()
gene_pool = GenePool(max_genes=1000)
nirvana = NirvanaSystem(gene_pool)

agents = []

# 2. ä¸»å¾ªç¯
while True:
    # ä¸»è„‘å†³ç­–ï¼ˆLLMè‡ªåŠ¨ï¼‰
    decision = mastermind.make_strategic_decision(
        market_data, agent_stats, sys_metrics
    )
    
    # ç›‘ç£è€…ç›‘æ§å’Œé¢å¥–
    for agent in agents:
        report = supervisor.evaluate_agent(
            agent.get_status(),
            decision['strategy'].environmental_pressure
        )
        
        # å¥–ç« è‡ªåŠ¨è¯„ä¼°å’Œé¢å‘
        # å½±å“ä¿¡å¿ƒå’Œæ€§æ ¼
    
    # Agentè‡ªä¸»äº¤æ˜“
    for agent in agents:
        signal = agent.make_trading_decision(market_data)
        # æ‰§è¡Œäº¤æ˜“...
        
        # Agentå¯èƒ½è‡ªæ€æˆ–æ‹¼æ
        if agent.state == AgentState.DEAD:
            # æ­»äº¡Agent
            if supervisor.medal_system.is_qualified_for_gene_pool(agent.agent_id):
                # æœ‰å¥–ç« ï¼Œè¿›å…¥åŸºå› åº“
                gene_pool.add_gene(
                    agent.agent_id,
                    agent.gene,
                    agent.personality.__dict__,
                    agent.prepare_for_breeding()['performance_metrics'],
                    {'regime': decision['market_regime']}
                )
                print(f"Agent {agent.agent_id} è¿›å…¥åŸºå› åº“ï¼")
            else:
                print(f"Agent {agent.agent_id} æ— å¥–ç« ï¼Œæ— æ³•è¿›å…¥åŸºå› åº“")
            
            agents.remove(agent)
    
    # æ£€æŸ¥æ¶…æ§ƒè§¦å‘
    reason = nirvana.evaluate_nirvana_trigger(
        agent_stats, market_data, sys_metrics
    )
    
    if reason:
        # æ¶…æ§ƒï¼
        event = nirvana.trigger_nirvana(
            reason, market_data, mastermind.current_capital, len(agents)
        )
        
        # æ‰¹é‡å¤æ´»
        revival_configs = nirvana.generate_revival_agents(event)
        for config in revival_configs:
            agent = AgentV4(**config)
            agents.append(agent)
        
        print(f"ğŸ”¥ æ¶…æ§ƒå¤æ´»äº† {len(revival_configs)} ä¸ªAgentï¼")
```

---

## å‚æ•°å»ºè®®

### å¥–ç« ç³»ç»Ÿ
```python
# åŸºå› åº“é—¨æ§›
MIN_MEDALS = 1              # æœ€å°‘å¥–ç« æ•°
MIN_GENE_POOL_SCORE = 3.0   # æœ€ä½ç»¼åˆå¾—åˆ†

# å¥–ç« å½±å“
MAX_CONFIDENCE_BOOST = 0.5  # æœ€å¤§ä¿¡å¿ƒæå‡
MEDAL_COUNT_BONUS = 0.02    # æ¯ä¸ªå¥–ç« çš„é¢å¤–ä¿¡å¿ƒåŠ æˆ
```

### æ¶…æ§ƒç³»ç»Ÿ
```python
# è§¦å‘é˜ˆå€¼
MASS_EXTINCTION_THRESHOLD = 0.7     # 70%æ­»äº¡
MARKET_CRASH_THRESHOLD = -0.15      # -15%
MARKET_SURGE_THRESHOLD = 0.20       # +20%
EXTREME_VOLATILITY_THRESHOLD = 0.05 # 5%

# æ§åˆ¶å‚æ•°
COOLDOWN_HOURS = 24                 # å†·å´24å°æ—¶
CAPITAL_USAGE_RATIO = 0.7           # ä½¿ç”¨70%èµ„é‡‘
MIN_REVIVAL_AGENTS = 8              # æœ€å°‘8ä¸ª
MAX_REVIVAL_AGENTS = 20             # æœ€å¤š20ä¸ª
```

---

æœ€åæ›´æ–°ï¼š2025å¹´12æœˆ1æ—¥

