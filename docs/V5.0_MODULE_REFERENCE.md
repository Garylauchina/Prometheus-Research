# Prometheus v5.0 æ¨¡å—å‚è€ƒæ‰‹å†Œ

## ğŸ“š å¿«é€Ÿå¯¼èˆª

v5.0æ ¸å¿ƒæ¨¡å—æ¸…å•å’Œä½¿ç”¨æŒ‡å—

---

## ğŸ§¬ æ ¸å¿ƒæ¨¡å—ï¼ˆ8ä¸ªï¼‰

### 1. Lineageï¼ˆè¡€ç»Ÿç³»ç»Ÿï¼‰

**æ–‡ä»¶**: `prometheus/core/lineage.py`  
**è¡Œæ•°**: 388è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- è¡€ç»Ÿå‘é‡è¡¨ç¤ºï¼ˆå›ºå®šç»´åº¦ï¼‰
- çº¯è¡€/æ··è¡€åˆ›å»º
- äº²ç¼˜åº¦è®¡ç®—ï¼ˆBhattacharyyaç³»æ•°ï¼‰
- è¡€ç»Ÿç†µè®¡ç®—

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.lineage import LineageVector

# åˆ›å»ºåˆ›ä¸–Agentè¡€ç»Ÿï¼ˆçº¯è¡€ï¼Œå®¶æ—0ï¼‰
lineage = LineageVector.create_genesis(family_id=0, num_families=50)

# åˆ›å»ºå­ä»£è¡€ç»Ÿï¼ˆæ··è¡€ï¼‰
child_lineage = LineageVector.create_child(parent1_lineage, parent2_lineage)

# è®¡ç®—äº²ç¼˜åº¦
kinship = lineage1.compute_kinship(lineage2)  # 0-1

# è·å–ä¸»å¯¼å®¶æ—
dominant = lineage.get_dominant_families(top_n=3)
```

---

### 2. Genomeï¼ˆåŸºå› ç»„ç³»ç»Ÿï¼‰

**æ–‡ä»¶**: `prometheus/core/genome.py`  
**è¡Œæ•°**: 492è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- 50ç»´åŸºå› å‚æ•°ç©ºé—´
- 4å±‚å‚æ•°è§£é”æœºåˆ¶
- åŸºå› äº¤å‰ï¼ˆcrossoverï¼‰
- åŸºå› å˜å¼‚ï¼ˆmutateï¼‰
- åŸºå› ç†µè®¡ç®—

**å‚æ•°åˆ†å±‚**:
```
Tier 1: 3ä¸ªåŸºç¡€å‚æ•°ï¼ˆåˆå§‹ï¼‰
Tier 2: 5ä¸ªä¸­çº§å‚æ•°ï¼ˆ3-10ä»£ï¼‰
Tier 3: 5ä¸ªé«˜çº§å‚æ•°ï¼ˆ10-20ä»£ï¼‰
Tier 4: 5ä¸ªç¨€æœ‰å‚æ•°ï¼ˆ20+ä»£ï¼‰
å…¶ä»–: 32ä¸ªæ‰©å±•å‚æ•°
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.genome import GenomeVector

# åˆ›å»ºåˆ›ä¸–åŸºå› ç»„ï¼ˆ3ä¸ªåŸºç¡€å‚æ•°ï¼‰
genome = GenomeVector.create_genesis()

# äº¤å‰ç¹æ®–
child_genome = GenomeVector.crossover(parent1_genome, parent2_genome)

# å˜å¼‚ï¼ˆå¯èƒ½è§£é”æ–°å‚æ•°ï¼‰
child_genome.mutate(generation=5, mutation_rate=0.3)

# è·å–å·²è§£é”å‚æ•°
active_params = genome.active_params  # Dict[str, float]
value = genome.get_param_value('trend_pref')  # Optional[float]
```

---

### 3. Instinctï¼ˆæœ¬èƒ½ç³»ç»Ÿï¼‰â­ v5.0æ–°å¢

**æ–‡ä»¶**: `prometheus/core/instinct.py`  
**è¡Œæ•°**: 416è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- åŸºæœ¬æœ¬èƒ½ï¼ˆä¸€çº§æœ¬èƒ½ï¼‰: fear_of_deathï¼ˆå›ºå®š1.0ï¼‰
- è¿›åŒ–æœ¬èƒ½ï¼ˆäºŒçº§æœ¬èƒ½ï¼‰: 5ä¸ªå¯é—ä¼ æœ¬èƒ½
- é—ä¼ æœºåˆ¶ï¼ˆå¹³å‡ + éšæœºå¼ºåŒ–/å‰Šå¼±ï¼‰
- æ­»äº¡ææƒ§è®¡ç®—
- æœ¬èƒ½å‹åŠ›åº”ç”¨

**è¿›åŒ–æœ¬èƒ½ï¼ˆ5ä¸ªï¼‰**:
```python
{
    'reproductive_drive': ç¹æ®–æ¬²æœ›,
    'loss_aversion': æŸå¤±åŒæ¶,
    'risk_appetite': é£é™©åå¥½,
    'curiosity': å¥½å¥‡å¿ƒ,
    'time_preference': æ—¶é—´åå¥½,
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.instinct import Instinct

# åˆ›å»ºåˆ›ä¸–æœ¬èƒ½
instinct = Instinct.create_genesis()

# é—ä¼ 
child_instinct = Instinct.inherit_from_parents(parent1, parent2, generation=1)

# è®¡ç®—æ­»äº¡ææƒ§
fear = instinct.calculate_death_fear_level(capital_ratio=0.3, consecutive_losses=5)

# æ€§æ ¼æè¿°
personality = instinct.describe_personality()  # "å†’é™©å®¶ã€æåº¦å¥½å¥‡"
```

---

### 4. Strategyï¼ˆç­–ç•¥ç³»ç»Ÿï¼‰â­ v5.0æ–°å¢

**æ–‡ä»¶**: `prometheus/core/strategy.py`  
**è¡Œæ•°**: 400è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- StrategyæŠ½è±¡åŸºç±»
- StrategySignalæ•°æ®ç»“æ„
- 3ä¸ªå…·ä½“ç­–ç•¥å®ç°

**ç­–ç•¥åº“**:
1. TrendFollowingStrategyï¼ˆè¶‹åŠ¿è·Ÿéšï¼‰
2. MeanReversionStrategyï¼ˆå‡å€¼å›å½’ï¼‰
3. GridTradingStrategyï¼ˆç½‘æ ¼äº¤æ˜“ï¼‰

**å…³é”®è®¾è®¡**: Strategyåªè¾“å‡º"è¯„åˆ†"ï¼Œä¸è¾“å‡º"æŒ‡ä»¤"

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.strategy import TrendFollowingStrategy, StrategySignal

strategy = TrendFollowingStrategy()

# åˆ†æå¸‚åœº
signal = strategy.analyze(market_data, agent_context)

# è¾“å‡º
signal.bullish_score  # 0.8 (çœ‹æ¶¨è¯„åˆ†)
signal.bearish_score  # 0.2 (çœ‹è·Œè¯„åˆ†)
signal.confidence     # 0.75 (ä¿¡å¿ƒ)
signal.reasoning      # "å¼ºåŠ²ä¸Šå‡è¶‹åŠ¿"
```

---

### 5. PersonalInsightsï¼ˆä¸ªä½“è®°å¿†ï¼‰â­ v5.0æ–°å¢

**æ–‡ä»¶**: `prometheus/core/personal_insights.py`  
**è¡Œæ•°**: 403è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- ç­–ç•¥æ•ˆæœè¿½è¸ª
- å­¦ä¹ æ¨¡å¼è¯†åˆ«
- å¸‚åœºç¯å¢ƒåå¥½
- å†¥æ€ï¼ˆMeditationï¼‰
- é¡¿æ‚Ÿï¼ˆEpiphanyï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.personal_insights import PersonalInsights

insights = PersonalInsights()

# è®°å½•ç­–ç•¥æ•ˆæœ
insights.record_strategy_result('TrendFollowing', pnl=0.05)

# å†¥æ€
meditation = insights.meditate(recent_trades)
print(meditation.insights)  # ["TrendFollowingç­–ç•¥è¡¨ç°è‰¯å¥½"]

# é¡¿æ‚Ÿ
epiphany = insights.trigger_epiphany("èµ„é‡‘ç¿»å€", "è§£é”æ–°ç­–ç•¥", magnitude=0.8)

# å¿«é€ŸæŸ¥è¯¢
stats = insights.get_quick_stats()  # Dict
best = insights.get_best_strategy()  # str
```

---

### 6. Daimonï¼ˆå®ˆæŠ¤ç¥å†³ç­–ç³»ç»Ÿï¼‰

**æ–‡ä»¶**: `prometheus/core/inner_council.py`  
**è¡Œæ•°**: 635è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆï¼ˆv5.0å·²æ›´æ–°ï¼‰

**åŠŸèƒ½**:
- **6ä¸ª"å£°éŸ³"æŠ•ç¥¨æœºåˆ¶** (v5.0ä»5ä¸ªå‡çº§åˆ°6ä¸ª)
- Voteå’ŒCouncilDecisionæ•°æ®ç»“æ„
- åŠ æƒæŠ•ç¥¨æ±‡æ€»
- è‡ªåŠ¨ç”Ÿæˆå†³ç­–æ¨ç†
- å®Œæ•´å¯è¿½æº¯æ€§

**6ä¸ªå£°éŸ³**:
```python
1. Instinct Voice    # æœ¬èƒ½ï¼ˆæƒé‡1.0ï¼Œæœ€é«˜ï¼‰
2. Experience Voice  # ç»éªŒï¼ˆæƒé‡0.7ï¼‰
3. Prophecy Voice    # å…ˆçŸ¥é¢„è¨€ï¼ˆæƒé‡0.6ï¼Œæˆ˜ç•¥ï¼‰â­ v5.0æ‹†åˆ†
4. Strategy Voice    # ç­–ç•¥åˆ†æï¼ˆæƒé‡0.5ï¼Œæˆ˜æœ¯ï¼‰â­ v5.0æ–°å¢
5. Genome Voice      # åŸºå› åå¥½ï¼ˆæƒé‡0.5ï¼‰
6. Emotion Voice     # æƒ…ç»ªï¼ˆæƒé‡0.3ï¼Œæœ€ä½ï¼‰
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.inner_council import Daimon

daimon = Daimon(agent)

# å†³ç­–
context = {
    'capital_ratio': 0.3,
    'position': {...},
    'strategy_signals': [...],
    'bulletins': {...},
    ...
}

guidance = daimon.guide(context)

# è¾“å‡º
guidance.action      # 'close'
guidance.confidence  # 0.85
guidance.reasoning   # "æ­»äº¡ææƒ§(0.9) + æŸå¤±åŒæ¶(0.7) â†’ close"
guidance.all_votes   # List[Vote]
```

---

### 7. AgentV5ï¼ˆå®Œæ•´Agentç±»ï¼‰â­ v5.0æ–°å¢

**æ–‡ä»¶**: `prometheus/core/agent_v5.py`  
**è¡Œæ•°**: 575è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- é›†æˆæ‰€æœ‰v5.0æ¨¡å—
- å®Œæ•´å†³ç­–æµç¨‹
- ç­–ç•¥ç®¡ç†
- å­¦ä¹ ä¸å†¥æ€
- ç”Ÿå‘½å‘¨æœŸç®¡ç†

**å†…éƒ¨æ¶æ„**:
```
AgentV5
â”œâ”€â”€ Lineage          # è¡€ç»Ÿï¼ˆå›ºå®šï¼‰
â”œâ”€â”€ Genome           # åŸºå› ç»„ï¼ˆç¼“æ…¢è¿›åŒ–ï¼‰
â”œâ”€â”€ Instinct         # æœ¬èƒ½ï¼ˆå¯é—ä¼ ï¼‰
â”œâ”€â”€ Strategy Pool    # ç­–ç•¥ç»„ï¼ˆ3-5ä¸ªï¼‰
â”œâ”€â”€ PersonalInsights # ä¸ªä½“è®°å¿†
â”œâ”€â”€ EmotionalState   # æƒ…ç»ªçŠ¶æ€
â””â”€â”€ Daimon           # å®ˆæŠ¤ç¥ï¼ˆå†³ç­–ä¸­æ¢ï¼‰
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.agent_v5 import AgentV5

# åˆ›å»ºåˆ›ä¸–Agent
agent = AgentV5.create_genesis(
    agent_id="Agent_001",
    initial_capital=10000.0,
    family_id=0,
    num_families=50
)

# å†³ç­–
decision = agent.make_trading_decision(
    market_data={...},
    bulletins={...},
    cycle_count=10
)

# è¾“å‡º
if decision:
    print(f"{decision['action']} {decision['amount']:.4f}")
    print(f"æ¨ç†: {decision['reasoning']}")
```

---

### 8. DualEntropy/BloodLabï¼ˆéªŒè¡€ç³»ç»Ÿï¼‰

**æ–‡ä»¶**: `prometheus/core/dual_entropy.py`  
**è¡Œæ•°**: 828è¡Œ  
**çŠ¶æ€**: âœ… å®Œæˆ

**åŠŸèƒ½**:
- è¡€ç»Ÿç†µè®¡ç®—ï¼ˆShannonç†µï¼‰
- åŸºå› ç†µè®¡ç®—ï¼ˆæ–¹å·®ï¼‰
- åŒç†µå¥åº·åº¦è¯„ä¼°
- BloodTestReportæ•°æ®ç»“æ„
- PrometheusBloodLabé«˜å±‚API

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from prometheus.core.dual_entropy import PrometheusBloodLab

lab = PrometheusBloodLab(num_families=50)

# éªŒè¡€
report = lab.test_agent(agent)
print(report.lineage_purity)  # "æ··è¡€(45%çº¯åº¦)"

# ç§ç¾¤å¥åº·æ£€æŸ¥
health = lab.test_population(agents)
print(health.lineage_entropy)  # 0.85
print(health.gene_entropy)     # 0.65
print(health.health_grade)     # "å¥åº·"
```

---

## ğŸ”— æ¨¡å—ä¾èµ–å…³ç³»

```
lineage.py â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
genome.py â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
instinct.py â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                       â”œâ”€â”€â†’ agent_v5.py
strategy.py â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
personal_insights.py â”€â”€â”¤
inner_council.py â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â†’ dual_entropy.py (ç”¨äºç§ç¾¤åˆ†æ)
```

---

## ğŸ“Š ä»£ç è´¨é‡æŒ‡æ ‡

| æ¨¡å— | è¡Œæ•° | å‡½æ•°/æ–¹æ³•æ•° | æ–‡æ¡£è¦†ç›–ç‡ | æµ‹è¯•çŠ¶æ€ |
|------|------|------------|-----------|---------|
| lineage.py | 388 | 12 | 100% | âœ… |
| genome.py | 492 | 15 | 100% | âœ… |
| instinct.py | 416 | 14 | 100% | âœ… |
| strategy.py | 400 | 12 | 100% | âœ… |
| personal_insights.py | 403 | 16 | 100% | âœ… |
| inner_council.py | 635 | 10 | 100% | âœ… |
| agent_v5.py | 575 | 18 | 100% | âœ… |
| dual_entropy.py | 828 | 20 | 100% | âœ… |
| **æ€»è®¡** | **4537** | **117** | **100%** | **âœ…** |

---

## ğŸ§ª æµ‹è¯•æ–‡ä»¶

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•å†…å®¹ | çŠ¶æ€ |
|---------|---------|------|
| test_v5_instinct_daimon.py | Instinct+DaimonåŸºç¡€åŠŸèƒ½ | âœ… |
| test_agent_v5_complete.py | AgentV5å®Œæ•´ç«¯åˆ°ç«¯æµ‹è¯• | âœ… |
| test_v5_quick.py | å¿«é€ŸéªŒè¯æµ‹è¯• | âœ… |

---

## ğŸ“– ä½¿ç”¨æµç¨‹

### åˆ›å»ºAgent

```python
from prometheus.core.agent_v5 import AgentV5

# åˆ›ä¸–Agent
agent = AgentV5.create_genesis(
    agent_id="Agent_001",
    initial_capital=10000.0,
    family_id=0,        # å®¶æ—ID (0-49)
    num_families=50     # æ€»å®¶æ—æ•°
)
```

### Agentå†³ç­–

```python
# å‡†å¤‡æ•°æ®
market_data = {
    'price': 90000,
    'ohlcv': [...],
    'volume': 2000,
    'trend': 'bullish',
    'volatility': 0.05,
}

bulletins = {
    'minor_prophecy': {
        'trend': 'bullish',
        'confidence': 0.75,
        'environmental_pressure': 0.2,
    }
}

# å†³ç­–
decision = agent.make_trading_decision(
    market_data=market_data,
    bulletins=bulletins,
    cycle_count=10
)

if decision:
    print(f"Action: {decision['action']}")
    print(f"Amount: {decision['amount']}")
    print(f"Confidence: {decision['confidence']}")
    print(f"Reasoning: {decision['reasoning']}")
```

### ç§ç¾¤å¥åº·æ£€æŸ¥

```python
from prometheus.core.dual_entropy import PrometheusBloodLab

lab = PrometheusBloodLab(num_families=50)

# æ£€æŸ¥ç§ç¾¤å¥åº·åº¦
agents = [agent1, agent2, ...]
health = lab.test_population(agents)

print(f"è¡€ç»Ÿç†µ: {health.lineage_entropy:.2f}")
print(f"åŸºå› ç†µ: {health.gene_entropy:.2f}")
print(f"å¥åº·ç­‰çº§: {health.health_grade}")
```

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. æ¨¡å—åŒ–
- æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€
- ä½è€¦åˆï¼Œé«˜å†…èš
- å¯ç‹¬ç«‹æµ‹è¯•

### 2. èŒè´£åˆ†ç¦»
```
Strategy  â†’ åˆ†æå¸‚åœº â†’ è¯„åˆ†ï¼ˆä¸å†³ç­–ï¼‰
Daimon    â†’ ç»¼åˆå› ç´  â†’ å†³ç­–ï¼ˆæœ‰æƒå¦å†³ï¼‰
```

### 3. å±‚æ¬¡æ¸…æ™°
```
æˆ˜ç•¥å±‚: Mastermindï¼ˆå…ˆçŸ¥é¢„è¨€ï¼‰
æˆ˜æœ¯å±‚: Agent + Daimonï¼ˆå…·ä½“å†³ç­–ï¼‰
çº é”™å±‚: Supervisorï¼ˆæ‰§è¡Œ+ç›‘æ§ï¼‰
```

### 4. å¯è§£é‡Šæ€§
- æ‰€æœ‰å†³ç­–éƒ½æœ‰æ¨ç†
- æŠ•ç¥¨è¿‡ç¨‹å®Œå…¨å¯è¿½æº¯
- è‡ªåŠ¨ç”Ÿæˆå†³ç­–æŠ¥å‘Š

---

## ğŸ“ å…³é”®æ¦‚å¿µ

### Lineageï¼ˆè¡€ç»Ÿï¼‰vs Genomeï¼ˆåŸºå› ç»„ï¼‰

| ç‰¹æ€§ | Lineage | Genome |
|------|---------|--------|
| **å«ä¹‰** | å®¶æ—èº«ä»½ | èƒ½åŠ›å‚æ•° |
| **ç»´åº¦** | 50ç»´ï¼ˆå®¶æ—æ•°ï¼‰ | 50ç»´ï¼ˆå‚æ•°æ•°ï¼‰ |
| **å˜åŒ–** | å›ºå®šä¸å˜ | ç¼“æ…¢è¿›åŒ– |
| **ç”¨é€”** | ç”Ÿæ®–éš”ç¦» | ç­–ç•¥é…ç½® |
| **é—ä¼ ** | çˆ¶æ¯æ··åˆ | äº¤å‰+å˜å¼‚ |

### Instinctï¼ˆæœ¬èƒ½ï¼‰vs Emotionï¼ˆæƒ…ç»ªï¼‰

| ç‰¹æ€§ | Instinct | Emotion |
|------|----------|---------|
| **å«ä¹‰** | å†…åœ¨é©±åŠ¨ | å¤–åœ¨ååº” |
| **ç¨³å®šæ€§** | ç¨³å®šï¼ˆç¼“æ…¢å˜åŒ–ï¼‰ | åŠ¨æ€ï¼ˆå¿«é€Ÿå˜åŒ–ï¼‰ |
| **é—ä¼ æ€§** | å¯é—ä¼  | ä¸é—ä¼  |
| **æƒé‡** | é«˜ï¼ˆ1.0ï¼‰ | ä½ï¼ˆ0.3ï¼‰ |
| **å±‚çº§** | ä¸€çº§/äºŒçº§æœ¬èƒ½ | 4ç§æƒ…ç»ª |

### Strategyï¼ˆç­–ç•¥ï¼‰vs Daimonï¼ˆå®ˆæŠ¤ç¥ï¼‰

| ç‰¹æ€§ | Strategy | Daimon |
|------|----------|--------|
| **èŒè´£** | åˆ†æå·¥å…· | å†³ç­–ä¸­æ¢ |
| **è¾“å…¥** | å¸‚åœºæ•°æ® | æ‰€æœ‰å› ç´  |
| **è¾“å‡º** | è¯„åˆ†(0-1) | æŒ‡ä»¤(buy/sell) |
| **æƒé‡** | 0.5 | - |
| **æ•°é‡** | 3-5ä¸ª | 1ä¸ª |
| **å†³ç­–æƒ** | æ—  | 100% |

---

## ğŸ”„ æœªæ¥æ¼”è¿›

### v5.1: DaimonçŸ­æœŸè®°å¿†
- è®°å½•æœ€è¿‘20æ¬¡å†³ç­–
- ç®€å•çš„åé¦ˆå­¦ä¹ 
- è‡ªé€‚åº”æƒé‡è°ƒæ•´

### v6.0: Daimonå…ƒè®¤çŸ¥
- å®Œæ•´è®°å¿†ç³»ç»Ÿ
- è‡ªæˆ‘åæ€èƒ½åŠ›
- æ¨¡å¼è¯†åˆ«

### v7.0: LLMå¢å¼º
- å¤–éƒ¨æ™ºèƒ½å’¨è¯¢
- å…³é”®å†³ç­–å¢å¼º
- è‡ªç„¶è¯­è¨€æ¨ç†

---

**ğŸ“š æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ï¼Œéšv5.0å¼€å‘è¿›å±•åŒæ­¥**

