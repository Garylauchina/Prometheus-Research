# Prometheus V10.0 å¼€å‘ä»»åŠ¡æ¸…å•

> **æ ¸å¿ƒç›®æ ‡ï¼šå®ç°çŠ¶æ€æœºæ¶æ„ + E/I/M/Cå››å…ƒç»„æ„ŸçŸ¥**
> 
> åˆ›å»ºæ—¥æœŸï¼š2024-12-19
> è´Ÿè´£äººï¼šç¨‹åºå‘˜AI
> éªŒè¯äººï¼šæ¶æ„å¸ˆAI + å†³ç­–è€…

---

## âš ï¸ æ ¸å¿ƒè®¾è®¡å†³ç­–ï¼ˆ2024-12-19æ›´æ–°ï¼‰

### èµ„é‡‘ç®¡ç†ï¼šç»Ÿä¸€è´¦æˆ· + é£é™©å‡†å¤‡é‡‘

```
æ¶æ„ï¼š
  total_capital = 10000 USDT
  â”œâ”€ allocatable_capital (80%) = 8000 USDT
  â”‚  â””â”€ åˆ†é…ç»™Agentï¼ˆè™šæ‹Ÿç°¿è®°ï¼‰
  â””â”€ system_reserve (20%) = 2000 USDT
     â””â”€ é£é™©å‡†å¤‡é‡‘ï¼ˆç¼“å†²æ± ï¼‰

å“²å­¦åœ°ä½ï¼š
  âœ… allocation_ratio = 0.8 æ˜¯"ç¯å¢ƒå›´æ "
  âœ… å‚è€ƒé‡åŒ–åŸºé‡‘è¡Œä¸šæ ‡å‡†ï¼ˆ70-90%ï¼‰
  âœ… ä¸æ˜¯"è¡Œä¸ºå›´æ "ï¼ˆAgentå®Œå…¨è‡ªç”±ï¼‰
  âœ… ç±»æ¯”ï¼šæ£®æ—æ‰¿è½½åŠ›ã€å®¹å™¨å®¹é‡

ä¸ºä»€ä¹ˆä¸æ˜¯100%åˆ†é…ï¼Ÿ
  â†’ å•ä¸ªAgentç©¿ä»“å¯èƒ½å¯¼è‡´ç³»ç»Ÿç«‹å³å´©æºƒ
  â†’ å‚è€ƒè¡Œä¸šæœ€ä½³å®è·µï¼ˆé‡åŒ–åŸºé‡‘ç»éªŒï¼‰
  â†’ è¿™æ˜¯"ç”Ÿæ€æ‰¿è½½åŠ›"ï¼Œä¸æ˜¯"äººä¸ºé™åˆ¶"
```

### ROIè®¡ç®—ï¼šå‘¨æœŸROI

```
æ ¸å¿ƒåŸåˆ™ï¼š
  ç¹æ®–ä¼šåˆ†å‰²èµ„é‡‘ â†’ "ç»ˆèº«ROI"ä¼šå¤±çœŸ
  åªæœ‰"å‘¨æœŸROI"æ˜¯å‡†ç¡®çš„

è®¡ç®—æ–¹æ³•ï¼š
  roi = (capital_current - capital_at_last_reset) / capital_at_last_reset
  
ç¹æ®–æ—¶é‡ç½®ï¼š
  capital_at_last_reset = capital_current / 2

æ·˜æ±°æ ‡å‡†ï¼š
  åŸºäº"å½“å‰å‘¨æœŸROI"
  ä¸è€ƒè™‘å†å²ç¹æ®–æ¬¡æ•°
```

### å¼ºåˆ¶å¹³ä»“ï¼š4ç§åœºæ™¯

```
1. äº¤æ˜“æ‰€å¼ºå¹³ï¼ˆçº¯ç‰©ç†è§„åˆ™ï¼‰
2. ç©¿ä»“æ—¶å¼ºå¹³ï¼ˆæ¸…ç†æ­»äº¡Agentï¼‰
3. æ­»äº¡æ—¶å¼ºå¹³ï¼ˆé¿å…åƒµå°¸æŒä»“ï¼‰
4. ç¹æ®–æ—¶å¼ºå¹³ï¼ˆé‡Šæ”¾èµ„é‡‘ï¼Œ50/50åˆ†å‰²ï¼‰

ä¸ºä»€ä¹ˆä¸æ˜¯"äººä¸ºå›´æ "ï¼Ÿ
  â†’ éƒ½æ˜¯"æ—¢æˆäº‹å®"çš„å¤„ç†
  â†’ ä¸æ˜¯"é¢„åˆ¤æ€§é™åˆ¶"
```

### è¿½æº¯ä¿¡æ¯ï¼šç³»ç»Ÿæ—¥å¿—è®°å½•

```
Agentæ•°æ®ç»“æ„ï¼š
  âœ… åªåŒ…å«"ç°åœ¨"ï¼ˆcapital, positions, stateï¼‰
  âŒ ä¸åŒ…å«"å†å²"ï¼ˆparent_id, generation, lineage_idï¼‰

ç³»ç»Ÿçº§æ—¥å¿—ï¼š
  - reproduction_logï¼ˆç¹æ®–äº‹ä»¶ï¼‰
  - death_logï¼ˆæ­»äº¡äº‹ä»¶ï¼‰
  - trade_logï¼ˆäº¤æ˜“äº‹ä»¶ï¼‰
  
äº‹ååˆ†æï¼š
  ä»æ—¥å¿—é‡å»ºå®¶æ—æ ‘ã€åŸºå› æ¼”åŒ–è·¯å¾„
```

### å˜å¼‚æœºåˆ¶ï¼šå›ºå®šå‚æ•°ï¼ˆV10.0ï¼‰

```
âš ï¸ é‡è¦å£°æ˜ï¼šæœ€åå¯èƒ½çš„äººä¸ºé™åˆ¶

MUTATION_RATE = 0.1  # å›ºå®šå€¼
MUTATION_STD = 0.05

å“²å­¦åœ°ä½ï¼š
  - ä¸æ˜¯"è¡Œä¸ºå›´æ "ï¼ˆä¸é™åˆ¶Agentï¼‰
  - ä¸æ˜¯"ç¯å¢ƒå›´æ "ï¼ˆä¸æ˜¯æ‰¿è½½åŠ›ï¼‰
  - æ˜¯"å®éªŒå‚æ•°"ï¼Œä½†ä»æ˜¯"äººä¸ºé¢„åˆ¤"
  
V10.0ç­–ç•¥ï¼š
  - æš‚æ—¶ä½¿ç”¨å›ºå®šå€¼ï¼ˆç®€æ´æ€§ä¼˜å…ˆï¼‰
  - å¯ä»¥å®éªŒéªŒè¯ï¼ˆæµ‹è¯•0.05, 0.1, 0.2, 0.3ï¼‰
  - ä½†åˆå§‹å€¼ä»ç„¶æ˜¯äººä¸ºé€‰æ‹© âš ï¸

æœªæ¥ä¿®æ­£ï¼ˆV10.1+ä¼˜å…ˆçº§ï¼‰ï¼š
  - è®©mutation_rateæˆä¸ºåŸºå› çš„ä¸€éƒ¨åˆ†ï¼ˆ343ç»´ï¼‰
  - æˆ–éšæœºåˆå§‹åŒ–ï¼ˆæ¯ä¸ªAgentä¸åŒçš„å˜å¼‚ç‡ï¼‰
  - ç³»ç»Ÿè‡ªå·±å‘ç°æœ€ä¼˜å˜å¼‚ç‡
  - å®ç°å®Œå…¨çš„"å‚æ•°è‡ªç”±"
```

### ç¹æ®–æ–¹å¼ï¼šæ— æ€§ç¹æ®–ï¼ˆç—…æ¯’æ¨¡å‹ï¼‰

```
V10.0ï¼šç»†èƒåˆ†è£‚ï¼ˆæ— æ€§ç¹æ®–ï¼‰
  - é«˜å˜å¼‚ç‡ï¼ˆ10%ï¼‰è¶³ä»¥æä¾›æ¢ç´¢åº¦
  - ç±»ä¼¼RNAç—…æ¯’æ¼”åŒ–ç­–ç•¥
  - å®ç°ç®€æ´

ä¸éœ€è¦æœ‰æ€§ç¹æ®–ï¼ˆäº¤å‰ï¼‰ï¼š
  - å˜å¼‚ç‡å·²ç»å¾ˆé«˜
  - åŸºå› ç©ºé—´é€‚ä¸­ï¼ˆ342ç»´ï¼‰
  - å¯ä»¥åç»­è¯„ä¼°ï¼ˆV10.1+ï¼‰
```

### å“²å­¦åº§å³é“­

> **"Agentå¯ä»¥æ­»äº¡ï¼Œç³»ç»Ÿå¯ä»¥å´©æºƒï¼Œå”¯æœ‰æ¼”åŒ–æ°¸æ’"**

```
Agentå±‚é¢ï¼š
  - Agentå¯ä»¥æ­»äº¡ï¼ˆèµ„é‡‘å½’é›¶ï¼‰
  - ä¸éœ€è¦ä¿æŠ¤

Systemå±‚é¢ï¼š
  - ç³»ç»Ÿå¯ä»¥å´©æºƒï¼ˆreserve < 0ï¼‰
  - è¿™æ˜¯æ¼”åŒ–åé¦ˆ
  - è°ƒæ•´å‚æ•°ï¼Œé‡å¯å®éªŒ

Evolutionå±‚é¢ï¼š
  - æ¼”åŒ–æ°¸æ’
  - æŒç»­æ¢ç´¢ï¼Œæ°¸ä¸åœæ­¢
```

---

## ğŸ¯ é¡¹ç›®æ ¸å¿ƒ

### ä¸¤å¤§çªç ´

1. **æ¶æ„çªç ´ï¼šä»çº¿æ€§åå°„åˆ°çŠ¶æ€æœº**
   - V9ï¼šçº¯çº¿æ€§æƒé‡ â†’ æ— çŠ¶æ€è®°å¿†
   - V10ï¼šåŒç½‘ç»œçŠ¶æ€æœº â†’ æœ‰çŠ¶æ€è®°å¿† + éçº¿æ€§å†³ç­–

2. **æ„ŸçŸ¥çªç ´ï¼šE/I/M/Cå››å…ƒç»„** â­
   - V9ï¼šåªæœ‰ç¯å¢ƒ(E) + è‡ªæˆ‘(I)
   - V10ï¼šç¯å¢ƒ(E) + è‡ªæˆ‘(I) + **äº¤äº’é˜»æŠ—(M)** + ç¾¤ä½“(C)
   - **å››è€…å¿…é¡»åŒæ­¥å®ç°ï¼Œç¼ºä¸€ä¸å¯**

### ç†è®ºåŸºç¡€ï¼šä¸ºä»€ä¹ˆ32-36ç»´è¶³å¤Ÿï¼Ÿ

```
æ ¸å¿ƒå‘½é¢˜ï¼ˆæ¥è‡ªV10_DESIGN.md Â§ ç†è®ºåŸºç¡€ï¼‰ï¼š
  "åœ¨ç‰¹å®šç¯å¢ƒä¸‹ï¼Œæ— é™æœªçŸ¥çš„æ±‚å’Œå¯èƒ½æ˜¯æœ‰é™çš„ã€‚"

ä¸‰å¤§æ´å¯Ÿï¼š
  1. å°é£ä¸é›¨ï¼ˆå±€éƒ¨å¯è§‚æµ‹æ€§ï¼‰
     â†’ åªéœ€æµ‹é‡"è¿™é‡Œçš„é›¨"ï¼Œä¸éœ€ç†è§£"è¿œå¤„çš„å°é£"
     â†’ V10åªæµ‹é‡å±€éƒ¨ã€å½“ä¸‹ã€å¯ç›´æ¥è§‚æµ‹çš„é‡
  
  2. è¾¾å°”æ–‡é›€ï¼ˆä¸»å¯¼ç»´åº¦æ¶Œç°ï¼‰
     â†’ ç‰¹å®šç¯å¢ƒä¸‹ï¼Œæ— é™ç‰¹å¾åç¼©ä¸ºå°‘æ•°ä¸»å¯¼ç»´åº¦
     â†’ æ¥è¿‘å¼ºå¹³æ—¶ï¼šM9ä¸»å¯¼ï¼Œå…¶ä»–31ç»´â†’å™ªå£°
  
  3. çº§æ•°æ”¶æ•›ï¼ˆæœ‰ç•Œå™ªå£°å®šç†ï¼‰
     â†’ Î£(æœªæµ‹é‡ç»´åº¦) â‰¤ M < âˆï¼ˆæœ‰é™ï¼ï¼‰
     â†’ |ä¸»å¯¼ç»´åº¦| >> M
     â†’ ç³»ç»Ÿè¡Œä¸ºå¯ç”±æœ‰é™ç»´åº¦è¿‘ä¼¼

å®è·µæ„ä¹‰ï¼š
  â†’ V10ä¸éœ€è¦"å®Œç¾ç‰¹å¾å·¥ç¨‹"
  â†’ åªéœ€"è¦†ç›–ä¸»å¯¼ç»´åº¦ç©ºé—´"
  â†’ 32-36ç»´å·²è¦†ç›–ï¼šä»·æ ¼ã€æˆæœ¬ã€é£é™©ã€ç¾¤ä½“
  â†’ å¯é€šè¿‡å®éªŒéªŒè¯ï¼ˆä¿¡å™ªæ¯” > 10:1ï¼‰
```

### ç†è®ºåŸºç¡€

```
V10åŸºäºå››å…ƒç»„æ„ŸçŸ¥æ¡†æ¶ï¼š

E (Environment) - ç¯å¢ƒæ„ŸçŸ¥ï¼š
  å¸‚åœºçš„å®¢è§‚çŠ¶æ€ï¼ˆä¸Agentæ— å…³ï¼‰
  â†’ 12-15ç»´

I (Identity) - è‡ªæˆ‘æ„ŸçŸ¥ï¼š
  Agentçš„å†…éƒ¨çŠ¶æ€ï¼ˆä¸å¸‚åœºæ— å…³ï¼‰
  â†’ 3-4ç»´

M (Market Interaction) - äº¤äº’é˜»æŠ—ï¼šâ­ æ ¸å¿ƒçªç ´
  AgentåŠ¨ä½œä¼ é€’åˆ°å¸‚åœºçš„å›°éš¾ç¨‹åº¦
  = æ‰§è¡Œé˜»æŠ— + æˆæœ¬é˜»æŠ— + é£é™©é˜»æŠ—
  â†’ 12ç»´
  
C (Community) - ç¾¤ä½“æ„ŸçŸ¥ï¼š
  å…¶ä»–Agentçš„çŠ¶æ€
  â†’ 5ç»´

æ€»ç»´åº¦ï¼š32-36ç»´

ä¸ºä»€ä¹ˆæ˜¯å››å…ƒç»„è€Œä¸æ˜¯ä¸‰å…ƒç»„ï¼Ÿ
  å› ä¸º"äº¤äº’é˜»æŠ—"ä¸å±äºEä¹Ÿä¸å±äºI
  å®ƒæ˜¯Agentä¸å¸‚åœºçš„"æ¥å£ç‰¹æ€§"
  æ˜¯èƒ½é‡ä¼ é€’çš„æ•ˆç‡æŸå¤±
```

### æ ¸å¿ƒæ´å¯Ÿï¼šäº¤äº’é˜»æŠ—ç†è®º

**äº¤äº’é˜»æŠ— = Agentä¸å¸‚åœºä¹‹é—´çš„èƒ½é‡ä¼ é€’å›°éš¾ç¨‹åº¦**

```
ç‰©ç†ç±»æ¯”ï¼š
  ç”µè·¯ï¼šZ = R + jXï¼ˆç”µé˜»+ç”µæŠ—ï¼‰
  æœºæ¢°ï¼šF = Î¼Nï¼ˆæ‘©æ“¦åŠ›ï¼‰
  
äº¤æ˜“ç³»ç»Ÿï¼š
  M = æ‰§è¡Œé˜»æŠ— + æˆæœ¬é˜»æŠ— + é£é™©é˜»æŠ—
  
å…³é”®ç‰¹æ€§ï¼š
  1. é˜»æŠ—åŒ¹é…ï¼šAgentè§„æ¨¡ â‰ˆ å¸‚åœºå®¹é‡ â†’ æ•ˆç‡æœ€é«˜
  2. éçº¿æ€§ï¼šè®¢å•2å€ â†’ é˜»æŠ—å¯èƒ½4å€ â†’ æˆæœ¬8å€
  3. é¢‘ç‡å“åº”ï¼šé«˜é¢‘äº¤æ˜“ â†’ é˜»æŠ—å æ¯”å¤§
  4. åŠ¨æ€æ€§ï¼šå±æœºæ—¶é˜»æŠ—æš´æ¶¨ â†’ Agentå¿…é¡»åœæ­¢äº¤æ˜“

ä¸ºä»€ä¹ˆé‡è¦ï¼š
  æ–¹å‘çœ‹å¯¹ + é˜»æŠ—è¿‡é«˜ = ä»ç„¶äºé’±
  ç­–ç•¥ROI 10% - é˜»æŠ—æˆæœ¬8% = å®é™…ROI 2%
  
  äº¤äº’é˜»æŠ—å¯èƒ½æ¯”å¸‚åœºæ–¹å‘æ›´é‡è¦ï¼
```

---

## ğŸ“Š V10ç‰¹å¾ä½“ç³»ï¼ˆå¿…é¡»å®Œæ•´å®ç°ï¼‰

### E - ç¯å¢ƒæ„ŸçŸ¥ï¼ˆ12-15ç»´ï¼‰

```
åŸå§‹å¸‚åœºä¿¡å·ï¼ˆCCXTå¯¹é½ï¼‰ï¼š
[E1]  close_price_norm      # å½“å‰æ”¶ç›˜ä»·ï¼ˆå½’ä¸€åŒ–ï¼‰
[E2]  high_price_norm       # æœ€é«˜ä»·
[E3]  low_price_norm        # æœ€ä½ä»·
[E4]  open_price_norm       # å¼€ç›˜ä»·
[E5]  volume_norm           # æˆäº¤é‡
[E6]  bid_price_norm        # ä¹°ä¸€ä»·
[E7]  ask_price_norm        # å–ä¸€ä»·
[E8]  bid_volume_norm       # ä¹°ä¸€é‡
[E9]  ask_volume_norm       # å–ä¸€é‡
[E10] spread_norm           # ä¹°å–ä»·å·®
[E11] 24h_high_norm         # 24å°æ—¶æœ€é«˜
[E12] 24h_low_norm          # 24å°æ—¶æœ€ä½

ç¯å¢ƒæ‘©æ“¦ï¼ˆå¯é€‰ï¼‰ï¼š
[E13] market_friction       # å¸‚åœºæ‘©æ“¦ï¼ˆæ‰€æœ‰äººé¢ä¸´çš„å®¢è§‚æ‘©æ“¦ï¼‰
[E14] liquidity_score       # æµåŠ¨æ€§è¯„åˆ†
[E15] market_volatility     # å¸‚åœºæ³¢åŠ¨ç‡

è®¾è®¡åŸåˆ™ï¼š
  - ç›´æ¥å¯¹é½CCXTæ¥å£ï¼ˆç¬¦åˆ"å¯¹é½æ˜¾å¼ç‰¹å¾"åŸåˆ™ï¼‰
  - é¿å…è¿‡åº¦äºŒæ¬¡è®¡ç®—ï¼ˆå¦‚å¤æ‚å‡çº¿ã€æŒ‡æ ‡ï¼‰
  - è®©Agentè‡ªå·±ä»åŸå§‹æ•°æ®å­¦ä¹ 
```

### I - è‡ªæˆ‘æ„ŸçŸ¥ï¼ˆ3-4ç»´ï¼‰

```
çº¯å†…éƒ¨çŠ¶æ€ï¼ˆä¸å¸‚åœºæ— å…³ï¼‰ï¼š
[I1] has_position           # æ˜¯å¦æŒä»“ (0/1)
[I2] position_direction     # æŒä»“æ–¹å‘ (-1åšç©º/0æ— /+1åšå¤š)
[I3] state_machine_state    # çŠ¶æ€æœºçŠ¶æ€ï¼ˆOUT_MARKET/IN_MARKETï¼‰
[I4] last_signal            # ä¸Šæ¬¡å†³ç­–ä¿¡å·ï¼ˆå¯é€‰ï¼Œ-1åˆ°+1ï¼‰

è®¾è®¡åŸåˆ™ï¼š
  - çº¯ç²¹çš„"è‡ªæˆ‘"çŠ¶æ€
  - å³ä½¿å¸‚åœºä¸å­˜åœ¨ï¼ŒAgentä¹Ÿæœ‰è¿™äº›å±æ€§
  - ä¸åŒ…å«ä¸å¸‚åœºäº¤äº’çš„ç»“æœï¼ˆé‚£äº›å±äºMç»´åº¦ï¼‰
```

### M - äº¤äº’é˜»æŠ—ï¼ˆ12ç»´ï¼‰â­ æ ¸å¿ƒçªç ´

**âš ï¸ å…³é”®ï¼šMç»´åº¦ä½¿ç”¨æ»‘åŠ¨çª—å£æˆ–EMAè®¡ç®—ç»Ÿè®¡ç‰¹å¾**

```
åŸåˆ™ï¼š
  ç»Ÿè®¡ç‰¹å¾ï¼ˆM1,M2,M5,M6,M7ï¼‰ï¼šä½¿ç”¨EMAæˆ–æ»‘åŠ¨çª—å£
    â†’ é¿å…å¯¹å•æ¬¡äº¤æ˜“ï¼ˆè¿æ°”ï¼‰è¿‡æ‹Ÿåˆ
    â†’ Agentæ„ŸçŸ¥çš„æ˜¯"è¶‹åŠ¿"è€Œé"å™ªå£°"
    â†’ EMAæ¨èï¼šalpha = 0.1-0.2
    â†’ æ»‘åŠ¨çª—å£æ¨èï¼šN = 5-10ç¬”äº¤æ˜“
  
  å®æ—¶ç‰¹å¾ï¼ˆM3,M4,M8-M12ï¼‰ï¼šä½¿ç”¨å½“å‰å€¼
    â†’ ç”¨äºå±æœºåˆ¤æ–­ï¼ˆå¿…é¡»ç«‹å³å“åº”ï¼‰

æ‰§è¡Œé˜»æŠ—ï¼ˆ4ç»´ï¼‰ï¼š
[M1] fill_impedance         # æˆäº¤é˜»æŠ—ï¼ˆç»Ÿè®¡ï¼‰
     = EMA(1 - actual_filled/order_size, alpha=0.1)
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šæœ€è¿‘äº¤æ˜“çš„å¹³å‡æˆäº¤å›°éš¾ç¨‹åº¦
     é‡è¦æ€§ï¼šâ­â­â­â­â­

[M2] time_impedance         # æ—¶é—´é˜»æŠ—ï¼ˆç»Ÿè®¡ï¼‰
     = EMA(order_fill_time/reference_time, alpha=0.1)
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šæœ€è¿‘äº¤æ˜“çš„å¹³å‡å»¶è¿Ÿç¨‹åº¦
     é‡è¦æ€§ï¼šâ­â­â­â­

[M3] size_impedance         # è§„æ¨¡é˜»æŠ—ï¼ˆå®æ—¶ï¼‰
     = order_notional / market_depth_notional
     èŒƒå›´ï¼š[0, 1+]
     å«ä¹‰ï¼šå½“å‰è®¢å•ç›¸å¯¹å¸‚åœºå®¹é‡
     é‡è¦æ€§ï¼šâ­â­â­â­â­

[M4] urgency_penalty        # ç´§æ€¥åº¦æƒ©ç½šï¼ˆå®æ—¶ï¼‰
     = urgency_level Ã— (slippage + impact)
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šå½“å‰ç´§æ€¥äº¤æ˜“çš„é¢å¤–æˆæœ¬
     é‡è¦æ€§ï¼šâ­â­â­â­

æˆæœ¬é˜»æŠ—ï¼ˆ3ç»´ï¼‰ï¼š
[M5] slippage_impedance     # æ»‘ç‚¹é˜»æŠ—ï¼ˆç»Ÿè®¡ï¼‰
     = EMA(|actual_price - expected_price|/expected_price, alpha=0.1)
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šæœ€è¿‘äº¤æ˜“çš„å¹³å‡ä»·æ ¼åç¦»ç¨‹åº¦
     é‡è¦æ€§ï¼šâ­â­â­â­â­

[M6] impact_impedance       # å†²å‡»é˜»æŠ—ï¼ˆç»Ÿè®¡ï¼‰
     = EMA(|price_after - price_before|/price_before, alpha=0.1)
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šæœ€è¿‘äº¤æ˜“çš„å¹³å‡å¸‚åœºå†²å‡»ç¨‹åº¦
     é‡è¦æ€§ï¼šâ­â­â­â­â­

[M7] total_cost_impedance   # æ€»æˆæœ¬é˜»æŠ—ï¼ˆç»Ÿè®¡ï¼‰
     = slippage_impedance + impact_impedance + fee_rate
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šAgentçš„æ€»"èƒ½é‡æŸè€—"ï¼ˆç»Ÿè®¡ï¼‰
     é‡è¦æ€§ï¼šâ­â­â­â­â­

é£é™©é˜»æŠ—ï¼ˆ3ç»´ï¼‰ï¼š
[M8] leverage_risk_impedance # æ æ†é£é™©é˜»æŠ—ï¼ˆå®æ—¶ï¼‰
     = leverageÂ² / (leverageÂ² + k)
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šå½“å‰æ æ†çš„éçº¿æ€§é£é™©ï¼ˆå¹³æ–¹å…³ç³»ï¼‰
     é‡è¦æ€§ï¼šâ­â­â­â­

[M9] liquidation_impedance   # å¼ºå¹³é˜»æŠ—ï¼ˆå®æ—¶ï¼‰
     = 1 / max(liquidation_distance, 0.01)
     èŒƒå›´ï¼š[0, 100]ï¼Œæ¥è¿‘å¼ºå¹³æ—¶â†’âˆ
     å«ä¹‰ï¼šå½“å‰æ­»äº¡å¨èƒçš„ç´§è¿«ç¨‹åº¦
     é‡è¦æ€§ï¼šâ­â­â­â­â­

[M10] volatility_stress      # æ³¢åŠ¨åº”åŠ›ï¼ˆå®æ—¶ï¼‰
      = (position_size Ã— volatility) / margin_buffer
      èŒƒå›´ï¼š[0, 1+]
      å«ä¹‰ï¼šå½“å‰ç³»ç»Ÿæ‰¿å—çš„å‹åŠ›
      é‡è¦æ€§ï¼šâ­â­â­â­â­

åé¦ˆè´¨é‡ï¼ˆ2ç»´ï¼‰ï¼š
[M11] pnl_signal_quality     # ç›ˆäºä¿¡å·è´¨é‡ï¼ˆå®æ—¶ï¼‰
      = abs(position_pnl) / holding_duration
      èŒƒå›´ï¼š[0, 1]
      å«ä¹‰ï¼šå½“å‰å•ä½æ—¶é—´çš„ç›ˆäºä¿¡å·å¼ºåº¦
      é‡è¦æ€§ï¼šâ­â­â­

[M12] comfort_signal_strength # èˆ’é€‚åº¦ä¿¡å·å¼ºåº¦ï¼ˆå®æ—¶ï¼‰
      = abs(position_direction Ã— market_trend) Ã— (1 - noise)
      èŒƒå›´ï¼š[0, 1]
      å«ä¹‰ï¼šå½“å‰æ–¹å‘å¯¹é½çš„æ˜ç¡®ç¨‹åº¦
      é‡è¦æ€§ï¼šâ­â­â­â­

è®¾è®¡åŸåˆ™ï¼š
  - æ‰€æœ‰ç»´åº¦éƒ½å¯ä»ç³»ç»Ÿå®é™…æµ‹é‡
  - åŒºåˆ†ç»Ÿè®¡ç‰¹å¾ï¼ˆç”¨EMAï¼‰å’Œå®æ—¶ç‰¹å¾ï¼ˆç”¨å½“å‰å€¼ï¼‰
  - åŒ…å«éçº¿æ€§å…³ç³»ï¼ˆå¦‚leverageÂ²ï¼‰
  - åæ˜ "èƒ½é‡ä¼ é€’æ•ˆç‡"
  - èƒ½æ¶Œç°èµ„é‡‘è‡ªé€‚åº”ã€é£é™©è‡ªé€‚åº”ç­–ç•¥
```

### C - ç¾¤ä½“æ„ŸçŸ¥ï¼ˆ5ç»´ï¼‰

```
[C1] group_position_ratio   # ç¾¤ä½“æŒä»“ç‡
     = æœ‰æŒä»“çš„Agentæ•° / æ€»Agentæ•°
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šå¤§å®¶éƒ½åœ¨åœºå†…å—ï¼Ÿ
     é‡è¦æ€§ï¼šâ­â­â­â­

[C2] group_long_short_bias  # ç¾¤ä½“å¤šç©ºå€¾å‘
     = (åšå¤šAgentæ•° - åšç©ºAgentæ•°) / æŒä»“Agentæ•°
     èŒƒå›´ï¼š[-1, +1]
     å«ä¹‰ï¼šå¤§å®¶æ˜¯åšå¤šè¿˜æ˜¯åšç©ºï¼Ÿ
     é‡è¦æ€§ï¼šâ­â­â­â­

[C3] group_avg_pnl_pct      # ç¾¤ä½“å¹³å‡ç›ˆäº
     = æ‰€æœ‰Agentçš„å¹³å‡ç›ˆäºç™¾åˆ†æ¯”
     èŒƒå›´ï¼š[-1, +1]
     å«ä¹‰ï¼šå¤§å®¶èµšé’±è¿˜æ˜¯äºé’±ï¼Ÿ
     é‡è¦æ€§ï¼šâ­â­â­â­

[C4] group_death_rate       # è¿‘æœŸæ­»äº¡ç‡
     = æœ€è¿‘Nä¸ªå‘¨æœŸçš„Agentæ­»äº¡æ¯”ä¾‹
     èŒƒå›´ï¼š[0, 1]
     å«ä¹‰ï¼šå¤§å®¶åœ¨æ‰¹é‡æ­»äº¡å—ï¼Ÿï¼ˆç³»ç»Ÿå±æœºä¿¡å·ï¼‰
     é‡è¦æ€§ï¼šâ­â­â­â­â­

[C5] top_performers_signal  # ä¼˜ç§€è€…ä¿¡å·
     = ROIå‰10%çš„Agentçš„å¹³å‡ä¿¡å·
     èŒƒå›´ï¼š[-1, +1]
     å«ä¹‰ï¼šé«˜æ‰‹åœ¨åšä»€ä¹ˆï¼Ÿ
     é‡è¦æ€§ï¼šâ­â­â­

è®¾è®¡åŸåˆ™ï¼š
  - ç¾¤ä½“ç»Ÿè®¡ç‰¹å¾ï¼Œä¸æ˜¯ä¸ªä½“ç»†èŠ‚
  - Agentçœ‹ä¸åˆ°ç‰¹å®šAgentçš„ç­–ç•¥
  - ä¿æŒå¸‚åœºçš„"ç›²æ‰“"ç‰¹æ€§
  - è®¡ç®—é«˜æ•ˆï¼ˆæ¯å‘¨æœŸéƒ½è¦ç®—ï¼‰
```

**æ€»ç»´åº¦ï¼šE(12-15) + I(3-4) + M(12) + C(5) = 32-36ç»´**

---

## ğŸ—ï¸ V10æ¶æ„è®¾è®¡

### åŸºå› ç»“æ„ï¼ˆGenomeV10ï¼‰

```
åŸºå› åŒ…å«ï¼š
1. IN_MARKETç½‘ç»œå‚æ•°
   - W1: [5 Ã— 36] è¾“å…¥å±‚åˆ°éšè—å±‚æƒé‡çŸ©é˜µï¼ˆå‡è®¾36ç»´ç‰¹å¾ï¼‰
   - b1: [5] éšè—å±‚åç½®
   - W2: [5] éšè—å±‚åˆ°è¾“å‡ºå±‚æƒé‡
   - b2: 1ä¸ªæ ‡é‡ï¼Œè¾“å‡ºåç½®

2. OUT_MARKETç½‘ç»œå‚æ•°
   - W1: [5 Ã— 36]
   - b1: [5]
   - W2: [5]
   - b2: 1ä¸ªæ ‡é‡

3. çŠ¶æ€è½¬ç§»é˜ˆå€¼
   - entry_threshold: å…¥åœºé˜ˆå€¼ï¼ˆé»˜è®¤0.3ï¼‰
   - exit_threshold: å‡ºåœºé˜ˆå€¼ï¼ˆé»˜è®¤-0.3ï¼‰

æ€»å‚æ•°æ•°ï¼š
  (5Ã—36 + 5 + 5 + 1) Ã— 2 + 2 = 386ç»´
  
æ³¨ï¼šå…·ä½“ç»´åº¦å–å†³äºç‰¹å¾é…ç½®ï¼ˆE+I+M+C=32-36ç»´ï¼‰
```

### ç¥ç»ç½‘ç»œï¼ˆShallowNetworkï¼‰

```
ç»“æ„ï¼š
  è¾“å…¥å±‚ â†’ éšè—å±‚(5ç¥ç»å…ƒ) â†’ è¾“å‡ºå±‚(1ç¥ç»å…ƒ)
  
æ¿€æ´»å‡½æ•°ï¼š
  tanhï¼ˆåŒæ›²æ­£åˆ‡ï¼‰
  
å‰å‘ä¼ æ’­ï¼š
  h = tanh(W1 @ features + b1)
  signal = tanh(W2 @ h + b2)
  
è¾“å‡ºï¼š
  signal âˆˆ [-1, +1]
```

### çŠ¶æ€æœºï¼ˆStateMachineï¼‰

```
çŠ¶æ€å®šä¹‰ï¼š
  OUT_MARKET: åœºå¤–è§‚æœ›ï¼ˆæ— æŒä»“ï¼‰
  IN_MARKET: åœºå†…æŒä»“ï¼ˆæœ‰æŒä»“ï¼‰

å†³ç­–æµç¨‹ï¼š
  1. è·å–32-36ç»´ç‰¹å¾å‘é‡ï¼ˆE+I+M+Cï¼‰
  2. æ ¹æ®current_stateé€‰æ‹©å¯¹åº”ç½‘ç»œ
  3. signal = network.forward(features)
  4. æ‰§è¡ŒåŠ¨ä½œï¼ˆå¼€ä»“/å¹³ä»“/æŒæœ‰ï¼‰
  5. è®°å½•æ‰§è¡Œæ•°æ®ï¼ˆç”¨äºæ›´æ–°Mç»´åº¦çš„EMAï¼‰
  6. æ£€æŸ¥çŠ¶æ€è½¬ç§»æ¡ä»¶ï¼ˆè€ƒè™‘é˜»æŠ—å’Œé£é™©ï¼‰
  7. æ›´æ–°çŠ¶æ€

çŠ¶æ€è½¬ç§»è§„åˆ™ï¼š
  OUT_MARKET â†’ IN_MARKET: 
    å½“ signal > entry_threshold 
    ä¸” äº¤äº’é˜»æŠ—å¯æ¥å—ï¼ˆtotal_cost_impedance < é˜ˆå€¼ï¼‰
  
  IN_MARKET â†’ OUT_MARKET:
    å½“ signal < exit_threshold 
    æˆ– é£é™©é˜»æŠ—è¿‡é«˜ï¼ˆliquidation_impedance > é˜ˆå€¼ï¼‰
    æˆ– ç¾¤ä½“å±æœºï¼ˆgroup_death_rate > é˜ˆå€¼ï¼‰
```

### Agentç»“æ„ï¼ˆAgentV10ï¼‰

```
æ ¸å¿ƒå±æ€§ï¼š
  - agent_id: å”¯ä¸€æ ‡è¯†
  - genome: GenomeV10å®ä¾‹
  - state_machine: StateMachineå®ä¾‹
  - capital: å½“å‰èµ„é‡‘
  - position: å½“å‰æŒä»“
  - trade_history: äº¤æ˜“å†å²
  - capital_snapshots: èµ„é‡‘å¿«ç…§ï¼ˆç”¨äºå‘¨æœŸROIï¼‰

æ ¸å¿ƒæ–¹æ³•ï¼š
  - decide(features): å†³ç­–æ–¹æ³•ï¼Œè¿”å›ä¿¡å·
  - get_current_state(): è¿”å›å½“å‰çŠ¶æ€
  - calculate_roi(): è®¡ç®—ROI
  - snapshot_capital(): è®°å½•èµ„é‡‘å¿«ç…§
```

---

## ğŸ“‹ å¼€å‘ä»»åŠ¡ï¼ˆæŒ‰é˜¶æ®µï¼‰

## é˜¶æ®µ0ï¼šç¯å¢ƒå‡†å¤‡

### Task 0.1ï¼šGitåˆ†æ”¯ç®¡ç†
- ä»mainåˆ†æ”¯åˆ›å»º `feature/v10-state-machine`
- æ¨é€åˆ°è¿œç¨‹ä»“åº“

### Task 0.2ï¼šç›®å½•ç»“æ„åˆ›å»º
åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š
```
prometheus/v10/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py             # Agentç±»ï¼ˆåŸºå› å®¹å™¨ï¼‰
â”‚   â”œâ”€â”€ genome.py            # Genomeç±»ï¼ˆåŸºå› ï¼‰
â”‚   â”œâ”€â”€ network.py           # ShallowNetworkç±»ï¼ˆç¥ç»ç½‘ç»œï¼‰
â”‚   â”œâ”€â”€ decision_engine.py   # DecisionEngineç±»ï¼ˆå†³ç­–å¼•æ“ï¼‰â­
â”‚   â””â”€â”€ features.py          # ç‰¹å¾è®¡ç®—ï¼ˆE/I/M/Cï¼‰
â”œâ”€â”€ evolution/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ operators.py         # å˜å¼‚/äº¤å‰
â”‚   â””â”€â”€ evaluator.py         # é€‚åº”åº¦è¯„ä¼°
â”œâ”€â”€ system/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ manager.py           # SystemManagerç±»ï¼ˆç³»ç»Ÿç®¡ç†å™¨ï¼‰
â””â”€â”€ tests/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ test_network.py
    â”œâ”€â”€ test_genome.py
    â”œâ”€â”€ test_agent.py
    â”œâ”€â”€ test_decision_engine.py  # å†³ç­–å¼•æ“æµ‹è¯•
    â””â”€â”€ test_features.py
```

---

## é˜¶æ®µ1ï¼šæ ¸å¿ƒç»„ä»¶å®ç°

### Task 1.1ï¼šå®ç°ç‰¹å¾è®¡ç®—æ¨¡å—
**æ–‡ä»¶ï¼š** `prometheus/v10/core/features.py`

**è¦æ±‚ï¼š**
- å®ç°Eç»´åº¦ï¼ˆ12-15ç»´ç¯å¢ƒç‰¹å¾ï¼‰
  - åŸå§‹CCXTæ•°æ®ï¼ˆå¿…éœ€ï¼‰
  - ç¯å¢ƒæ‘©æ“¦æŒ‡æ ‡ï¼ˆå¯é€‰ï¼‰
- å®ç°Iç»´åº¦ï¼ˆ3-4ç»´è‡ªæˆ‘æ„ŸçŸ¥ï¼‰
  - çº¯å†…éƒ¨çŠ¶æ€
- **å®ç°Mç»´åº¦ï¼ˆ12ç»´äº¤äº’é˜»æŠ—ï¼‰â­ æ ¸å¿ƒ**
  - æ‰§è¡Œé˜»æŠ—ï¼ˆ4ç»´ï¼‰ï¼šM1,M2ç”¨EMAï¼ŒM3,M4ç”¨å®æ—¶å€¼
  - æˆæœ¬é˜»æŠ—ï¼ˆ3ç»´ï¼‰ï¼šM5,M6,M7ç”¨EMA
  - é£é™©é˜»æŠ—ï¼ˆ3ç»´ï¼‰ï¼šM8-M10ç”¨å®æ—¶å€¼
  - åé¦ˆè´¨é‡ï¼ˆ2ç»´ï¼‰ï¼šM11-M12ç”¨å®æ—¶å€¼
  - **å…³é”®ï¼šç»Ÿè®¡ç‰¹å¾å¿…é¡»ç”¨æ»‘åŠ¨çª—å£æˆ–EMAï¼Œé¿å…å¯¹å•æ¬¡äº¤æ˜“è¿‡æ‹Ÿåˆ**
- **å®ç°Cç»´åº¦ï¼ˆ5ç»´ç¾¤ä½“æ„ŸçŸ¥ï¼‰**
  - ç¾¤ä½“ç»Ÿè®¡ç‰¹å¾
- æ‰€æœ‰ç‰¹å¾å½’ä¸€åŒ–åˆ°[-1, 1]æˆ–[0, 1]åŒºé—´

**å…³é”®ï¼š**
- Mç»´åº¦éœ€è¦ä»äº¤æ˜“æ‰§è¡Œä¸­å®é™…æµ‹é‡ï¼ˆæ»‘ç‚¹ã€æˆäº¤ç‡ã€å»¶è¿Ÿç­‰ï¼‰
- **Mç»´åº¦çš„ç»Ÿè®¡ç‰¹å¾ï¼ˆM1,M2,M5,M6,M7ï¼‰å¿…é¡»ä½¿ç”¨EMAæˆ–æ»‘åŠ¨çª—å£è®¡ç®—**
  - EMAæ¨èå‚æ•°ï¼šalpha = 0.1-0.2
  - æ»‘åŠ¨çª—å£æ¨èï¼šæœ€è¿‘5-10ç¬”äº¤æ˜“
  - ç›®çš„ï¼šé¿å…å¯¹å•æ¬¡äº¤æ˜“ï¼ˆè¿æ°”ï¼‰è¿‡æ‹Ÿåˆ
- Mç»´åº¦çš„å®æ—¶ç‰¹å¾ï¼ˆM3,M4,M8-M12ï¼‰ä½¿ç”¨å½“å‰å€¼ï¼Œç”¨äºå±æœºåˆ¤æ–­
- Cç»´åº¦éœ€è¦ä»SystemManagerè·å–å…¨å±€ä¿¡æ¯
- è®¡ç®—æ•ˆç‡è¦é«˜ï¼ˆæ¯å‘¨æœŸæ‰€æœ‰Agentéƒ½è¦è°ƒç”¨ï¼‰
- ç‰¹åˆ«æ³¨æ„Mç»´åº¦çš„éçº¿æ€§è®¡ç®—ï¼ˆå¦‚leverageÂ²ï¼‰

---

### Task 1.2ï¼šå®ç°æµ…å±‚ç¥ç»ç½‘ç»œ
**æ–‡ä»¶ï¼š** `prometheus/v10/core/network.py`

**è¦æ±‚ï¼š**
- å®ç°ShallowNetworkç±»
- è¾“å…¥ç»´åº¦ï¼š32-36ï¼ˆå¯é…ç½®ï¼ŒåŸºäºE+I+M+Cï¼‰
- éšè—å±‚ï¼š5ä¸ªç¥ç»å…ƒï¼ˆå¯é…ç½®ï¼‰
- è¾“å‡ºï¼š1ä¸ªä¿¡å·å€¼
- æ¿€æ´»å‡½æ•°ï¼štanh
- å®ç°forwardå‰å‘ä¼ æ’­
- å®ç°å‚æ•°çš„get/setæ–¹æ³•
- å®ç°mutateå˜å¼‚æ–¹æ³•

**æµ‹è¯•è¦æ±‚ï¼š**
- è¾“å…¥32-36ç»´ï¼Œè¾“å‡ºåœ¨[-1, 1]
- éªŒè¯tanhæ¿€æ´»å‡½æ•°
- éªŒè¯å˜å¼‚åç»´åº¦ä¸å˜
- éªŒè¯å‚æ•°åºåˆ—åŒ–/ååºåˆ—åŒ–

---

### Task 1.3ï¼šå®ç°å†³ç­–å¼•æ“
**æ–‡ä»¶ï¼š** `prometheus/v10/core/decision_engine.py`

**è¦æ±‚ï¼š**
- å®ç°DecisionEngineç±»ï¼ˆçº¯é™æ€æ–¹æ³•ï¼‰
- å®ç°decideæ–¹æ³•ï¼ˆæ ¸å¿ƒå†³ç­–å‡½æ•°ï¼‰
  - è¾“å…¥ï¼šgenome, features(E+I+M+C), current_state
  - è¾“å‡ºï¼šsignal, new_state
- å®ç°_forward_passæ–¹æ³•ï¼ˆç¥ç»ç½‘ç»œå‰å‘ä¼ æ’­ï¼‰
- å®ç°_check_transitionæ–¹æ³•ï¼ˆçŠ¶æ€è½¬ç§»åˆ¤æ–­ï¼‰
  - è€ƒè™‘ä¿¡å·å¼ºåº¦
  - è€ƒè™‘äº¤äº’é˜»æŠ—ï¼ˆtotal_cost_impedanceï¼‰
  - è€ƒè™‘é£é™©æ°´å¹³ï¼ˆliquidation_impedance, group_death_rateï¼‰
- å®ç°_dict_to_vectoræ–¹æ³•ï¼ˆç‰¹å¾å­—å…¸è½¬å‘é‡ï¼‰

**å…³é”®ï¼š**
- å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼ˆæ— çŠ¶æ€ã€æ— å‰¯ä½œç”¨ï¼‰
- ç›¸åŒè¾“å…¥ â†’ ç›¸åŒè¾“å‡º
- çŠ¶æ€æœºé€»è¾‘é›†æˆåœ¨decideæ–¹æ³•ä¸­

**æµ‹è¯•è¦æ±‚ï¼š**
- éªŒè¯çº¯å‡½æ•°ç‰¹æ€§ï¼ˆç›¸åŒè¾“å…¥â†’ç›¸åŒè¾“å‡ºï¼‰
- éªŒè¯ä¸åŒçŠ¶æ€è°ƒç”¨ä¸åŒç½‘ç»œ
- éªŒè¯çŠ¶æ€è½¬ç§»é€»è¾‘æ­£ç¡®
- éªŒè¯é˜ˆå€¼è¾¹ç•Œæ¡ä»¶
- éªŒè¯å±æœºå¼ºåˆ¶å‡ºåœºé€»è¾‘

---

### Task 1.4ï¼šå®ç°åŸºå› ç»“æ„
**æ–‡ä»¶ï¼š** `prometheus/v10/core/genome.py`

**è¦æ±‚ï¼š**
- å®ç°GenomeV10ç±»
- å­˜å‚¨åŒç½‘ç»œå‚æ•°ï¼ˆin_market_params, out_market_paramsï¼‰
- å­˜å‚¨çŠ¶æ€è½¬ç§»é˜ˆå€¼ï¼ˆentry_threshold, exit_thresholdï¼‰
- å®ç°éšæœºåˆå§‹åŒ–ï¼ˆXavieråˆå§‹åŒ–ï¼‰
- å®ç°mutateå˜å¼‚æ–¹æ³•
  - æƒé‡å˜å¼‚ï¼šæ·»åŠ é«˜æ–¯å™ªå£°
  - é˜ˆå€¼å˜å¼‚ï¼šå°å¹…è°ƒæ•´
- å®ç°crossoveräº¤å‰æ–¹æ³•ï¼ˆçŠ¶æ€çº§äº¤å‰ï¼‰
- å®ç°åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆto_dict/from_dictï¼‰
- å®ç°get_total_params_countï¼ˆåº”è¿”å›386ï¼Œå–å†³äºç‰¹å¾ç»´åº¦ï¼‰

**æµ‹è¯•è¦æ±‚ï¼š**
- éªŒè¯éšæœºåˆå§‹åŒ–å‚æ•°èŒƒå›´åˆç†
- éªŒè¯å˜å¼‚åå‚æ•°æœ‰å˜åŒ–ä½†ç»´åº¦ä¸å˜
- éªŒè¯äº¤å‰äº§ç”Ÿåˆæ³•æ–°åŸºå› 
- éªŒè¯åºåˆ—åŒ–/ååºåˆ—åŒ–ä¸€è‡´
- éªŒè¯æ€»å‚æ•°æ•°æ­£ç¡®ï¼ˆçº¦386ç»´ï¼‰

---

### Task 1.5ï¼šå®ç°Agent
**æ–‡ä»¶ï¼š** `prometheus/v10/core/agent.py`

**è¦æ±‚ï¼š**
- å®ç°AgentV10ç±»ï¼ˆåŸºå› å®¹å™¨ + èµ„æºç®¡ç†ï¼‰
- æ ¸å¿ƒå±æ€§ï¼š
  - genome: Genomeå®ä¾‹
  - capital: å½“å‰èµ„é‡‘
  - position: å½“å‰æŒä»“
  - trade_history: äº¤æ˜“å†å²
  - capital_snapshots: èµ„é‡‘å¿«ç…§
  - current_state: å½“å‰çŠ¶æ€ï¼ˆ'OUT_MARKET' / 'IN_MARKET'ï¼‰
  - last_signal: ä¸Šæ¬¡ä¿¡å·
- å®ç°get_identity_featuresæ–¹æ³•
  - è¿”å›Iç»´åº¦ç‰¹å¾å­—å…¸
- å®ç°decideæ–¹æ³•ï¼ˆå†³ç­–æ¥å£ï¼‰
  - å†…éƒ¨è°ƒç”¨DecisionEngine.decide
  - æ›´æ–°current_state
  - è¿”å›signal
- å®ç°calculate_roiæ–¹æ³•ï¼ˆæ”¯æŒannualizedå’Œperiodå‚æ•°ï¼‰
- å®ç°snapshot_capitalæ–¹æ³•
- å®ç°åºåˆ—åŒ–/ååºåˆ—åŒ–

**å…³é”®ï¼š**
- Agentä¸åŒ…å«å†³ç­–é€»è¾‘
- Agentæ˜¯åŸºå› çš„"ç‰©ç†å®ä¾‹"
- å†³ç­–é€šè¿‡DecisionEngineï¼ˆå¤–éƒ¨çº¯å‡½æ•°ï¼‰
- çœ‹èµ·æ¥åƒAgentè‡ªå·±å†³ç­–ï¼Œå®é™…æ˜¯åŸºå› è¡¨è¾¾

**æµ‹è¯•è¦æ±‚ï¼š**
- éªŒè¯Agentåˆå§‹åŒ–æ­£ç¡®
- éªŒè¯get_identity_featuresè¿”å›æ­£ç¡®
- éªŒè¯decideè°ƒç”¨DecisionEngine
- éªŒè¯çŠ¶æ€æ›´æ–°æ­£ç¡®
- éªŒè¯ROIè®¡ç®—å‡†ç¡®
- éªŒè¯åºåˆ—åŒ–/ååºåˆ—åŒ–

---

## é˜¶æ®µ2ï¼šæ¼”åŒ–æœºåˆ¶ä¸ç³»ç»Ÿç®¡ç†

### Task 2.1ï¼šå®ç°æ¼”åŒ–æ“ä½œ
**æ–‡ä»¶ï¼š** `prometheus/v10/evolution/operators.py`

**è¦æ±‚ï¼š**
- å®ç°mutate_genomeå‡½æ•°
  - è°ƒç”¨genome.mutate
  - **ä½¿ç”¨å›ºå®šå˜å¼‚ç‡ï¼ˆMUTATION_RATE=0.1ï¼‰**
  - **æ³¨æ„ï¼šè¿™æ˜¯V10.0æœ€åå¯èƒ½çš„äººä¸ºé™åˆ¶**
  - æ”¯æŒé…ç½®å‚æ•°
- å®ç°crossover_genomeså‡½æ•°ï¼ˆV10.0ä¸éœ€è¦ï¼Œé¢„ç•™ï¼‰
  - çŠ¶æ€çº§äº¤å‰ï¼šChildçš„INæ¥è‡ªParent1ï¼ŒOUTæ¥è‡ªParent2
  - é˜ˆå€¼å–å¹³å‡æˆ–éšæœºé€‰æ‹©
- å®ç°select_parentså‡½æ•°
  - æ”¯æŒé”¦æ ‡èµ›é€‰æ‹©
  - æ”¯æŒè½®ç›˜èµŒé€‰æ‹©

**æµ‹è¯•è¦æ±‚ï¼š**
- éªŒè¯å˜å¼‚æ“ä½œæ­£ç¡®
- éªŒè¯äº¤å‰äº§ç”Ÿæœ‰æ•ˆåŸºå› ï¼ˆå¦‚æœå®ç°ï¼‰
- éªŒè¯é€‰æ‹©æœºåˆ¶æŒ‰é€‚åº”åº¦å·¥ä½œ

---

### Task 2.2ï¼šå®ç°ç³»ç»Ÿç®¡ç†å™¨
**æ–‡ä»¶ï¼š** `prometheus/v10/system/manager.py`

**è¦æ±‚ï¼š**

#### æ ¸å¿ƒæ¶æ„ï¼šç»Ÿä¸€è´¦æˆ· + è™šæ‹Ÿç°¿è®° + é£é™©å‡†å¤‡é‡‘

```python
class SystemManagerV10:
    def __init__(self, config):
        # ===== ç»Ÿä¸€è´¦æˆ·æ¶æ„ =====
        self.total_capital = config.initial_capital  # ä¾‹å¦‚ï¼š10000 USDT
        
        # ===== ç¯å¢ƒå›´æ å‚æ•°ï¼ˆå‚è€ƒè¡Œä¸šæ ‡å‡†ï¼‰â­ =====
        self.allocation_ratio = config.allocation_ratio  # æ¨èï¼š0.8
        # ç†ç”±ï¼šå‚è€ƒé‡åŒ–åŸºé‡‘è¡Œä¸šæ ‡å‡†ï¼ˆ70-90%ï¼‰
        # 80%æ˜¯ä¸­é—´å€¼ï¼Œå¹³è¡¡ç¨³å¥æ€§å’ŒAgentè‡ªç”±åº¦
        
        # ===== èµ„é‡‘æ± åˆ’åˆ† =====
        self.allocatable_capital = self.total_capital * self.allocation_ratio
        self.system_reserve = self.total_capital * (1 - self.allocation_ratio)
        
        # ===== è™šæ‹Ÿç°¿è®°ç³»ç»Ÿ =====
        self.capital_ledger = {}  # {agent_id: virtual_capital}
        
        # ===== æ—¥å¿—ç³»ç»Ÿ =====
        self.reproduction_log = []
        self.death_log = []
        self.trade_log = []
```

#### æ ¸å¿ƒåŠŸèƒ½å®ç°

**1. ç§ç¾¤åˆå§‹åŒ–**
```python
def initialize_population(self, num_agents):
    """
    åˆå§‹åŒ–ç§ç¾¤
    
    èµ„é‡‘åˆ†é…ï¼š
      - åªä»allocatable_capitalåˆ†é…
      - system_reserveä¿æŒä¸åŠ¨ï¼ˆé£é™©ç¼“å†²ï¼‰
    """
    capital_per_agent = self.allocatable_capital / num_agents
    
    for i in range(num_agents):
        agent_id = f"agent_{i}"
        agent = AgentV10(
            agent_id=agent_id,
            genome=GenomeV10.random_init(),
            capital=capital_per_agent
        )
        self.capital_ledger[agent_id] = capital_per_agent
        self.agents.append(agent)
```

**2. ç©¿ä»“å¤„ç†**
```python
def handle_liquidation(self, agent_id, loss):
    """
    å¤„ç†ç©¿ä»“ï¼ˆä»system_reserveæ‰£é™¤ï¼‰
    
    å…³é”®ï¼š
      - æŸå¤±ç”±é£é™©å‡†å¤‡é‡‘æ‰¿æ‹…
      - ä¸ä»total_capitalæ‰£é™¤
      - Agentèµ„é‡‘å½’é›¶
    """
    self.capital_ledger[agent_id] = 0
    self.system_reserve -= loss  # â­ ä»å‡†å¤‡é‡‘æ‰£é™¤
    
    # è®°å½•æ­»äº¡äº‹ä»¶
    self.death_log.append(DeathEvent(
        event_time=self.current_step,
        agent_id=agent_id,
        death_reason="liquidation",
        final_capital=0,
        final_roi=-1.0
    ))
    
    # æ£€æŸ¥ç³»ç»Ÿå¥åº·
    if self.system_reserve < 0:
        print(f"ğŸš¨ ç³»ç»Ÿç ´äº§ï¼é£é™©å‡†å¤‡é‡‘è€—å°½")
        print(f"reserve = {self.system_reserve:.2f}")
        self.crash()
```

**3. ç¹æ®–æœºåˆ¶**
```python
def handle_reproduction(self, parent_id):
    """
    å¤„ç†ç¹æ®–ï¼ˆç»†èƒåˆ†è£‚æ¨¡å¼ï¼‰
    
    æµç¨‹ï¼š
      1. å¼ºåˆ¶å¹³ä»“ï¼ˆé‡Šæ”¾èµ„é‡‘ï¼‰
      2. èµ„é‡‘50/50åˆ†å‰²
      3. åŸºå› å˜å¼‚
      4. å‘¨æœŸROIé‡ç½®
    """
    parent = self.get_agent(parent_id)
    
    # 1. å¼ºåˆ¶å¹³ä»“
    self.force_close_all_positions(parent_id)
    
    # 2. èµ„é‡‘åˆ†å‰²
    parent_capital = self.capital_ledger[parent_id]
    child_capital = parent_capital * 0.5
    
    self.capital_ledger[parent_id] = parent_capital * 0.5
    
    # 3. åˆ›å»ºå­ä»£
    child_id = f"agent_{self.next_agent_id}"
    child = AgentV10(
        agent_id=child_id,
        genome=parent.genome.mutate(),  # åŸºå› å˜å¼‚
        capital=child_capital
    )
    self.capital_ledger[child_id] = child_capital
    self.agents.append(child)
    
    # 4. é‡ç½®å‘¨æœŸROI
    parent.capital_at_last_reset = self.capital_ledger[parent_id]
    child.capital_at_last_reset = child_capital
    
    # 5. è®°å½•ç¹æ®–äº‹ä»¶
    self.reproduction_log.append(ReproductionEvent(
        event_time=self.current_step,
        parent_id=parent_id,
        child_id=child_id,
        parent_capital_before=parent_capital,
        parent_capital_after=parent_capital * 0.5,
        child_capital=child_capital
    ))
```

**4. æ­»äº¡å¤„ç†**
```python
def handle_death(self, agent_id, reason):
    """
    å¤„ç†æ­»äº¡
    
    æµç¨‹ï¼š
      1. å¼ºåˆ¶å¹³ä»“
      2. ç»“ç®—èµ„é‡‘
      3. å›æ”¶å‰©ä½™èµ„é‡‘åˆ°system_reserveï¼ˆæ¨èï¼‰
      4. ä»æ´»è·ƒåˆ—è¡¨ç§»é™¤
    """
    agent = self.get_agent(agent_id)
    
    # 1. å¼ºåˆ¶å¹³ä»“
    self.force_close_all_positions(agent_id)
    
    # 2. ç»“ç®—
    final_capital = self.capital_ledger[agent_id]
    final_roi = agent.calculate_roi()
    
    # 3. å›æ”¶å‰©ä½™èµ„é‡‘ï¼ˆå¦‚æœ>0ï¼‰
    if final_capital > 0:
        self.system_reserve += final_capital  # â­ å›æ”¶åˆ°å‡†å¤‡é‡‘
    
    # 4. æ¸…ç†
    self.capital_ledger[agent_id] = 0
    agent.state = AgentState.DEAD
    
    # 5. è®°å½•
    self.death_log.append(DeathEvent(
        event_time=self.current_step,
        agent_id=agent_id,
        death_reason=reason,
        final_capital=final_capital,
        final_roi=final_roi
    ))
```

**5. ç³»ç»Ÿå¥åº·ç›‘æ§**
```python
def check_system_health(self):
    """
    ç³»ç»Ÿå¥åº·ç›‘æ§ï¼ˆä»…è§‚å¯Ÿå’Œè­¦å‘Šï¼Œä¸å¹²é¢„ï¼‰
    """
    reserve_ratio = self.system_reserve / self.total_capital
    
    # é£é™©å‡†å¤‡é‡‘ç›‘æ§
    if reserve_ratio < 0.0:
        print(f"ğŸš¨ ç³»ç»Ÿç ´äº§ï¼reserve = {self.system_reserve:.2f}")
        self.crash()
    elif reserve_ratio < 0.05:
        print(f"âš ï¸ ç¼“å†²æ± å±é™©ï¼š{reserve_ratio:.1%}")
    elif reserve_ratio < 0.10:
        print(f"âš ï¸ ç¼“å†²æ± è­¦å‘Šï¼š{reserve_ratio:.1%}")
    
    # åªæ˜¯è­¦å‘Šï¼Œä¸å¹²é¢„Agentè¡Œä¸º âœ“
```

#### å…¶ä»–æ ¸å¿ƒåŠŸèƒ½

- å®ç°Eç»´åº¦ï¼ˆç¯å¢ƒç‰¹å¾ï¼‰è®¡ç®—
  - ä»å¸‚åœºæ•°æ®è®¡ç®—12-15ç»´ç¯å¢ƒç‰¹å¾
  - æ‰€æœ‰Agentå…±äº«ï¼ˆåªè®¡ç®—ä¸€æ¬¡ï¼‰

- å®ç°Cç»´åº¦ï¼ˆç¾¤ä½“ç‰¹å¾ï¼‰è®¡ç®—
  - è®¡ç®—5ç»´ç¾¤ä½“ç‰¹å¾
  - æ‰€æœ‰Agentå…±äº«

- å®ç°Mç»´åº¦ï¼ˆäº¤äº’é˜»æŠ—ï¼‰æ‰¹é‡è®¡ç®—
  - ä½¿ç”¨EMAè®¡ç®—ç»Ÿè®¡ç‰¹å¾
  - æ‰¹é‡è®¡ç®—æ‰€æœ‰Agentçš„12ç»´Mç‰¹å¾

- å®ç°run_cycleæ–¹æ³•ï¼ˆå•å‘¨æœŸè¿è¡Œï¼‰
  1. è·å–å¸‚åœºæ•°æ®
  2. è®¡ç®—Eç‰¹å¾ï¼ˆå…¨å±€ï¼‰
  3. è®¡ç®—Cç‰¹å¾ï¼ˆå…¨å±€ï¼‰
  4. è®¡ç®—Mç‰¹å¾ï¼ˆæ‰¹é‡ï¼‰
  5. ä¸ºæ¯ä¸ªAgentåˆå¹¶ç‰¹å¾ï¼ˆE+I+M+Cï¼‰
  6. Agentè°ƒç”¨decideï¼ˆå†…éƒ¨ä½¿ç”¨DecisionEngineï¼‰
  7. æ‰§è¡Œäº¤æ˜“
  8. **æ£€æŸ¥ç³»ç»Ÿå¥åº·ï¼ˆç›‘æ§reserveï¼‰**

- å®ç°evaluate_agentsï¼ˆè®¡ç®—æ‰€æœ‰Agentçš„å‘¨æœŸROIï¼‰

- å®ç°evolve_population
  - è¯„ä¼°é€‚åº”åº¦ï¼ˆfitness = å‘¨æœŸROIï¼‰
  - é€‰æ‹©æ·˜æ±°å¯¹è±¡
  - é€‰æ‹©ç¹æ®–å¯¹è±¡
  - ç”Ÿæˆæ–°Agentï¼ˆå˜å¼‚ï¼‰
  - æ›´æ–°ç§ç¾¤

- å®ç°run_evolutionï¼ˆè¿è¡Œå¤šä»£ï¼‰

**å…³é”®ï¼š**
- æ€§èƒ½ä¼˜åŒ–ï¼šEå’ŒCåªè®¡ç®—ä¸€æ¬¡
- Mç»´åº¦æ‰¹é‡è®¡ç®—ï¼Œå¯å¹¶è¡Œ
- **ç©¿ä»“æŸå¤±ä»system_reserveæ‰£é™¤ï¼Œä¸å½±å“allocatable_capital**
- **æ­»äº¡Agentçš„å‰©ä½™èµ„é‡‘å›æ”¶åˆ°system_reserve**
- **ç¹æ®–æ—¶èµ„é‡‘åªåœ¨allocatable_capitalå†…åˆ†å‰²**
- æ¼”åŒ–å‹åŠ›ï¼šåªç”¨å‘¨æœŸROIï¼ˆfitness = capital_current / capital_at_last_resetï¼‰

**æµ‹è¯•è¦æ±‚ï¼š**
- éªŒè¯èµ„é‡‘å®ˆæ’ï¼ˆallocatable + reserve = totalï¼‰
- éªŒè¯ç©¿ä»“å¤„ç†æ­£ç¡®ï¼ˆä»reserveæ‰£é™¤ï¼‰
- éªŒè¯ç¹æ®–èµ„é‡‘åˆ†å‰²æ­£ç¡®
- éªŒè¯ç³»ç»Ÿå´©æºƒæ¡ä»¶ï¼ˆreserve < 0ï¼‰
- éªŒè¯ç¾¤ä½“ç‰¹å¾è®¡ç®—æ­£ç¡®
- éªŒè¯æ¼”åŒ–æµç¨‹å®Œæ•´
- éªŒè¯ç§ç¾¤æ›´æ–°æ­£ç¡®

---

## é˜¶æ®µ3ï¼šæµ‹è¯•éªŒè¯

### Task 3.1ï¼šå•å…ƒæµ‹è¯•
**æ–‡ä»¶ï¼š** `prometheus/v10/tests/test_*.py`

**è¦æ±‚ï¼š**
- test_features.py: æµ‹è¯•æ‰€æœ‰ç‰¹å¾è®¡ç®—ï¼ˆE/I/M/Cï¼‰
- test_network.py: æµ‹è¯•ç½‘ç»œå‰å‘ä¼ æ’­ã€å˜å¼‚
- test_genome.py: æµ‹è¯•åŸºå› å˜å¼‚ã€äº¤å‰ã€åºåˆ—åŒ–
- test_agent.py: æµ‹è¯•Agentçš„åŸºå› å®¹å™¨åŠŸèƒ½ã€ROIè®¡ç®—
- test_decision_engine.py: æµ‹è¯•å†³ç­–å¼•æ“çš„çº¯å‡½æ•°ç‰¹æ€§ã€çŠ¶æ€è½¬ç§»é€»è¾‘

**è¿è¡Œï¼š**
```bash
pytest prometheus/v10/tests/ -v
```

**æ ‡å‡†ï¼š**
- æ‰€æœ‰æµ‹è¯•é€šè¿‡
- è¦†ç›–ç‡ > 80%

---

### Task 3.2ï¼šå°è§„æ¨¡æ¼”åŒ–æµ‹è¯•
**æ–‡ä»¶ï¼š** `scripts/test_v10_evolution.py`

**è¦æ±‚ï¼š**
- é…ç½®ï¼š10ä¸ªAgentï¼Œ100ä¸ªå‘¨æœŸ
- è¿è¡Œå®Œæ•´æ¼”åŒ–æµç¨‹
- éªŒè¯èƒ½å¦æ”¶æ•›
- åˆ†æç»“æœï¼š
  - å¹³å‡ROIè¶‹åŠ¿
  - æœ€ä½³Agentç­–ç•¥
  - çŠ¶æ€è½¬ç§»é¢‘ç‡
  - **ç¾¤ä½“ç‰¹å¾å¦‚ä½•å½±å“å†³ç­–**

---

### Task 3.3ï¼šV9/V10å¯¹æ¯”æµ‹è¯•
**æ–‡ä»¶ï¼š** `scripts/compare_v9_v10.py`

**è¦æ±‚ï¼š**
- ç›¸åŒå¸‚åœºæ•°æ®
- ç›¸åŒæ¼”åŒ–å‚æ•°
- å¯¹æ¯”æŒ‡æ ‡ï¼š
  - å¹³å‡ROI
  - æœ€ä½³ROI
  - ç”Ÿå­˜ç‡
  - ç­–ç•¥å¤šæ ·æ€§
  - **ç¾¤ä½“åè°ƒæ€§ï¼ˆV10ç‹¬æœ‰ï¼‰**

---

## é˜¶æ®µ4ï¼šé…ç½®å’Œæ–‡æ¡£

### Task 4.1ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶
**æ–‡ä»¶ï¼š** `configs/v10/default.json`

**è¦æ±‚ï¼š**
- åŒ…å«æ‰€æœ‰æ¶æ„å‚æ•°
- åŒ…å«æ¼”åŒ–å‚æ•°
- åŒ…å«ç‰¹å¾è®¡ç®—å‚æ•°
- åŒ…å«ç¾¤ä½“æ„ŸçŸ¥å‚æ•°

---

### Task 4.2ï¼šç¼–å†™APIæ–‡æ¡£
**æ–‡ä»¶ï¼š** `docs/v10/API.md`

**è¦æ±‚ï¼š**
- æ‰€æœ‰å…¬å¼€ç±»çš„æ¥å£è¯´æ˜
- ç‰¹å¾ä½“ç³»è¯´æ˜ï¼ˆE/I/M/Cå››å…ƒç»„ï¼‰
- ä½¿ç”¨ç¤ºä¾‹
- é…ç½®å‚æ•°è¯´æ˜

---

### Task 4.3ï¼šç¼–å†™è¿ç§»æŒ‡å—
**æ–‡ä»¶ï¼š** `docs/v10/MIGRATION.md`

**è¦æ±‚ï¼š**
- V9åˆ°V10çš„å˜åŒ–è¯´æ˜
- æ•°æ®æ ¼å¼å˜åŒ–
- é…ç½®æ–‡ä»¶å˜åŒ–
- ä¸å…¼å®¹çš„åœ°æ–¹
- **é‡ç‚¹ï¼šç¾¤ä½“æ„ŸçŸ¥çš„å¼•å…¥**

---

## é˜¶æ®µ5ï¼šåˆå¹¶å’Œéƒ¨ç½²

### Task 5.1ï¼šä»£ç å®¡æŸ¥
- æ£€æŸ¥ä»£ç è§„èŒƒï¼ˆPEP8ï¼‰
- æ£€æŸ¥æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ£€æŸ¥æ— é—ç•™TODO/FIXME
- **é‡ç‚¹æ£€æŸ¥ç¾¤ä½“ç‰¹å¾è®¡ç®—çš„æ•ˆç‡**

### Task 5.2ï¼šåˆå¹¶åˆ°main
```bash
# æ‰€æœ‰æµ‹è¯•é€šè¿‡å
git checkout main
git merge feature/v10-state-machine
git push origin main

# æ‰“æ ‡ç­¾
git tag v10.0.0
git push origin v10.0.0
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### 1. åŠŸèƒ½å®Œæ•´æ€§
- âœ… å®ç°E/I/M/Cå››å…ƒç»„ç‰¹å¾ï¼ˆ32-36ç»´ï¼‰
- âœ… å®ç°åŒç½‘ç»œçŠ¶æ€æœº
- âœ… å®ç°éçº¿æ€§å†³ç­–
- âœ… å®ç°åŸºå› å˜å¼‚/äº¤å‰
- âœ… **äº¤äº’é˜»æŠ—ï¼ˆMç»´åº¦ï¼‰èƒ½å‡†ç¡®æµ‹é‡**
- âœ… **ç¾¤ä½“ç‰¹å¾ï¼ˆCç»´åº¦ï¼‰èƒ½æ­£ç¡®è®¡ç®—å’Œä¼ é€’**

### 2. è´¨é‡æ ‡å‡†
- âœ… æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- âœ… æµ‹è¯•è¦†ç›–ç‡ > 80%
- âœ… æ— æ˜æ˜¾æ€§èƒ½é—®é¢˜
- âœ… **äº¤äº’é˜»æŠ—æµ‹é‡å‡†ç¡®ä¸”é«˜æ•ˆ**
- âœ… **ç¾¤ä½“ç‰¹å¾è®¡ç®—é«˜æ•ˆï¼ˆä¸æˆä¸ºç“¶é¢ˆï¼‰**

### 3. æ¼”åŒ–éªŒè¯
- âœ… å°è§„æ¨¡æµ‹è¯•ï¼ˆ10ä¸ªä½“ï¼Œ100å‘¨æœŸï¼‰èƒ½æ”¶æ•›
- âœ… ROIä¼˜äºV9
- âœ… çŠ¶æ€è½¬ç§»é€»è¾‘æ­£å¸¸
- âœ… **èƒ½è§‚å¯Ÿåˆ°é˜»æŠ—è‡ªé€‚åº”è¡Œä¸ºï¼ˆèµ„é‡‘è§„æ¨¡åŒ¹é…ï¼‰**
- âœ… **èƒ½è§‚å¯Ÿåˆ°ç¾¤ä½“åè°ƒè¡Œä¸º**
- âœ… **èƒ½è§‚å¯Ÿåˆ°é£é™©è‡ªé€‚åº”è¡Œä¸ºï¼ˆæ æ†ç®¡ç†ï¼‰**

### 4. æ–‡æ¡£å®Œæ•´
- âœ… APIæ–‡æ¡£å®Œæ•´
- âœ… é…ç½®è¯´æ˜æ¸…æ™°
- âœ… è¿ç§»æŒ‡å—å¯ç”¨
- âœ… **E/I/M/Cå››å…ƒç»„ç†è®ºè¯´æ˜**
- âœ… **äº¤äº’é˜»æŠ—ç†è®ºæ–‡æ¡£å®Œæ•´**

---

## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹

### 1. E/I/M/Cå››å…ƒç»„å¿…é¡»åŒæ­¥å®ç°
**è¿™æ˜¯V10çš„ç†è®ºåŸºç¡€ï¼Œç¼ºä¸€ä¸å¯ï¼**
- ä¸èƒ½å…ˆåšE+Iï¼Œå†åŠ M+C
- ä¸èƒ½"Mç»´åº¦å¯é€‰"æˆ–"Cç»´åº¦å¯é€‰"
- å¿…é¡»ä»ä¸€å¼€å§‹å°±å®Œæ•´å®ç°
- **Mç»´åº¦ï¼ˆäº¤äº’é˜»æŠ—ï¼‰æ˜¯V10çš„æ ¸å¿ƒçªç ´**

### 2. äº¤äº’é˜»æŠ—æµ‹é‡çš„å‡†ç¡®æ€§ â­ æ ¸å¿ƒ
- Mç»´åº¦å¿…é¡»ä»å®é™…äº¤æ˜“æ‰§è¡Œä¸­æµ‹é‡ï¼Œä¸èƒ½ä¼°ç®—
- éœ€è¦è®°å½•æ¯æ¬¡äº¤æ˜“çš„è¯¦ç»†æ‰§è¡Œæ•°æ®
- æ»‘ç‚¹ã€å»¶è¿Ÿã€æˆäº¤ç‡ç­‰å¿…é¡»å‡†ç¡®
- **ç»Ÿè®¡ç‰¹å¾ï¼ˆM1,M2,M5,M6,M7ï¼‰å¿…é¡»ä½¿ç”¨æ»‘åŠ¨çª—å£æˆ–EMA**
  - æ¨èEMAï¼šalpha = 0.1-0.2
  - æ¨èæ»‘åŠ¨çª—å£ï¼šæœ€è¿‘5-10ç¬”äº¤æ˜“
  - ç›®çš„ï¼šé¿å…å¯¹å•æ¬¡äº¤æ˜“ï¼ˆè¿æ°”ï¼‰è¿‡æ‹Ÿåˆ
  - Agentæ„ŸçŸ¥çš„åº”è¯¥æ˜¯"è¶‹åŠ¿"ï¼Œä¸æ˜¯"å™ªå£°"
- **å®æ—¶ç‰¹å¾ï¼ˆM3,M4,M8-M12ï¼‰ä½¿ç”¨å½“å‰å€¼**
  - ç”¨äºå±æœºåˆ¤æ–­ï¼ˆliquidation_distanceå¿…é¡»ç«‹å³å“åº”ï¼‰
- è¿™æ˜¯Agentæ„ŸçŸ¥"èƒ½é‡æŸè€—"çš„å”¯ä¸€é€”å¾„

### 3. ç¾¤ä½“ç‰¹å¾è®¡ç®—çš„æ€§èƒ½
- æ¯ä¸ªå‘¨æœŸè¦è®¡ç®—5ä¸ªç¾¤ä½“ç‰¹å¾
- æ¯ä¸ªAgentå†³ç­–æ—¶éƒ½è¦ç”¨åˆ°
- éœ€è¦é«˜æ•ˆçš„å®ç°æ–¹å¼
- è€ƒè™‘ç¼“å­˜ç­–ç•¥

### 4. ç¾¤ä½“ç‰¹å¾çš„éš”ç¦»æ€§
- Agentçœ‹åˆ°çš„æ˜¯ç»Ÿè®¡å€¼ï¼Œä¸æ˜¯ä¸ªä½“ç»†èŠ‚
- ä¸èƒ½è®©æŸä¸ªAgent"çœ‹åˆ°"ç‰¹å®šAgentçš„ç­–ç•¥
- ä¿æŒå¸‚åœºçš„"ç›²æ‰“"ç‰¹æ€§

### 5. çŠ¶æ€æœºçš„æ­£ç¡®æ€§
- çŠ¶æ€è½¬ç§»å¿…é¡»ç¬¦åˆé€»è¾‘
- ä¸èƒ½å‡ºç°"æœ‰æŒä»“ä½†çŠ¶æ€æ˜¯OUT_MARKET"
- ä¸èƒ½å‡ºç°"æ— æŒä»“ä½†çŠ¶æ€æ˜¯IN_MARKET"
- **çŠ¶æ€æœºé€»è¾‘é›†æˆåœ¨DecisionEngineä¸­ï¼Œä¸æ˜¯ç‹¬ç«‹ç±»**

### 6. æµ‹è¯•çš„å®Œæ•´æ€§
- æ¯ä¸ªç»„ä»¶éƒ½è¦æµ‹è¯•
- **ç‰¹åˆ«æ˜¯DecisionEngineçš„çº¯å‡½æ•°ç‰¹æ€§ï¼ˆæ ¸å¿ƒï¼‰**
- **ç‰¹åˆ«æ˜¯äº¤äº’é˜»æŠ—æµ‹é‡ï¼ˆMç»´åº¦ï¼Œæ ¸å¿ƒçªç ´ï¼‰**
- ç‰¹åˆ«æ˜¯ç¾¤ä½“ç‰¹å¾è®¡ç®—ï¼ˆCç»´åº¦ï¼‰
- è¦æœ‰é›†æˆæµ‹è¯•éªŒè¯E/I/M/CååŒå·¥ä½œ

### 7. æ¶æ„åŸåˆ™
- **Agent = åŸºå› å®¹å™¨ï¼Œä¸åŒ…å«å†³ç­–é€»è¾‘**
- **DecisionEngine = çº¯å‡½æ•°ï¼ŒåŸºå› è¡¨è¾¾è§„åˆ™**
- SystemManager = å…¨å±€åè°ƒï¼Œç‰¹å¾è®¡ç®—
- å†³ç­– = function(åŸºå› , ç¯å¢ƒ)ï¼Œä¸æ˜¯Agentçš„"æ„å¿—"

---

## ğŸ“ åé¦ˆæœºåˆ¶

å®Œæˆæ¯ä¸ªTaskåï¼Œè¯·æŠ¥å‘Šï¼š
- âœ… Taskç¼–å·å’Œåç§°
- ğŸ“Š æµ‹è¯•ç»“æœï¼ˆé€šè¿‡/å¤±è´¥/è¦†ç›–ç‡ï¼‰
- âš ï¸ é‡åˆ°çš„é—®é¢˜
- ğŸ’¡ éœ€è¦è®¨è®ºçš„è®¾è®¡é—®é¢˜

**å®Œæˆåæäº¤ç»™æ¶æ„å¸ˆAIéªŒè¯ï¼**

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- `docs/v10/V10_DESIGN.md` - V10è®¾è®¡æ–‡æ¡£
  - **Â§ ç†è®ºåŸºç¡€** - ä¸ºä»€ä¹ˆ32-36ç»´è¶³å¤Ÿï¼ˆå¿…è¯»ï¼‰
  - Â§ æ ¸å¿ƒæ´å¯Ÿ - V9çš„é—®é¢˜ä¸V10çš„çªç ´
  - Â§ ç‰¹å¾è®¾è®¡ - E/I/M/Cå››å…ƒç»„è¯¦è§£
  - Â§ DecisionEngineæ¶æ„ - çº¯å‡½æ•°å†³ç­–å¼•æ“
- `docs/v9/METHODOLOGY.md` - V9ç‰¹å¾ä½“ç³»
- `journal/philosophy/THE_GOD_CODE.md` - å“²å­¦æ€è€ƒ

---

**æœ€åæ›´æ–°ï¼š2024-12-19**
**çŠ¶æ€ï¼šå¾…å¼€å‘**
**ç†è®ºåŸºç¡€ï¼šåœ¨ç‰¹å®šç¯å¢ƒä¸‹ï¼Œæ— é™æœªçŸ¥çš„æ±‚å’Œå¯èƒ½æ˜¯æœ‰é™çš„**
**æ ¸å¿ƒçªç ´ï¼šE/I/M/Cå››å…ƒç»„ + äº¤äº’é˜»æŠ—ç†è®ºï¼ˆMç»´åº¦ï¼‰**

