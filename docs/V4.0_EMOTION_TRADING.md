# æƒ…ç»ªå½±å“äº¤æ˜“å†³ç­–æœºåˆ¶ - Prometheus v4.0

## æ¦‚è¿°

åœ¨ v4.0 ä¸­ï¼ŒAgent ä¸ä»…æ‹¥æœ‰ç†æ€§çš„åŸºå› å‚æ•°ï¼Œè¿˜æœ‰æƒ…ç»ªçŠ¶æ€ã€‚æƒ…ç»ªä¼šå®æ—¶å½±å“äº¤æ˜“å†³ç­–ï¼Œä½¿ Agent çš„è¡Œä¸ºæ›´æ¥è¿‘çœŸå®äº¤æ˜“è€…ã€‚

---

## æƒ…ç»ªç»´åº¦

### 1. ç»æœ›å€¼ (Despair) - 0åˆ°1
**å®šä¹‰**ï¼šAgent å¯¹è‡ªèº«ç”Ÿå­˜çŠ¶å†µçš„æ‚²è§‚ç¨‹åº¦

**è§¦å‘å› ç´ **ï¼š
- èµ„é‡‘ä¸¥é‡äºæŸ
- è¿ç»­äºæŸæ¬¡æ•°
- é•¿æœŸè¡¨ç°ä¸ä½³

**å¯¹äº¤æ˜“çš„å½±å“**ï¼š
```python
ç»æœ›å€¼ â†’ é™ä½ä»“ä½
ç»æœ›å€¼ â†’ æé«˜æ­¢æŸæ•æ„Ÿåº¦
ç»æœ›å€¼ â†’ é™ä½äº¤æ˜“é¢‘ç‡
ç»æœ›å€¼ > 0.8 â†’ è§¦å‘è‡ªæ€è¯„ä¼°
```

### 2. ææƒ§å€¼ (Fear) - 0åˆ°1
**å®šä¹‰**ï¼šAgent å¯¹å¸‚åœºé£é™©çš„æ•æ„Ÿç¨‹åº¦

**è§¦å‘å› ç´ **ï¼š
- è¿‘æœŸäºæŸ
- å¸‚åœºå‰§çƒˆæ³¢åŠ¨
- æŒä»“æµ®äº

**å¯¹äº¤æ˜“çš„å½±å“**ï¼š
```python
ææƒ§å€¼ â†’ æå‰æ­¢æŸ
ææƒ§å€¼ â†’ é™ä½å¼€ä»“é˜ˆå€¼
ææƒ§å€¼ â†’ å‡å°‘æŒä»“æ—¶é—´
ææƒ§å€¼ > 0.7 â†’ åªåšä¿å®ˆäº¤æ˜“
```

### 3. ä¿¡å¿ƒå€¼ (Confidence) - 0åˆ°1
**å®šä¹‰**ï¼šAgent å¯¹è‡ªèº«ç­–ç•¥çš„ä¿¡å¿ƒ

**è§¦å‘å› ç´ **ï¼š
- è¿ç»­ç›ˆåˆ©
- èµ„é‡‘å¢é•¿
- èƒœç‡æå‡

**å¯¹äº¤æ˜“çš„å½±å“**ï¼š
```python
ä¿¡å¿ƒå€¼ â†’ å¢åŠ ä»“ä½
ä¿¡å¿ƒå€¼ â†’ æ”¾å®½æ­¢ç›ˆç›®æ ‡
ä¿¡å¿ƒå€¼ â†’ æé«˜äº¤æ˜“é¢‘ç‡
ä¿¡å¿ƒå€¼ > 0.8 â†’ å¯èƒ½è¿‡åº¦äº¤æ˜“ï¼ˆéœ€è­¦æƒ•ï¼‰
```

### 4. å‹åŠ›å€¼ (Stress) - 0åˆ°1
**å®šä¹‰**ï¼šAgent æ‰¿å—çš„å¿ƒç†å‹åŠ›

**è§¦å‘å› ç´ **ï¼š
- ç»æœ›å€¼å’Œææƒ§å€¼çš„ç»¼åˆ
- ç¯å¢ƒå‹åŠ›æŒ‡æ ‡
- ç¾¤ä½“è¡¨ç°å¯¹æ¯”

**å¯¹äº¤æ˜“çš„å½±å“**ï¼š
```python
å‹åŠ›å€¼ â†’ å½±å“å†³ç­–è´¨é‡
å‹åŠ›å€¼ â†’ å¢åŠ æ“ä½œå¤±è¯¯æ¦‚ç‡
å‹åŠ›å€¼ > 0.7 â†’ æš‚åœäº¤æ˜“ï¼ˆå†·é™æœŸï¼‰
```

---

## æƒ…ç»ªè®¡ç®—å…¬å¼

### åŸºç¡€æƒ…ç»ªæ›´æ–°
```python
def update_emotional_state(agent):
    capital_ratio = agent.current_capital / agent.initial_capital
    
    # 1. ç»æœ›å€¼
    if capital_ratio < 0.5:
        despair_base = (0.5 - capital_ratio) * 2
    else:
        despair_base = 0
    
    despair = min(
        despair_base + 
        agent.consecutive_losses * 0.05 +
        (1 - agent.win_rate) * 0.3,
        1.0
    )
    
    # 2. ä¿¡å¿ƒå€¼
    if capital_ratio > 1.0:
        confidence = min((capital_ratio - 1.0) * 2 + 0.5, 1.0)
    else:
        confidence = capital_ratio * 0.5
    
    # 3. ææƒ§å€¼
    fear = despair * 0.8 + (1 - confidence) * 0.2
    
    # 4. å‹åŠ›å€¼
    stress = (despair + fear) / 2
    
    return despair, confidence, fear, stress
```

---

## æƒ…ç»ªå¯¹äº¤æ˜“å‚æ•°çš„å½±å“

### 1. ä»“ä½è°ƒæ•´
```python
def adjust_position_size(base_size, emotion, personality):
    """
    æ ¹æ®æƒ…ç»ªè°ƒæ•´ä»“ä½å¤§å°
    """
    size = base_size
    
    # ä¿¡å¿ƒå¢åŠ ä»“ä½
    if emotion.confidence > 0.7:
        size *= (1 + (emotion.confidence - 0.7) * personality.aggression)
    
    # ææƒ§å’Œç»æœ›é™ä½ä»“ä½
    if emotion.fear > 0.5:
        size *= (1 - (emotion.fear - 0.5) * 0.5)
    
    if emotion.despair > 0.5:
        size *= (1 - (emotion.despair - 0.5) * 0.8)
    
    # å‹åŠ›é™ä½ä»“ä½
    if emotion.stress > 0.6:
        size *= (1 - (emotion.stress - 0.6))
    
    return max(size, 0.01)  # æœ€å°ä»“ä½1%
```

### 2. æ­¢æŸæ­¢ç›ˆè°ƒæ•´
```python
def adjust_stop_loss(base_stop_loss, emotion, personality):
    """
    æ ¹æ®æƒ…ç»ªè°ƒæ•´æ­¢æŸ
    """
    stop_loss = base_stop_loss
    
    # ææƒ§æ”¶ç´§æ­¢æŸ
    if emotion.fear > 0.5:
        stop_loss *= (1 - (emotion.fear - 0.5) * 0.5)
    
    # ç»æœ›æ”¶ç´§æ­¢æŸ
    if emotion.despair > 0.6:
        stop_loss *= (1 - (emotion.despair - 0.6) * 0.3)
    
    # ä½†ä¸èƒ½å¤ªç´§ï¼ˆæœ€å°1%ï¼‰
    return max(stop_loss, 0.01)

def adjust_take_profit(base_take_profit, emotion, personality):
    """
    æ ¹æ®æƒ…ç»ªè°ƒæ•´æ­¢ç›ˆ
    """
    take_profit = base_take_profit
    
    # é«˜ä¿¡å¿ƒæ”¾å®½æ­¢ç›ˆï¼ˆè®©åˆ©æ¶¦å¥”è·‘ï¼‰
    if emotion.confidence > 0.8:
        take_profit *= (1 + (emotion.confidence - 0.8) * personality.greed_level)
    
    # ææƒ§æ”¶ç´§æ­¢ç›ˆï¼ˆè½è¢‹ä¸ºå®‰ï¼‰
    if emotion.fear > 0.6:
        take_profit *= (1 - (emotion.fear - 0.6) * 0.5)
    
    return take_profit
```

### 3. äº¤æ˜“é¢‘ç‡è°ƒæ•´
```python
def should_trade(signal_strength, emotion, personality):
    """
    æ ¹æ®æƒ…ç»ªå†³å®šæ˜¯å¦äº¤æ˜“
    """
    # åŸºç¡€é˜ˆå€¼
    threshold = 0.7
    
    # é«˜å‹åŠ›æé«˜é˜ˆå€¼ï¼ˆæ›´è°¨æ…ï¼‰
    if emotion.stress > 0.7:
        threshold += (emotion.stress - 0.7) * 0.5
    
    # é«˜ä¿¡å¿ƒé™ä½é˜ˆå€¼ï¼ˆæ›´ç§¯æï¼‰
    if emotion.confidence > 0.7:
        threshold -= (emotion.confidence - 0.7) * 0.3 * personality.aggression
    
    # é«˜ç»æœ›æš‚åœäº¤æ˜“
    if emotion.despair > 0.75:
        return False
    
    return signal_strength > threshold
```

---

## æƒ…ç»ªä¸æ€§æ ¼çš„äº¤äº’

ä¸åŒæ€§æ ¼çš„ Agent å¯¹åŒæ ·çš„æƒ…ç»ªååº”ä¸åŒï¼š

### æ¿€è¿›å‹ (High Aggression)
```python
æƒ…ç»ªå½±å“ç³»æ•° * 0.7  # æƒ…ç»ªå½±å“è¾ƒå°
é«˜ä¿¡å¿ƒæ—¶ä»“ä½æ”¾å¤§ * 1.5  # æ›´æ¿€è¿›
```

### ä¿å®ˆå‹ (Low Risk Tolerance)
```python
ææƒ§å½±å“ç³»æ•° * 1.3  # å¯¹ææƒ§æ›´æ•æ„Ÿ
ç»æœ›æ—¶æ›´å¿«è§¦å‘è‡ªæ€
```

### é«˜çºªå¾‹æ€§ (High Discipline)
```python
æƒ…ç»ªå½±å“ç³»æ•° * 0.5  # èƒ½æ§åˆ¶æƒ…ç»ª
ä¸¥æ ¼æ‰§è¡Œæ­¢æŸæ­¢ç›ˆï¼Œä¸å› æƒ…ç»ªæ”¹å˜
```

### ä¹è§‚å‹ (High Optimism)
```python
ç»æœ›å€¼å¢é•¿é€Ÿåº¦ * 0.7  # ä¸å®¹æ˜“ç»æœ›
ä»äºæŸä¸­æ¢å¤æ›´å¿«
```

---

## æç«¯æƒ…ç»ªçŠ¶æ€

### 1. éº»æœ¨çŠ¶æ€ (Numb)
**è§¦å‘**ï¼šé•¿æœŸé«˜å‹åŠ› (stress > 0.8 æŒç»­ > 7å¤©)

**è¡¨ç°**ï¼š
- åœæ­¢äº¤æ˜“
- æƒ…ç»ªæ³¢åŠ¨å‡å°
- éœ€è¦"ä¼‘æ¯æœŸ"æ‰èƒ½æ¢å¤

### 2. äº¢å¥‹çŠ¶æ€ (Euphoria)  
**è§¦å‘**ï¼šè¿ç»­å¤§å¹…ç›ˆåˆ© (è¿ç»­5æ¬¡ç›ˆåˆ© > 10%)

**è¡¨ç°**ï¼š
- è¿‡åº¦è‡ªä¿¡
- å¿½è§†é£é™©
- ä»“ä½è¿‡å¤§
- **å±é™©ä¿¡å·**ï¼šå®¹æ˜“å¯¼è‡´å¤§äº

### 3. ææ…ŒçŠ¶æ€ (Panic)
**è§¦å‘**ï¼šå•æ—¥å·¨é¢äºæŸ (> 20%)

**è¡¨ç°**ï¼š
- ç«‹å³å¹³æ‰æ‰€æœ‰ä»“ä½
- æš‚åœäº¤æ˜“24å°æ—¶
- é‡æ–°è¯„ä¼°ç­–ç•¥

---

## æƒ…ç»ªæ¢å¤æœºåˆ¶

æƒ…ç»ªä¸æ˜¯æ°¸ä¹…çš„ï¼Œä¼šéšæ—¶é—´æ¢å¤ï¼š

```python
def emotional_recovery(agent, time_elapsed_hours):
    """
    æƒ…ç»ªéšæ—¶é—´æ¢å¤
    """
    recovery_rate = agent.personality.adaptability * 0.1
    
    # ç»æœ›å€¼è¡°å‡
    agent.emotion.despair *= (1 - recovery_rate * time_elapsed_hours / 24)
    
    # ææƒ§å€¼è¡°å‡
    agent.emotion.fear *= (1 - recovery_rate * time_elapsed_hours / 24)
    
    # å‹åŠ›å€¼è¡°å‡
    agent.emotion.stress *= (1 - recovery_rate * time_elapsed_hours / 24)
    
    # ä¿¡å¿ƒå€¼ç¼“æ…¢å›å½’ä¸­å€¼
    agent.emotion.confidence += (0.5 - agent.emotion.confidence) * 0.05
```

---

## å®ç°å»ºè®®

### 1. æƒ…ç»ªæƒé‡é…ç½®
```python
EMOTION_WEIGHTS = {
    'position_size': {
        'confidence': 0.3,
        'fear': -0.4,
        'despair': -0.5,
        'stress': -0.2
    },
    'stop_loss': {
        'fear': -0.5,
        'despair': -0.3
    },
    'take_profit': {
        'confidence': 0.4,
        'fear': -0.3,
        'greed': 0.2
    }
}
```

### 2. å¹³è¡¡ç†æ€§ä¸æƒ…ç»ª
```python
final_decision = (
    rational_decision * (1 - emotion_influence) +
    emotional_decision * emotion_influence
)

# emotion_influence ç”±æ€§æ ¼å†³å®š
emotion_influence = 1 - agent.personality.discipline
```

### 3. æƒ…ç»ªæ—¥å¿—
è®°å½•æ¯æ¬¡äº¤æ˜“æ—¶çš„æƒ…ç»ªçŠ¶æ€ï¼Œç”¨äºï¼š
- äº‹ååˆ†æ
- ä¼˜åŒ–æƒ…ç»ªå‚æ•°
- è¯†åˆ«æƒ…ç»ªæ¨¡å¼

---

## æµ‹è¯•åœºæ™¯

### åœºæ™¯1ï¼šè¿ç»­äºæŸ
```
åˆå§‹èµ„æœ¬: $10,000
Day 1: -5% â†’ despair: 0.1, fear: 0.2
Day 2: -5% â†’ despair: 0.3, fear: 0.4
Day 3: -5% â†’ despair: 0.5, fear: 0.6
Day 4: -5% â†’ despair: 0.7, fear: 0.8 â†’ æš‚åœäº¤æ˜“
```

### åœºæ™¯2ï¼šè¿ç»­ç›ˆåˆ©
```
åˆå§‹èµ„æœ¬: $10,000
Day 1: +10% â†’ confidence: 0.7
Day 2: +10% â†’ confidence: 0.85
Day 3: +10% â†’ confidence: 0.95 â†’ è­¦å‘Šï¼šè¿‡åº¦è‡ªä¿¡
Day 4: +15% â†’ confidence: 1.0 â†’ è§¦å‘é£æ§ï¼šé™ä½ä»“ä½
```

### åœºæ™¯3ï¼šå¤§å¹…å›æ’¤åæ¢å¤
```
èµ„æœ¬: $10,000 â†’ $5,000 â†’ despair: 0.8, fear: 0.9
è§¦å‘æ‹¼æ­»ä¸€æ...
æˆåŠŸæ¢å¤è‡³ $7,000 â†’ despair: 0.4, confidence: 0.6
ç»§ç»­æ¢å¤è‡³ $9,000 â†’ despair: 0.1, confidence: 0.8
```

---

## æ€»ç»“

æƒ…ç»ªç³»ç»Ÿè®© Agent çš„è¡Œä¸ºæ›´åŠ çœŸå®å’Œå¤æ‚ï¼š

âœ… **ä¼˜ç‚¹**ï¼š
- æ¨¡æ‹ŸçœŸå®äº¤æ˜“å¿ƒç†
- å¢åŠ ç³»ç»Ÿå¤šæ ·æ€§
- è‡ªåŠ¨é£é™©æ§åˆ¶

âš ï¸ **æŒ‘æˆ˜**ï¼š
- éœ€è¦ä»”ç»†è°ƒå‚
- å¯èƒ½è¿‡åº¦ä¿å®ˆ
- å¢åŠ ç³»ç»Ÿå¤æ‚åº¦

ğŸ¯ **å…³é”®**ï¼šæ‰¾åˆ°ç†æ€§ä¸æƒ…ç»ªçš„å¹³è¡¡ç‚¹

---

æœ€åæ›´æ–°ï¼š2025å¹´12æœˆ1æ—¥

