# Prometheus v4.0 - Agentäº¤æ˜“æƒé™è®¾è®¡

## æ ¸å¿ƒé—®é¢˜

åœ¨OKXè¿™æ ·çš„äº¤æ˜“æ‰€ï¼ŒAgentåº”è¯¥ï¼š
1. **å®Œå…¨è‡ªç”±**ï¼šå¯ä»¥é€‰æ‹©ä»»ä½•äº¤æ˜“å“ç§ã€ä»»æ„æ æ†ï¼Ÿ
2. **è®¾å®šé™åˆ¶**ï¼šé™åˆ¶å“ç§ã€æ æ†å€æ•°ç­‰ï¼Ÿ
3. **åˆ†çº§æˆæƒ**ï¼šæ ¹æ®Agentè¡¨ç°é€æ­¥å¼€æ”¾ï¼Ÿ

---

## ä¸€ã€OKXäº¤æ˜“å“ç§åˆ†æ

### å¯ç”¨äº¤æ˜“ç±»å‹

```
1. ç°è´§äº¤æ˜“ï¼ˆSpotï¼‰
   - é£é™©ï¼šä½ï¼ˆæœ€å¤šäºå®Œæœ¬é‡‘ï¼‰
   - æ æ†ï¼šæ— æˆ–ä½æ æ†ï¼ˆ1x-3xï¼‰
   - é€‚åˆï¼šæ–°æ‰‹Agentã€ä¿å®ˆç­–ç•¥

2. æ æ†äº¤æ˜“ï¼ˆMarginï¼‰
   - é£é™©ï¼šä¸­ï¼ˆå¯èƒ½çˆ†ä»“ï¼‰
   - æ æ†ï¼š3x-10x
   - é€‚åˆï¼šä¸­ç­‰é£é™©æ‰¿å—èƒ½åŠ›

3. æ°¸ç»­åˆçº¦ï¼ˆPerpetual Swapï¼‰
   - é£é™©ï¼šé«˜ï¼ˆææ˜“çˆ†ä»“ï¼‰
   - æ æ†ï¼š1x-125x
   - é€‚åˆï¼šæ¿€è¿›Agentã€çŸ­çº¿ç­–ç•¥

4. äº¤å‰²åˆçº¦ï¼ˆFuturesï¼‰
   - é£é™©ï¼šé«˜
   - æ æ†ï¼š1x-125x
   - é€‚åˆï¼šæœ‰æ˜ç¡®äº¤å‰²ç­–ç•¥çš„Agent

5. æœŸæƒï¼ˆOptionsï¼‰
   - é£é™©ï¼šå¤æ‚ï¼ˆä¹°æ–¹æœ‰é™ï¼Œå–æ–¹æ— é™ï¼‰
   - æ æ†ï¼šéšå«æ æ†é«˜
   - é€‚åˆï¼šé«˜çº§ç­–ç•¥Agent
```

### é£é™©å¯¹æ¯”

```
é£é™©ç­‰çº§ï¼š
ç°è´§ < æ æ†äº¤æ˜“ < åˆçº¦ < æœŸæƒå–æ–¹

çˆ†ä»“é£é™©ï¼š
ç°è´§ï¼š0%
æ æ†3xï¼šä¸­
åˆçº¦10xï¼šé«˜
åˆçº¦125xï¼šæé«˜ï¼ˆå¸‚åœºæ³¢åŠ¨1%å³çˆ†ä»“ï¼‰
```

---

## äºŒã€ä¸‰ç§æƒé™æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ1ï¼šå®Œå…¨è‡ªç”±ï¼ˆçº¯è‡ªç„¶é€‰æ‹©ï¼‰

```python
class AgentV4:
    def __init__(self):
        # Agentå¯ä»¥è‡ªç”±é€‰æ‹©
        self.allowed_products = [
            'SPOT',           # ç°è´§
            'MARGIN',         # æ æ†
            'PERPETUAL',      # æ°¸ç»­
            'FUTURES',        # äº¤å‰²
            'OPTIONS'         # æœŸæƒ
        ]
        
        self.max_leverage = 125  # æœ€é«˜æ æ†
        
        # ç”±åŸºå› å†³å®šåå¥½
        self.gene = {
            'product_preference': random.choice(self.allowed_products),
            'leverage': random.uniform(1, 125)
        }
```

**ä¼˜ç‚¹ï¼š**
- âœ… çœŸæ­£çš„è‡ªç„¶é€‰æ‹©
- âœ… å¯èƒ½å‘ç°æ„æƒ³ä¸åˆ°çš„ç­–ç•¥
- âœ… æœ€å¤§åŒ–ç­–ç•¥å¤šæ ·æ€§

**ç¼ºç‚¹ï¼š**
- âŒ ç»å¤§å¤šæ•°Agentä¼šå¿«é€Ÿæ­»äº¡ï¼ˆé«˜æ æ†çˆ†ä»“ï¼‰
- âŒ èµ„é‡‘æ± å¿«é€Ÿè€—å°½
- âŒ éš¾ä»¥ç§¯ç´¯æœ‰æ•ˆç»éªŒï¼ˆæ­»å¤ªå¿«ï¼‰
- âŒ æœŸæƒç­‰å¤æ‚å“ç§éœ€è¦é«˜çº§çŸ¥è¯†

**ç»“æœé¢„æµ‹ï¼š**
```
ç¬¬ä¸€ä»£ï¼š100ä¸ªAgent
â”œâ”€ 70ä¸ªé€‰æ‹©é«˜æ æ†åˆçº¦ â†’ 24å°æ—¶å†…çˆ†ä»“
â”œâ”€ 20ä¸ªé€‰æ‹©ç°è´§/ä½æ æ† â†’ ç¼“æ…¢äºæŸ
â””â”€ 10ä¸ªä¾¥å¹¸å­˜æ´» â†’ ä½†å¤šæ˜¯è¿æ°”

é—®é¢˜ï¼šæ­»äº¡ç‡å¤ªé«˜ï¼Œéš¾ä»¥è¿›åŒ–
```

---

### æ–¹æ¡ˆ2ï¼šä¸¥æ ¼é™åˆ¶ï¼ˆä¿å®ˆå®‰å…¨ï¼‰

```python
class AgentV4:
    def __init__(self):
        # ä¸¥æ ¼é™åˆ¶
        self.allowed_products = ['SPOT']  # ä»…ç°è´§
        self.max_leverage = 1             # æ— æ æ†
        
        # æˆ–ç¨å¾®å®½æ¾ï¼š
        self.allowed_products = ['SPOT', 'MARGIN']
        self.max_leverage = 3  # æœ€å¤š3å€
```

**ä¼˜ç‚¹ï¼š**
- âœ… é£é™©å¯æ§
- âœ… Agentå­˜æ´»æ—¶é—´é•¿ï¼Œæœ‰æ—¶é—´å­¦ä¹ 
- âœ… èµ„é‡‘æ± æ¶ˆè€—æ…¢
- âœ… é€‚åˆåˆæœŸæµ‹è¯•

**ç¼ºç‚¹ï¼š**
- âŒ æ”¶ç›Šæ½œåŠ›æœ‰é™
- âŒ æ— æ³•æ¢ç´¢é«˜æ æ†ç­–ç•¥
- âŒ ç­–ç•¥ç©ºé—´å—é™
- âŒ å¯èƒ½é”™è¿‡æŸäº›æœ‰æ•ˆç­–ç•¥

**ç»“æœé¢„æµ‹ï¼š**
```
ç¬¬ä¸€ä»£ï¼š100ä¸ªAgent
â”œâ”€ å­˜æ´»ç‡é«˜ï¼ˆ80%+ï¼‰
â”œâ”€ ä½†æ”¶ç›Šå¹³åº¸
â””â”€ è¿›åŒ–ç¼“æ…¢ï¼ˆé€‰æ‹©å‹åŠ›ä¸è¶³ï¼‰

é—®é¢˜ï¼šå¤ªä¿å®ˆï¼Œç¼ºä¹ç«äº‰
```

---

### æ–¹æ¡ˆ3ï¼šåˆ†çº§æˆæƒï¼ˆæ¨èâ­ï¼‰

```python
class TradingPermissionSystem:
    """
    äº¤æ˜“æƒé™ç³»ç»Ÿ
    
    Agentæ ¹æ®è¡¨ç°é€æ­¥è·å¾—æ›´é«˜æƒé™
    """
    
    def __init__(self):
        self.permission_levels = {
            'NOVICE': {         # æ–°æ‰‹çº§
                'products': ['SPOT'],
                'max_leverage': 1,
                'max_position': 0.1,  # æœ€å¤š10%ä»“ä½
                'description': 'ç°è´§äº¤æ˜“ï¼Œæ— æ æ†'
            },
            
            'INTERMEDIATE': {   # ä¸­çº§
                'products': ['SPOT', 'MARGIN'],
                'max_leverage': 3,
                'max_position': 0.2,
                'description': 'ç°è´§+ä½æ æ†'
            },
            
            'ADVANCED': {       # é«˜çº§
                'products': ['SPOT', 'MARGIN', 'PERPETUAL'],
                'max_leverage': 10,
                'max_position': 0.3,
                'description': 'å«æ°¸ç»­åˆçº¦ï¼Œä¸­ç­‰æ æ†'
            },
            
            'EXPERT': {         # ä¸“å®¶çº§
                'products': ['SPOT', 'MARGIN', 'PERPETUAL', 'FUTURES'],
                'max_leverage': 20,
                'max_position': 0.5,
                'description': 'å…¨å“ç§ï¼Œé«˜æ æ†'
            },
            
            'MASTER': {         # å¤§å¸ˆçº§
                'products': ['SPOT', 'MARGIN', 'PERPETUAL', 'FUTURES', 'OPTIONS'],
                'max_leverage': 50,  # ä»é™åˆ¶ï¼Œä¸å¼€æ”¾125x
                'max_position': 0.7,
                'description': 'å…¨å“ç§å«æœŸæƒ'
            }
        }
    
    def get_agent_permission_level(self, agent_stats: Dict) -> str:
        """
        æ ¹æ®Agentè¡¨ç°å†³å®šæƒé™ç­‰çº§
        
        è€ƒè™‘å› ç´ ï¼š
        1. å­˜æ´»å¤©æ•°
        2. ç›ˆåˆ©èƒ½åŠ›
        3. é£é™©æ§åˆ¶èƒ½åŠ›
        4. äº¤æ˜“è´¨é‡
        """
        # æ–°ç”ŸAgent
        if agent_stats['days_alive'] < 7:
            return 'NOVICE'
        
        # è®¡ç®—ç»¼åˆåˆ†æ•°
        score = 0
        
        # 1. å­˜æ´»æ—¶é—´ï¼ˆæœ€é«˜30åˆ†ï¼‰
        days_alive = min(agent_stats['days_alive'], 30)
        score += days_alive
        
        # 2. ç›ˆåˆ©èƒ½åŠ›ï¼ˆæœ€é«˜40åˆ†ï¼‰
        total_return = agent_stats['total_pnl'] / agent_stats['initial_capital']
        if total_return > 0.5:
            score += 40
        elif total_return > 0.2:
            score += 30
        elif total_return > 0.1:
            score += 20
        elif total_return > 0:
            score += 10
        
        # 3. èƒœç‡ï¼ˆæœ€é«˜20åˆ†ï¼‰
        win_rate = agent_stats['win_rate']
        if win_rate > 0.6:
            score += 20
        elif win_rate > 0.5:
            score += 15
        elif win_rate > 0.4:
            score += 10
        
        # 4. æœ€å¤§å›æ’¤æ§åˆ¶ï¼ˆæœ€é«˜10åˆ†ï¼‰
        max_drawdown = agent_stats.get('max_drawdown', 1.0)
        if max_drawdown < 0.1:
            score += 10
        elif max_drawdown < 0.2:
            score += 5
        
        # æ ¹æ®åˆ†æ•°åˆ†çº§
        if score >= 80:
            return 'MASTER'
        elif score >= 60:
            return 'EXPERT'
        elif score >= 40:
            return 'ADVANCED'
        elif score >= 20:
            return 'INTERMEDIATE'
        else:
            return 'NOVICE'
    
    def can_use_product(self, agent_level: str, product: str) -> bool:
        """æ£€æŸ¥Agentæ˜¯å¦å¯ä»¥ä½¿ç”¨æŸä¸ªäº¤æ˜“å“ç§"""
        allowed_products = self.permission_levels[agent_level]['products']
        return product in allowed_products
    
    def get_max_leverage(self, agent_level: str) -> int:
        """è·å–Agentå…è®¸çš„æœ€å¤§æ æ†"""
        return self.permission_levels[agent_level]['max_leverage']
```

**ä¼˜ç‚¹ï¼š**
- âœ… æ–°Agentå—ä¿æŠ¤ï¼Œä¸ä¼šç«‹å³çˆ†ä»“
- âœ… ä¼˜ç§€Agentè·å¾—æ›´å¤šè‡ªç”±åº¦
- âœ… å½¢æˆæ­£å‘æ¿€åŠ±ï¼ˆåšå¥½äº†æ‰èƒ½ç©é«˜çº§å“ç§ï¼‰
- âœ… é£é™©é€’è¿›ï¼Œå…è®¸å­¦ä¹ 
- âœ… æ¨¡æ‹ŸçœŸå®äº¤æ˜“æ‰€çš„é£é™©ç®¡ç†

**ç¼ºç‚¹ï¼š**
- âš ï¸ éœ€è¦é¢å¤–çš„æƒé™ç®¡ç†ä»£ç 
- âš ï¸ å¯èƒ½é”™è¿‡"å¤©ç”Ÿé«˜æ æ†é«˜æ‰‹"

**ç»“æœé¢„æµ‹ï¼š**
```
ç¬¬ä¸€ä»£ï¼š100ä¸ªAgentï¼ˆå…¨éƒ¨NOVICEï¼‰
â”œâ”€ 30ä¸ªå¿«é€Ÿæ·˜æ±° â†’ ç­–ç•¥å¤ªå·®
â”œâ”€ 50ä¸ªç¼“æ…¢å­¦ä¹  â†’ éƒ¨åˆ†æ™‹çº§INTERMEDIATE
â””â”€ 20ä¸ªè¡¨ç°ä¼˜ç§€ â†’ æ™‹çº§ADVANCED

ç¬¬äºŒä»£ï¼šç¹æ®–æ—¶ç»§æ‰¿çˆ¶æ¯çš„æœ€é«˜æƒé™çº§åˆ«
â”œâ”€ ä¼˜ç§€åŸºå› ä»é«˜çº§åˆ«èµ·æ­¥
â””â”€ åŠ é€Ÿè¿›åŒ–

æ•ˆæœï¼šæ—¢ä¿æŠ¤æ–°æ‰‹ï¼Œåˆä¸é™åˆ¶é«˜æ‰‹
```

---

## ä¸‰ã€æ¨èæ–¹æ¡ˆï¼šåˆ†çº§+åŸºå› åå¥½

### å®Œæ•´è®¾è®¡

```python
class AgentV4:
    def __init__(self, agent_id, initial_capital, gene=None, parent_permission=None):
        """
        åˆå§‹åŒ–Agent
        
        Args:
            parent_permission: çˆ¶æ¯çš„æœ€é«˜æƒé™çº§åˆ«ï¼ˆç»§æ‰¿ï¼‰
        """
        self.agent_id = agent_id
        self.initial_capital = initial_capital
        
        # æƒé™ç­‰çº§ï¼ˆæ–°Agentä»çˆ¶æ¯çº§åˆ«æˆ–NOVICEå¼€å§‹ï¼‰
        if parent_permission and parent_permission != 'NOVICE':
            # ç»§æ‰¿çˆ¶æ¯æƒé™ï¼Œä½†é™ä¸€çº§ï¼ˆéœ€è¦è¯æ˜è‡ªå·±ï¼‰
            level_order = ['NOVICE', 'INTERMEDIATE', 'ADVANCED', 'EXPERT', 'MASTER']
            parent_idx = level_order.index(parent_permission)
            self.permission_level = level_order[max(0, parent_idx - 1)]
        else:
            self.permission_level = 'NOVICE'  # åˆ›ä¸–Agentä»æ–°æ‰‹å¼€å§‹
        
        # åŸºå› ä¸­çš„äº¤æ˜“åå¥½ï¼ˆå…ˆå¤©ï¼‰
        self.gene = gene if gene else self._generate_random_gene()
        
        # æƒé™ç³»ç»Ÿ
        self.permission_system = TradingPermissionSystem()
    
    def _generate_random_gene(self):
        """ç”ŸæˆéšæœºåŸºå› """
        return {
            # äº¤æ˜“å“ç§åå¥½ï¼ˆåŸºå› å†³å®šï¼Œä½†å—æƒé™é™åˆ¶ï¼‰
            'product_preference': {
                'SPOT': random.uniform(0, 1),
                'MARGIN': random.uniform(0, 1),
                'PERPETUAL': random.uniform(0, 1),
                'FUTURES': random.uniform(0, 1),
                'OPTIONS': random.uniform(0, 1)
            },
            
            # æ æ†å€¾å‘ï¼ˆåŸºå› å†³å®šï¼Œä½†å—æƒé™ä¸Šé™é™åˆ¶ï¼‰
            'leverage_appetite': random.uniform(0, 1),  # 0=ä¿å®ˆ 1=æ¿€è¿›
            
            # å…¶ä»–äº¤æ˜“å‚æ•°
            'max_position_size': random.uniform(0.1, 0.3),
            'stop_loss': random.uniform(0.02, 0.10),
            # ... å…¶ä»–åŸºå› 
        }
    
    def select_trading_product(self, market_data: Dict) -> str:
        """
        é€‰æ‹©äº¤æ˜“å“ç§
        
        è¿‡ç¨‹ï¼š
        1. åŸºå› å†³å®šåå¥½
        2. æƒé™ç³»ç»Ÿè¿‡æ»¤
        3. å¸‚åœºç¯å¢ƒå½±å“
        """
        # è·å–å…è®¸çš„å“ç§
        allowed_products = self.permission_system.permission_levels[
            self.permission_level
        ]['products']
        
        # åŸºå› åå¥½ï¼ˆåªè€ƒè™‘å…è®¸çš„ï¼‰
        preferences = {
            product: self.gene['product_preference'][product]
            for product in allowed_products
        }
        
        # å¸‚åœºç¯å¢ƒè°ƒæ•´ï¼ˆä¾‹å¦‚ï¼šé«˜æ³¢åŠ¨å€¾å‘ç°è´§ï¼‰
        if market_data.get('volatility', 0) > 0.05:
            preferences['SPOT'] *= 1.5  # é«˜æ³¢åŠ¨æ—¶å¢åŠ ç°è´§æƒé‡
        
        # é€‰æ‹©æœ€é«˜åå¥½çš„
        selected = max(preferences.items(), key=lambda x: x[1])[0]
        
        return selected
    
    def calculate_leverage(self, market_data: Dict) -> float:
        """
        è®¡ç®—å®é™…ä½¿ç”¨çš„æ æ†
        
        è¿‡ç¨‹ï¼š
        1. åŸºå› å†³å®šæ æ†åå¥½
        2. æƒé™ç³»ç»Ÿé™åˆ¶ä¸Šé™
        3. å¸‚åœºç¯å¢ƒå’Œæƒ…ç»ªè°ƒæ•´
        """
        # åŸºå› åå¥½æ æ†
        max_allowed = self.permission_system.get_max_leverage(self.permission_level)
        gene_leverage = 1 + (max_allowed - 1) * self.gene['leverage_appetite']
        
        # æƒ…ç»ªè°ƒæ•´
        if self.emotion.fear > 0.7:
            gene_leverage *= 0.5  # ææƒ§æ—¶é™ä½æ æ†
        elif self.emotion.confidence > 0.8:
            gene_leverage *= 1.2  # è‡ªä¿¡æ—¶æé«˜æ æ†
        
        # å¸‚åœºæ³¢åŠ¨è°ƒæ•´
        volatility = market_data.get('volatility', 0.03)
        if volatility > 0.05:
            gene_leverage *= 0.7  # é«˜æ³¢åŠ¨é™æ æ†
        
        # æœ€ç»ˆæ æ†ï¼ˆä¸è¶…è¿‡æƒé™ä¸Šé™ï¼‰
        final_leverage = min(gene_leverage, max_allowed)
        
        return max(1.0, final_leverage)  # æœ€ä½1x
    
    def update_permission_level(self):
        """
        å®šæœŸæ›´æ–°æƒé™ç­‰çº§ï¼ˆç”±Supervisorè°ƒç”¨ï¼‰
        """
        stats = {
            'days_alive': self.days_alive,
            'total_pnl': self.total_pnl,
            'initial_capital': self.initial_capital,
            'win_rate': self.win_count / max(self.trade_count, 1),
            'max_drawdown': self.calculate_max_drawdown()
        }
        
        new_level = self.permission_system.get_agent_permission_level(stats)
        
        if new_level != self.permission_level:
            old_level = self.permission_level
            self.permission_level = new_level
            logger.info(
                f"Agent {self.agent_id} æƒé™å‡çº§: {old_level} â†’ {new_level}"
            )
```

---

## å››ã€ç‰¹æ®Šæœºåˆ¶ï¼šæ æ†åŸºå› è¡¨è¾¾

### æ¦‚å¿µï¼šåŸºå› å‹ vs è¡¨ç°å‹

```python
# åŸºå› å‹ï¼ˆGenotypeï¼‰ï¼šæ½œåœ¨èƒ½åŠ›
agent.gene['leverage_appetite'] = 0.9  # åŸºå› ä¸Šå–œæ¬¢é«˜æ æ†

# è¡¨ç°å‹ï¼ˆPhenotypeï¼‰ï¼šå®é™…è¡¨ç°
agent.permission_level = 'NOVICE'      # ä½†æƒé™åªå…è®¸1x
agent.actual_leverage = 1.0            # å®é™…åªèƒ½ç”¨1x

# å½“Agentå‡çº§åï¼š
agent.permission_level = 'EXPERT'      # æƒé™æå‡
agent.actual_leverage = 18.0           # åŸºå› å¾—ä»¥è¡¨è¾¾ï¼(0.9 Ã— 20)
```

**è¿™æ„å‘³ç€ï¼š**
- æœ‰"é«˜æ æ†åŸºå› "çš„Agentåœ¨æ–°æ‰‹æœŸè¢«ä¿æŠ¤
- å½“å®ƒè¡¨ç°ä¼˜ç§€æ™‹çº§åï¼ŒåŸºå› æ‰èƒ½å……åˆ†è¡¨è¾¾
- é¿å…"å¤©æ‰Agentå› æ–°æ‰‹æœŸç”¨é«˜æ æ†è€Œå¤­æŠ˜"

---

## äº”ã€è¿›åŒ–åŠ¨åŠ›å­¦åˆ†æ

### ä¸åŒæ–¹æ¡ˆçš„è¿›åŒ–ç»“æœ

```python
# æ–¹æ¡ˆ1ï¼šå®Œå…¨è‡ªç”±
ç¬¬1ä»£ï¼šæ­»äº¡ç‡95% â†’ èµ„é‡‘æ± -80%
ç¬¬2ä»£ï¼šä»…å‰©5ä¸ªAgent â†’ å¤šæ ·æ€§ä¸§å¤±
ç¬¬3ä»£ï¼šå¯èƒ½å…¨ç­
ç»“è®ºï¼šâŒ é€‰æ‹©å‹åŠ›å¤ªå¤§ï¼Œæ— æ³•è¿›åŒ–

# æ–¹æ¡ˆ2ï¼šä¸¥æ ¼é™åˆ¶
ç¬¬1ä»£ï¼šå­˜æ´»ç‡90% â†’ ç¼“æ…¢ç›ˆäº
ç¬¬10ä»£ï¼šå­˜æ´»ç‡85% â†’ ç­–ç•¥è¶‹åŒ
ç¬¬100ä»£ï¼šæ‰€æœ‰Agentéƒ½å·®ä¸å¤š â†’ æ— ç«äº‰
ç»“è®ºï¼šâŒ é€‰æ‹©å‹åŠ›å¤ªå°ï¼Œè¿›åŒ–åœæ»

# æ–¹æ¡ˆ3ï¼šåˆ†çº§æˆæƒ â­
ç¬¬1ä»£ï¼ˆNOVICEï¼‰ï¼šå­˜æ´»ç‡70% â†’ ä¼˜èƒœåŠ£æ±°
ç¬¬2ä»£ï¼š50%å‡è‡³INTERMEDIATE â†’ å¼€å§‹åˆ†åŒ–
ç¬¬5ä»£ï¼šé¡¶å°–Agentè¾¾EXPERT â†’ é«˜æ æ†ç­–ç•¥æ¶Œç°
ç¬¬10ä»£ï¼šå°‘æ•°MASTER â†’ æœŸæƒç­–ç•¥å‡ºç°
ç¬¬20ä»£ï¼š
  â”œâ”€ 30% NOVICEï¼ˆæ–°ç”Ÿï¼‰
  â”œâ”€ 40% INTERMEDIATEï¼ˆä¸»åŠ›ï¼‰
  â”œâ”€ 20% ADVANCEDï¼ˆç²¾è‹±ï¼‰
  â”œâ”€ 8% EXPERTï¼ˆé«˜æ‰‹ï¼‰
  â””â”€ 2% MASTERï¼ˆå¤§å¸ˆï¼‰
ç»“è®ºï¼šâœ… å½¢æˆé‡‘å­—å¡”ç»“æ„ï¼ŒæŒç»­è¿›åŒ–
```

---

## å…­ã€é£é™©æ§åˆ¶æœºåˆ¶

### å³ä½¿åˆ†çº§ï¼Œä¹Ÿéœ€è¦é¢å¤–ä¿æŠ¤

```python
class RiskController:
    """é£é™©æ§åˆ¶å™¨ï¼ˆå¼ºåˆ¶ï¼‰"""
    
    def check_trade(self, agent, trade_signal):
        """
        æ£€æŸ¥äº¤æ˜“æ˜¯å¦ç¬¦åˆé£é™©è§„åˆ™
        
        å³ä½¿Agentæœ‰æƒé™ï¼Œä¹Ÿè¦é€šè¿‡é£æ§
        """
        # 1. å•ç¬”æœ€å¤§äºæŸ
        max_loss = trade_signal['position_size'] * trade_signal['leverage']
        if max_loss > agent.current_capital * 0.3:  # å•ç¬”æœ€å¤šäº30%
            return False, "å•ç¬”é£é™©è¿‡å¤§"
        
        # 2. æ€»æ æ†æš´éœ²
        total_exposure = self.calculate_total_exposure(agent)
        if total_exposure > agent.current_capital * 3:  # æ€»æš´éœ²ä¸è¶…è¿‡3å€
            return False, "æ€»æ æ†æš´éœ²è¿‡å¤§"
        
        # 3. æœŸæƒå–æ–¹é™åˆ¶
        if trade_signal['product'] == 'OPTIONS' and trade_signal['side'] == 'SELL':
            if agent.current_capital < 50000:  # æœŸæƒå–æ–¹éœ€è¦å¤§èµ„é‡‘
                return False, "èµ„é‡‘ä¸è¶³ä»¥åšæœŸæƒå–æ–¹"
        
        # 4. å¸‚åœºæç«¯æƒ…å†µ
        if market_volatility > 0.1:  # æç«¯æ³¢åŠ¨
            if trade_signal['leverage'] > 5:
                return False, "å¸‚åœºæ³¢åŠ¨è¿‡å¤§ï¼Œé™åˆ¶æ æ†"
        
        return True, "é€šè¿‡"
```

---

## ä¸ƒã€æœ€ç»ˆæ¨èæ–¹æ¡ˆ

### ğŸ¯ åˆ†çº§æˆæƒ + åŸºå› è¡¨è¾¾ + é£é™©ç†”æ–­

```python
å®Œæ•´æ¶æ„ï¼š

1. åŸºå› å±‚ï¼ˆæ½œåŠ›ï¼‰
   â”œâ”€ product_preference: å“ç§åå¥½
   â”œâ”€ leverage_appetite: æ æ†åå¥½
   â””â”€ risk_tolerance: é£é™©æ‰¿å—

2. æƒé™å±‚ï¼ˆé™åˆ¶ï¼‰
   â”œâ”€ æ ¹æ®è¡¨ç°åˆ†çº§ï¼ˆNOVICE â†’ MASTERï¼‰
   â”œâ”€ é™åˆ¶å“ç§å’Œæœ€å¤§æ æ†
   â””â”€ ç»§æ‰¿æœºåˆ¶ï¼ˆä¼˜ç§€åŸºå› ä»æ›´é«˜çº§å¼€å§‹ï¼‰

3. å†³ç­–å±‚ï¼ˆå®é™…ï¼‰
   â”œâ”€ åŸºå› åå¥½ Ã— æƒé™é™åˆ¶ = å®é™…é€‰æ‹©
   â”œâ”€ æƒ…ç»ªå’Œå¸‚åœºè°ƒæ•´
   â””â”€ é£æ§ç³»ç»Ÿæœ€ç»ˆæŠŠå…³

4. ç›‘ç£å±‚ï¼ˆä¿æŠ¤ï¼‰
   â”œâ”€ Supervisorå®šæœŸè¯„ä¼°å‡çº§
   â”œâ”€ é£é™©ç†”æ–­æœºåˆ¶
   â””â”€ å¼‚å¸¸è¡Œä¸ºå¹²é¢„
```

### åˆå§‹é…ç½®å»ºè®®

```python
# åˆ›ä¸–Agentï¼ˆ100ä¸ªï¼‰
åˆå§‹æƒé™ï¼šå…¨éƒ¨ NOVICE
åˆå§‹èµ„é‡‘ï¼š1000 USDTï¼ˆå°é¢ï¼‰
å…è®¸å“ç§ï¼šä»…ç°è´§
æœ€å¤§æ æ†ï¼š1x

# ç¬¬ä¸€æ¬¡ç¹æ®–ï¼ˆ7å¤©åï¼‰
â”œâ”€ ä¼˜ç§€Agentï¼ˆæ”¶ç›Š>10%ï¼‰â†’ INTERMEDIATE
â”œâ”€ å­ä»£ç»§æ‰¿çˆ¶æ¯æƒé™-1çº§
â””â”€ åˆå§‹èµ„é‡‘ç¿»å€ï¼ˆå¥–åŠ±ï¼‰

# ç¨³å®šæœŸï¼ˆ30å¤©åï¼‰
â”œâ”€ å½¢æˆé‡‘å­—å¡”åˆ†å¸ƒ
â”œâ”€ é¡¶å°–Agentä½¿ç”¨é«˜æ æ†/æœŸæƒ
â””â”€ æ–°æ‰‹AgentæŒç»­æ¶Œå…¥åº•å±‚
```

---

## å…«ã€ä¸è‡ªç„¶ç•Œç±»æ¯”

```
è‡ªç„¶ç•Œç”Ÿç‰©ç­‰çº§ï¼š
â”œâ”€ å¹¼å¹´æœŸï¼šçˆ¶æ¯ä¿æŠ¤ï¼Œå®‰å…¨ç¯å¢ƒ
â”œâ”€ æˆå¹´æœŸï¼šç‹¬ç«‹ç”Ÿå­˜ï¼Œé¢å¯¹é£é™©
â””â”€ æˆç†ŸæœŸï¼šé¢†åœ°ã€é…å¶ã€ç«äº‰ä¼˜åŠ¿

Prometheus Agentç­‰çº§ï¼š
â”œâ”€ NOVICEï¼šä½é£é™©ç¯å¢ƒå­¦ä¹ 
â”œâ”€ INTERMEDIATE/ADVANCEDï¼šç‹¬ç«‹äº¤æ˜“
â””â”€ EXPERT/MASTERï¼šé«˜é£é™©é«˜å›æŠ¥ç­–ç•¥
```

**è¿™ä¸æ˜¯é™åˆ¶è‡ªç”±ï¼Œè€Œæ˜¯ã€Œæ¸è¿›å¼è‡ªç”±ã€ï¼**

---

## ä¹ã€ä»£ç å®ç°è¦ç‚¹

```python
class Supervisor:
    def daily_permission_review(self):
        """æ¯æ—¥æƒé™å®¡æŸ¥"""
        for agent in self.agents:
            # è¯„ä¼°è¡¨ç°
            new_level = self.permission_system.get_agent_permission_level(
                agent.get_stats()
            )
            
            # å‡çº§/é™çº§
            if new_level != agent.permission_level:
                self.update_agent_permission(agent, new_level)
                
                # å‡çº§å¥–åŠ±ï¼šå¢åŠ èµ„é‡‘
                if self.is_upgrade(agent.permission_level, new_level):
                    bonus = agent.current_capital * 0.2
                    agent.current_capital += bonus
                    
                    # å‘å¸ƒå…¬å‘Š
                    bulletin_board.post_system(
                        f"ğŸ‰ Agent {agent.agent_id} æ™‹å‡è‡³ {new_level}ï¼"
                    )

class GenePool:
    def breed_new_agent(self, parent1, parent2):
        """ç¹æ®–æ—¶ç»§æ‰¿æƒé™"""
        child_gene = self.crossover(parent1.gene, parent2.gene)
        
        # ç»§æ‰¿çˆ¶æ¯çš„æœ€é«˜æƒé™ï¼ˆé™ä¸€çº§ï¼‰
        parent_max_level = max(parent1.permission_level, parent2.permission_level)
        
        child = AgentV4(
            gene=child_gene,
            parent_permission=parent_max_level  # ç»§æ‰¿ï¼
        )
        
        return child
```

---

## åã€æ€»ç»“

### âŒ ä¸æ¨èï¼šå®Œå…¨è‡ªç”±
- æ­»äº¡ç‡å¤ªé«˜
- éš¾ä»¥ç§¯ç´¯ç»éªŒ
- èµ„é‡‘å¿«é€Ÿè€—å°½

### âŒ ä¸æ¨èï¼šä¸¥æ ¼é™åˆ¶
- æ”¶ç›Šæœ‰é™
- è¿›åŒ–ç¼“æ…¢
- ç­–ç•¥ç©ºé—´å—é™

### âœ… **å¼ºçƒˆæ¨èï¼šåˆ†çº§æˆæƒ**
- ğŸ›¡ï¸ ä¿æŠ¤æ–°æ‰‹Agentï¼Œé™ä½å¤­æŠ˜ç‡
- ğŸš€ ä¼˜ç§€Agentè·å¾—æ›´å¤šè‡ªç”±
- ğŸ“ˆ å½¢æˆé‡‘å­—å¡”ç»“æ„ï¼ŒæŒç»­è¿›åŒ–
- ğŸ§¬ åŸºå› æ½œåŠ›é€æ­¥è¡¨è¾¾
- âš–ï¸ å¹³è¡¡é£é™©ä¸æ”¶ç›Š

**å°±åƒæ¸¸æˆå‡çº§ç³»ç»Ÿï¼šæ–°æ‰‹æ‘ â†’ ä¸»åŸ â†’ é«˜çº§å‰¯æœ¬ â†’ ç»ˆææŒ‘æˆ˜ï¼** ğŸ®

---

æœ€åæ›´æ–°ï¼š2025å¹´12æœˆ1æ—¥

