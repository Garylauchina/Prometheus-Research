# Prometheus v3.0 - ç­–ç•¥æ¼”åŒ–å†å²

![Evolution](https://img.shields.io/badge/Evolution-Complete-orange)
![Strategy](https://img.shields.io/badge/Strategy-Advanced-blue)
![Docker Support](https://img.shields.io/badge/Docker-Supported-green)

**ç‰ˆæœ¬**: 1.1  
**æ—¥æœŸ**: 2025å¹´11æœˆ29æ—¥

## ğŸ“‘ ç›®å½•

- [1. æ¼”åŒ–å“²å­¦ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œå°æ­¥å¿«è·‘](#1-æ¼”åŒ–å“²å­¦ä»ç®€å•åˆ°å¤æ‚å°æ­¥å¿«è·‘)
- [2. v1.0: éªŒè¯æ ¸å¿ƒæ€è·¯](#2-v10-éªŒè¯æ ¸å¿ƒæ€è·¯)
- [3. v2.5: æå‡ç­–ç•¥é€‚åº”æ€§](#3-v25-æå‡ç­–ç•¥é€‚åº”æ€§)
- [4. v3.0: èµ°å‘çœŸå®å¸‚åœº](#4-v30-èµ°å‘çœŸå®å¸‚åœº)
- [5. v3.0 DockeråŒ–æ¼”è¿›](#5-v30-dockeråŒ–æ¼”è¿›)
- [6. v3.1 (æœªæ¥): è¿ˆå‘è‡ªä¸»æ™ºèƒ½](#6-v31-æœªæ¥è¿ˆå‘è‡ªä¸»æ™ºèƒ½)
- [7. æ¼”åŒ–è¿‡ç¨‹ä¸­çš„å…³é”®æ•™è®­](#7-æ¼”åŒ–è¿‡ç¨‹ä¸­çš„å…³é”®æ•™è®­)
- [8. æŠ€æœ¯å®ç°è·¯å¾„è¯¦è§£](#8-æŠ€æœ¯å®ç°è·¯å¾„è¯¦è§£)
- [9. æ€§èƒ½å¯¹æ¯”ä¸åˆ†æ](#9-æ€§èƒ½å¯¹æ¯”ä¸åˆ†æ)
- [10. å‚è€ƒæ–‡çŒ®](#10-å‚è€ƒæ–‡çŒ®)

---

## 1. æ¼”åŒ–å“²å­¦ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œå°æ­¥å¿«è·‘

Prometheusçš„å¼€å‘éµå¾ª**è¿­ä»£å¼**å’Œ**å¢é‡å¼**çš„åŸåˆ™ã€‚æˆ‘ä»¬ä¸è¿½æ±‚ä¸€æ­¥åˆ°ä½ï¼Œè€Œæ˜¯é€šè¿‡å¿«é€Ÿçš„åŸå‹ã€æµ‹è¯•å’Œåé¦ˆï¼Œé€æ­¥æ„å»ºä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿã€‚

> "ä¼Ÿå¤§çš„ç³»ç»Ÿæ€»æ˜¯ä»ä¸€ä¸ªç®€å•çš„ã€èƒ½å·¥ä½œçš„ç³»ç»Ÿæ¼”åŒ–è€Œæ¥ã€‚" - John Gall, ã€Šç³»ç»Ÿè®ºã€‹

### 1.1 è¿­ä»£å¼€å‘æ–¹æ³•è®º

æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯**ç²¾ç›Šåˆ›ä¸š**ä¸**æ•æ·å¼€å‘**ç›¸ç»“åˆçš„æ–¹æ³•è®ºï¼š

- **å‡è®¾é©±åŠ¨**: æ¯ä¸ªç‰ˆæœ¬éƒ½åŸºäºæ˜ç¡®çš„å‡è®¾è¿›è¡Œæµ‹è¯•
- **å¿«é€ŸéªŒè¯**: æœ€çŸ­æ—¶é—´å†…éªŒè¯æ ¸å¿ƒå‡è®¾çš„æ­£ç¡®æ€§
- **æ•°æ®å†³ç­–**: åŸºäºå›æµ‹å’Œæ¨¡æ‹Ÿç›˜æ•°æ®å†³å®šä¸‹ä¸€æ­¥æ–¹å‘
- **æŒç»­ä¼˜åŒ–**: æ¯ä¸ªç‰ˆæœ¬éƒ½è§£å†³ä¸Šä¸€ç‰ˆæœ¬å‘ç°çš„é—®é¢˜

### 1.2 æ¼”åŒ–çš„å…³é”®é©±åŠ¨å› ç´ 

| é©±åŠ¨å› ç´  | è¯´æ˜ | åœ¨æ¼”åŒ–ä¸­çš„ä½“ç° |
|---------|------|--------------|
| **æ€§èƒ½ç“¶é¢ˆ** | è¯†åˆ«å¹¶è§£å†³å½±å“ç³»ç»Ÿè¡¨ç°çš„é™åˆ¶å› ç´  | ä»å•ä¸€ç­–ç•¥åˆ°å¤šAgentç³»ç»Ÿ |
| **å¸‚åœºé€‚åº”æ€§** | ç³»ç»Ÿå¯¹ä¸åŒå¸‚åœºç¯å¢ƒçš„é€‚åº”èƒ½åŠ› | å¼•å…¥å¸‚åœºçŠ¶æ€æ£€æµ‹æœºåˆ¶ |
| **å·¥ç¨‹å¯é æ€§** | ç³»ç»Ÿåœ¨çœŸå®ç¯å¢ƒä¸­çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ | å¤šå±‚é£æ§ä½“ç³»çš„å»ºç«‹ |
| **è¿ç»´ä¾¿åˆ©æ€§** | ç³»ç»Ÿçš„éƒ¨ç½²ã€ç›‘æ§å’Œç»´æŠ¤ä¾¿æ·ç¨‹åº¦ | Dockerå®¹å™¨åŒ–æ”¯æŒ |
| **æ‰©å±•æ€§éœ€æ±‚** | ç³»ç»ŸåŠŸèƒ½å’Œè§„æ¨¡çš„æ‰©å±•èƒ½åŠ› | æ¨¡å—åŒ–æ¶æ„è®¾è®¡

### 1.3 æ¼”åŒ–è·¯å¾„å›¾

```mermaid
journey
    title Prometheus ç­–ç•¥æ¼”åŒ–ä¹‹æ—…
    section v1.0: éªŒè¯æ ¸å¿ƒæ€è·¯
        éªŒè¯é—ä¼ ç®—æ³•: 5: åˆå§‹æƒ³æ³•
        å•ä¸€åŠ¨é‡ç­–ç•¥: 4: ç¼–ç å®ç°
        å›æµ‹ROI 55%: 5: è·å¾—åˆæ­¥æˆåŠŸ
    section v2.5: æå‡ç­–ç•¥é€‚åº”æ€§
        å¼•å…¥å¸‚åœºçŠ¶æ€æ£€æµ‹: 5: å‘ç°é—®é¢˜ï¼ˆéœ‡è¡å¸‚è¡¨ç°å·®ï¼‰
        åŠ¨æ€å¤šç©ºæ¯”ä¾‹: 4: æå‡ºè§£å†³æ–¹æ¡ˆ
        å›æµ‹ROI 456%: 5: å–å¾—é‡å¤§çªç ´
    section v3.0: èµ°å‘çœŸå®å¸‚åœº
        é›†æˆOKX API: 5: ç›®æ ‡ï¼ˆå®ç›˜äº¤æ˜“ï¼‰
        å¤šå±‚é£æ§ä½“ç³»: 4: å¢åŠ å®‰å…¨ä¿éšœ
        åŒå¸‚åœºæ”¯æŒ: 4: æ‰©å±•äº¤æ˜“èŒƒå›´
        å®¹å™¨åŒ–éƒ¨ç½²: 4: æå‡è¿ç»´æ•ˆç‡
        æˆåŠŸæ¨¡æ‹Ÿç›˜æµ‹è¯•: 5: å®ŒæˆæŠ€æœ¯éªŒè¯
    section v3.1 (æœªæ¥): è¿ˆå‘è‡ªä¸»æ™ºèƒ½
        é›†æˆLLM API: 5: ç›®æ ‡ï¼ˆè‡ªä¸»å†³ç­–ï¼‰
        AIä¸»è„‘: 4: å®ç°æ–¹æ¡ˆ
        7x24è‡ªä¸»è¿è¡Œ: 5: ç»ˆæç›®æ ‡
    section v4.0 (è¿œæ™¯): ç”Ÿæ€æ‰©å±•
        å¤šäº¤æ˜“æ‰€æ”¯æŒ: 5: å…¨çƒåŒ–éƒ¨ç½²
        è·¨å¸‚åœºå¥—åˆ©: 4: æ–°ç›ˆåˆ©æ¨¡å¼
        åˆ†å¸ƒå¼æ¶æ„: 4: é«˜å¯ç”¨ä¿éšœ
```

---

## 2. v1.0: éªŒè¯æ ¸å¿ƒæ€è·¯ (2025-11-27)

### 2.1 ç›®æ ‡

- **æ ¸å¿ƒé—®é¢˜**: é—ä¼ ç®—æ³•èƒ½å¦åœ¨åŠ å¯†è´§å¸å¸‚åœºä¸­ç­›é€‰å‡ºæœ‰æ•ˆç­–ç•¥ï¼Ÿ
- **éªŒè¯æ–¹å¼**: å»ºç«‹ä¸€ä¸ªåŸºç¡€çš„å›æµ‹æ¡†æ¶ï¼Œç”¨å†å²æ•°æ®è¿›è¡Œæ¨¡æ‹Ÿã€‚
- **æŠ€æœ¯æŒ‘æˆ˜**: å®ç°åŸºç¡€çš„é—ä¼ ç®—æ³•æ¡†æ¶ï¼Œå¤„ç†å†å²ä»·æ ¼æ•°æ®ï¼Œè®¾è®¡ç®€å•æœ‰æ•ˆçš„äº¤æ˜“è§„åˆ™ã€‚

### 2.2 æŠ€æœ¯å®ç°

- **æ•°æ®å¤„ç†**: 
  - ä½¿ç”¨Pythonçš„Pandasåº“å¤„ç†OHLCVå†å²æ•°æ®
  - å®ç°åŸºç¡€çš„æ•°æ®æ¸…æ´—å’Œæ ‡å‡†åŒ–
  - æ„å»ºç®€å•çš„æ•°æ®å­˜å‚¨å’Œè¯»å–æœºåˆ¶

- **ç­–ç•¥è®¾è®¡**: 
  - **ç­–ç•¥**: ç®€å•åŠ¨é‡ç­–ç•¥
  - **åšå¤šä¿¡å·**: è¿‡å»Nå°æ—¶ä»·æ ¼ä¸Šæ¶¨è¶…è¿‡X%
  - **åšç©ºä¿¡å·**: è¿‡å»Nå°æ—¶ä»·æ ¼ä¸‹è·Œè¶…è¿‡Y%
  - **åŸºå› ç¼–ç **: `(N, X, Y)`ï¼Œå…¶ä¸­Nâˆˆ[1,24]ï¼ŒX,Yâˆˆ[0.5,5.0]
  - **åˆå§‹ç§ç¾¤**: éšæœºç”Ÿæˆ100ä¸ªä¸åŒå‚æ•°ç»„åˆ

- **é—ä¼ ç®—æ³•å®ç°**: 
  - **é€‰æ‹©æœºåˆ¶**: è½®ç›˜èµŒé€‰æ‹©æ³•ï¼ŒåŸºäºROIè¡¨ç°
  - **äº¤å‰æ“ä½œ**: å•ç‚¹äº¤å‰ï¼Œäº¤æ¢å‚æ•°ç‰‡æ®µ
  - **å˜å¼‚æ“ä½œ**: é«˜æ–¯å˜å¼‚ï¼Œå°å¹…è°ƒæ•´å‚æ•°å€¼
  - **è¿›åŒ–ä»£æ•°**: 50ä»£ï¼Œæ¯ä»£ä¿ç•™20%æœ€ä¼˜ä¸ªä½“

### 2.3 ç»“æœä¸åæ€

- **å›æµ‹è¡¨ç°**:
  - **ROI**: **55%** (365å¤©)
  - **æœ€å¤§å›æ’¤**: 18%
  - **èƒœç‡**: 52%
  - **äº¤æ˜“é¢‘ç‡**: å¹³å‡æ¯2å¤©1ç¬”

- **å…³é”®å‘ç°**:
  - **æˆåŠŸéªŒè¯äº†é—ä¼ ç®—æ³•çš„å¯è¡Œæ€§**ï¼šå³ä½¿æ˜¯æœ€ç®€å•çš„ç­–ç•¥ï¼Œé€šè¿‡è¿›åŒ–ä¹Ÿèƒ½è·å¾—æ­£æ”¶ç›Š
  - **æœ€ä¼˜å‚æ•°ç»„åˆ**: N=4å°æ—¶ï¼ŒX=1.2%ï¼ŒY=1.5%
  - **è¡¨ç°å·®å¼‚**: ä¸åŒå‚æ•°ç»„åˆçš„è¡¨ç°å·®å¼‚å·¨å¤§ï¼Œè¯æ˜äº†å‚æ•°ä¼˜åŒ–çš„é‡è¦æ€§

- **å‘ç°çš„é—®é¢˜**: 
  - **éœ‡è¡å¸‚è¡¨ç°å·®**: åœ¨æ²¡æœ‰æ˜ç¡®è¶‹åŠ¿çš„å¸‚åœºä¸­ï¼ŒåŠ¨é‡ç­–ç•¥ä¼šé¢‘ç¹äº¤æ˜“å¹¶äºæŸ
  - **ç­–ç•¥å•ä¸€**: æ— æ³•åº”å¯¹å¤æ‚çš„å¸‚åœºå˜åŒ–
  - **ç¼ºä¹é£æ§**: æ²¡æœ‰å®ç°æ­¢æŸæœºåˆ¶ï¼Œå•ç¬”äºæŸå¯èƒ½è¾ƒå¤§
  - **è¿‡æ‹Ÿåˆé£é™©**: ç­–ç•¥å¯èƒ½è¿‡åº¦æ‹Ÿåˆå†å²æ•°æ®

### 2.4 ä»£ç ç»“æ„

```
v1.0/
â”œâ”€â”€ backtest_engine.py  # å›æµ‹å¼•æ“
â”œâ”€â”€ genetic_optimizer.py # é—ä¼ ä¼˜åŒ–å™¨
â”œâ”€â”€ simple_strategy.py  # ç®€å•åŠ¨é‡ç­–ç•¥
â”œâ”€â”€ data_processor.py  # æ•°æ®å¤„ç†æ¨¡å—
â””â”€â”€ config.py          # é…ç½®æ–‡ä»¶
```

---

## 3. v2.5: æå‡ç­–ç•¥é€‚åº”æ€§ (2025-11-28)

### 3.1 ç›®æ ‡

- **æ ¸å¿ƒé—®é¢˜**: å¦‚ä½•è®©ç³»ç»Ÿé€‚åº”ä¸åŒçš„å¸‚åœºçŠ¶æ€ï¼ˆç‰›å¸‚ã€ç†Šå¸‚ã€éœ‡è¡å¸‚ï¼‰ï¼Ÿ
- **è§£å†³æ–¹æ¡ˆ**: å¼•å…¥**å¸‚åœºçŠ¶æ€æ£€æµ‹**æœºåˆ¶ï¼Œå®ç°åŠ¨æ€ç­–ç•¥è°ƒæ•´ã€‚
- **æŠ€æœ¯å‡çº§**: å¼€å‘å¸‚åœºçŠ¶æ€åˆ†ç±»ç®—æ³•ï¼Œå®ç°å¤šAgentç³»ç»Ÿæ¶æ„ï¼Œè®¾è®¡åŠ¨æ€èµ„æºåˆ†é…æœºåˆ¶ã€‚

### 3.2 æŠ€æœ¯å®ç°

#### 3.2.1 å¸‚åœºçŠ¶æ€æ£€æµ‹

- **`MarketRegimeDetector`æ¨¡å—**:
  - **ç‰¹å¾æå–**: ä½¿ç”¨å¤šç§æŠ€æœ¯æŒ‡æ ‡ç»„åˆè¿›è¡Œå¸‚åœºçŠ¶æ€è¯†åˆ«
    - 30æ—¥ä»·æ ¼å˜åŒ–ç‡
    - æ³¢åŠ¨ç‡æŒ‡æ ‡ï¼ˆATRï¼‰
    - è¶‹åŠ¿å¼ºåº¦æŒ‡æ ‡ï¼ˆADXï¼‰
    - åŠ¨é‡æŒ‡æ ‡ï¼ˆRSIï¼‰
  - **åˆ†ç±»ç®—æ³•**: å†³ç­–æ ‘æ¨¡å‹ï¼Œå°†å¸‚åœºåˆ’åˆ†ä¸º5ç§çŠ¶æ€
    - **å¼ºç‰›**: ä»·æ ¼ä¸Šæ¶¨>8%/æœˆï¼Œæ³¢åŠ¨ç‡ä½ï¼Œè¶‹åŠ¿å¼º
    - **å¼±ç‰›**: ä»·æ ¼ä¸Šæ¶¨3-8%/æœˆï¼Œæ³¢åŠ¨ç‡ä¸­ç­‰
    - **éœ‡è¡**: ä»·æ ¼å˜åŒ–<-3%~3%/æœˆï¼Œæ³¢åŠ¨ç‡ä½
    - **å¼±ç†Š**: ä»·æ ¼ä¸‹è·Œ3-8%/æœˆï¼Œæ³¢åŠ¨ç‡ä¸­ç­‰
    - **å¼ºç†Š**: ä»·æ ¼ä¸‹è·Œ>8%/æœˆï¼Œæ³¢åŠ¨ç‡é«˜ï¼Œè¶‹åŠ¿å¼º
  - **æ£€æµ‹å‡†ç¡®ç‡**: å›æµ‹å†å²æ•°æ®ï¼Œå‡†ç¡®ç‡è¾¾åˆ°85%

#### 3.2.2 å¤šAgentç³»ç»Ÿ

- **Agentè®¾è®¡**:
  - æ¯ä¸ªAgentä»£è¡¨ä¸€ä¸ªç‹¬ç‰¹çš„äº¤æ˜“ç­–ç•¥ï¼ˆåŸºå› ç»„åˆï¼‰
  - åˆå§‹ç§ç¾¤æ‰©å¤§åˆ°200ä¸ªAgent
  - å¢åŠ å¤šæ ·æ€§ï¼šåŒ…å«è¶‹åŠ¿è·Ÿè¸ªå‹ã€åè½¬å‹å’Œæ··åˆå‹Agent

- **åŠ¨æ€å¤šç©ºæ¯”ä¾‹**:
  - **ç‰›å¸‚**: åšå¤šAgentåˆ†é…70%èµ„é‡‘ï¼Œåšç©ºAgentåˆ†é…20%ï¼Œé¢„ç•™10%
  - **ç†Šå¸‚**: åšç©ºAgentåˆ†é…70%èµ„é‡‘ï¼Œåšå¤šAgentåˆ†é…20%ï¼Œé¢„ç•™10%
  - **éœ‡è¡å¸‚**: æ‰€æœ‰Agentä»…åˆ†é…50%èµ„é‡‘ï¼Œé™ä½äº¤æ˜“é¢‘ç‡
  - **åŠ¨æ€è°ƒæ•´**: æ ¹æ®å¸‚åœºçŠ¶æ€å˜åŒ–å¹³æ»‘è°ƒæ•´èµ„é‡‘åˆ†é…æ¯”ä¾‹

#### 3.2.3 é£é™©æ§åˆ¶å¢å¼º

- **æ­¢æŸæœºåˆ¶**: æ¯ä¸ªAgentå®ç°ç‹¬ç«‹æ­¢æŸï¼Œå•ç¬”äº¤æ˜“æœ€å¤§äºæŸé™åˆ¶åœ¨å…¥åœºä»·æ ¼çš„3%
- **æœ€å¤§å›æ’¤æ§åˆ¶**: ç³»ç»Ÿçº§æœ€å¤§å›æ’¤é™åˆ¶åœ¨15%
- **äº¤æ˜“é‡é™åˆ¶**: å•ç¬”äº¤æ˜“ä¸è¶…è¿‡æ€»èµ„é‡‘çš„5%

### 3.3 å›æµ‹è¡¨ç°

| æŒ‡æ ‡ | v2.5è¡¨ç° | v1.0è¡¨ç° | æå‡æ¯”ä¾‹ |
|------|---------|---------|--------|
| **å¹´åŒ–ROI** | **456.79%** | 55% | +730% |
| **æœ€å¤§å›æ’¤** | 22% | 18% | +22% |
| **èƒœç‡** | 62% | 52% | +19% |
| **å¤æ™®æ¯”ç‡** | 3.8 | 1.2 | +217% |
| **ç›ˆäºæ¯”** | 2.8 | 1.5 | +87% |
| **äº¤æ˜“é¢‘ç‡** | å¹³å‡æ¯3å¤©1ç¬” | å¹³å‡æ¯2å¤©1ç¬” | -50% |

### 3.4 å…³é”®å‘ç°ä¸åæ€

- **å†³å®šæ€§çªç ´**ï¼šå¸‚åœºçŠ¶æ€æ£€æµ‹æå¤§åœ°æå‡äº†ç³»ç»Ÿçš„ç›ˆåˆ©èƒ½åŠ›å’Œé€‚åº”æ€§
- **å…³é”®é¢†æ‚Ÿ**:
  - **"æ‹©æ—¶é‡äºæ‹©ä»·"**: åˆ¤æ–­å½“å‰çš„å¸‚åœºçŠ¶æ€ï¼Œæ¯”é¢„æµ‹æœªæ¥çš„ä»·æ ¼æ›´é‡è¦
  - **åŠ¨æ€è°ƒæ•´æ˜¯å…³é”®**: å›ºå®šçš„ç­–ç•¥æ— æ³•æˆ˜èƒœå˜åŒ–çš„å¸‚åœº
  - **ç»„åˆæ•ˆåº”**: å¤šä¸ªä¸åŒç­–ç•¥çš„ç»„åˆå¯ä»¥äº§ç”ŸååŒæ•ˆåº”

- **æŠ€æœ¯æ”¹è¿›**:
  - å¤šAgentç³»ç»Ÿæ˜¾è‘—æé«˜äº†ç­–ç•¥çš„é²æ£’æ€§
  - åŠ¨æ€èµ„æºåˆ†é…æœ‰æ•ˆé™ä½äº†éœ‡è¡å¸‚çš„æŸè€—
  - å¤šå±‚æ¬¡é£æ§ä¿éšœäº†èµ„é‡‘å®‰å…¨

### 3.5 ä»£ç ç»“æ„å‡çº§

```
v2.5/
â”œâ”€â”€ backtest_engine.py      # å›æµ‹å¼•æ“
â”œâ”€â”€ genetic_optimizer.py    # é—ä¼ ä¼˜åŒ–å™¨
â”œâ”€â”€ market_regime_detector.py # å¸‚åœºçŠ¶æ€æ£€æµ‹
â”œâ”€â”€ agent_manager.py        # Agentç®¡ç†
â”œâ”€â”€ multi_strategy.py       # å¤šç­–ç•¥å®ç°
â”œâ”€â”€ risk_manager.py         # é£é™©æ§åˆ¶
â”œâ”€â”€ data_processor.py       # æ•°æ®å¤„ç†
â””â”€â”€ config.py               # é…ç½®æ–‡ä»¶
```

---

## 4. v3.0: èµ°å‘çœŸå®å¸‚åœº (2025-11-29)

### 4.1 ç›®æ ‡

- **æ ¸å¿ƒé—®é¢˜**: å›æµ‹çš„æˆåŠŸèƒ½å¦åœ¨çœŸå®å¸‚åœºä¸­å¤ç°ï¼Ÿ
- **è§£å†³æ–¹æ¡ˆ**: å»ºç«‹å®Œæ•´çš„å®ç›˜äº¤æ˜“ç³»ç»Ÿï¼Œå¯¹æ¥çœŸå®äº¤æ˜“æ‰€ã€‚
- **æŠ€æœ¯æŒ‘æˆ˜**: å®ç°å®æ—¶æ•°æ®å¤„ç†ï¼Œå¤„ç†ç½‘ç»œå»¶è¿Ÿå’ŒAPIé™åˆ¶ï¼Œç¡®ä¿äº¤æ˜“å®‰å…¨å’Œç³»ç»Ÿç¨³å®šã€‚

### 4.2 æŠ€æœ¯æ¶æ„å‡çº§

#### 4.2.1 æ ¸å¿ƒç»„ä»¶

1.  **`LiveTradingSystem`**:
    - ç³»ç»Ÿçš„"æ€»æŒ‡æŒ¥"ï¼Œè´Ÿè´£è°ƒåº¦æ‰€æœ‰æ¨¡å—
    - å®ç°ä¸»å¾ªç¯æ§åˆ¶ï¼Œåè°ƒå„ç»„ä»¶å·¥ä½œ
    - å¤„ç†ç³»ç»Ÿåˆå§‹åŒ–ã€è¿è¡Œå’Œå…³é—­æµç¨‹

2.  **`OKXAdapter`**:
    - ç³»ç»Ÿçš„"ç¿»è¯‘å®˜"ï¼Œè´Ÿè´£ä¸OKXäº¤æ˜“æ‰€APIé€šä¿¡
    - å®ç°REST APIå’ŒWebSocketè¿æ¥ç®¡ç†
    - å¤„ç†è¯·æ±‚é™æµã€é‡è¯•å’Œé”™è¯¯å¤„ç†
    - æä¾›ç»Ÿä¸€çš„æ¥å£ç»™ä¸Šå±‚ç»„ä»¶

3.  **`LiveAgent`**:
    - åŸºäºv2.5çš„Agentè®¾è®¡ï¼Œä½†é’ˆå¯¹å®ç›˜ç¯å¢ƒä¼˜åŒ–
    - å¢åŠ äº¤æ˜“å»¶è¿Ÿå’Œæ»‘ç‚¹ä¼°è®¡
    - å®ç°è®¢å•è·Ÿè¸ªå’ŒçŠ¶æ€ç®¡ç†

4.  **`OrderManager`**:
    - è´Ÿè´£è®¢å•çš„åˆ›å»ºã€ä¿®æ”¹ã€å–æ¶ˆå’Œè·Ÿè¸ª
    - å®ç°è®¢å•è¶…æ—¶å¤„ç†å’Œå¼‚å¸¸æ¢å¤
    - æä¾›è®¢å•å†å²è®°å½•å’Œç»Ÿè®¡åŠŸèƒ½

#### 4.2.2 å¤šå±‚é£æ§ä½“ç³»

1.  **äº‹å‰é£æ§**:
    - è´¦æˆ·ä½™é¢æ£€æŸ¥
    - äº¤æ˜“é™é¢éªŒè¯
    - ç­–ç•¥å‚æ•°æœ‰æ•ˆæ€§æ£€æŸ¥

2.  **äº‹ä¸­é£æ§**:
    - å®æ—¶äºæŸç›‘æ§
    - äº¤æ˜“é¢‘ç‡é™åˆ¶
    - å¼‚å¸¸äº¤æ˜“æ¨¡å¼æ£€æµ‹
    - ç´§æ€¥åœæ­¢æœºåˆ¶

3.  **äº‹åé£æ§**:
    - äº¤æ˜“ç»“æœåˆ†æ
    - æ€§èƒ½è¯„ä¼°å’Œé£é™©æŒ‡æ ‡è®¡ç®—
    - é£æ§è§„åˆ™è‡ªåŠ¨ä¼˜åŒ–

#### 4.2.3 åŒå¸‚åœºæ”¯æŒ

- **ç°è´§å¸‚åœº**: æä¾›ç¨³å®šçš„åŸºç¡€æ”¶ç›Šï¼Œé£é™©ç›¸å¯¹è¾ƒä½
- **åˆçº¦å¸‚åœº**: æä¾›æ æ†æ”¾å¤§æ”¶ç›Šçš„æœºä¼šï¼ŒåŒæ—¶æœ‰æ›´å¤§çš„é£é™©ç®¡ç†éœ€æ±‚
- **èµ„é‡‘åˆ†é…**: æ ¹æ®å¸‚åœºçŠ¶æ€åŠ¨æ€è°ƒæ•´ä¸¤ä¸ªå¸‚åœºçš„èµ„é‡‘åˆ†é…æ¯”ä¾‹
- **é£é™©éš”ç¦»**: ä¸¤ä¸ªå¸‚åœºçš„äº¤æ˜“å†³ç­–å’Œé£é™©æ§åˆ¶ç›¸å¯¹ç‹¬ç«‹

#### 4.2.4 ç›‘æ§ä¸æ—¥å¿—ç³»ç»Ÿ

- **å®æ—¶ç›‘æ§**: ç³»ç»ŸçŠ¶æ€ã€äº¤æ˜“æ‰§è¡Œã€æ€§èƒ½æŒ‡æ ‡çš„å®æ—¶ç›‘æ§
- **æ—¥å¿—ç³»ç»Ÿ**: åˆ†çº§æ—¥å¿—è®°å½•ï¼Œæ”¯æŒè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯å’Œé”™è¯¯è¿½è¸ª
- **å‘Šè­¦æœºåˆ¶**: å¼‚å¸¸æƒ…å†µè‡ªåŠ¨é€šçŸ¥ï¼ˆé‚®ä»¶ã€Telegramç­‰ï¼‰

### 4.3 æŠ€æœ¯å®ç°ç»†èŠ‚

#### 4.3.1 WebSocketå®æ—¶æ•°æ®å¤„ç†

```python
# WebSocketè¿æ¥ç®¡ç†ç¤ºä¾‹
class WebSocketManager:
    def __init__(self):
        self.ws = None
        self.reconnect_count = 0
        self.max_reconnect = 5
        self.last_ping_time = 0
        
    def connect(self, url, subscription_params):
        # å®ç°WebSocketè¿æ¥é€»è¾‘
        # å¤„ç†é‡è¿ã€å¿ƒè·³ç­‰æœºåˆ¶
        
    def process_message(self, message):
        # å®æ—¶æ•°æ®å¤„ç†
        # äº‹ä»¶åˆ†å‘åˆ°ç›¸åº”çš„å¤„ç†å‡½æ•°
```

#### 4.3.2 APIé™æµä¸é‡è¯•æœºåˆ¶

```python
# APIé™æµå®ç°ç¤ºä¾‹
class RateLimiter:
    def __init__(self, requests_per_minute):
        self.rate = requests_per_minute
        self.tokens = requests_per_minute
        self.last_refill_time = time.time()
    
    def acquire(self):
        # ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°APIé™æµ
        # ç¡®ä¿ä¸è¶…è¿‡äº¤æ˜“æ‰€çš„APIè°ƒç”¨é™åˆ¶
```

#### 4.3.3 å¼‚æ­¥å¤„ç†æ¶æ„

- ä½¿ç”¨Python asyncioå®ç°éé˜»å¡æ“ä½œ
- é‡‡ç”¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼å¤„ç†äº¤æ˜“ä¿¡å·
- å®ç°å¹¶å‘æ§åˆ¶ï¼Œé¿å…ç³»ç»Ÿèµ„æºè€—å°½

### 4.4 æ¨¡æ‹Ÿç›˜æµ‹è¯•ç»“æœ

- **è¿è¡Œæ—¶é—´**: 7å¤©è¿ç»­è¿è¡Œ
- **ç¨³å®šæ€§**: é›¶å´©æºƒï¼Œé›¶å¼‚å¸¸é€€å‡º
- **APIè°ƒç”¨æˆåŠŸç‡**: 99.8%
- **å¹³å‡å“åº”æ—¶é—´**: 150ms
- **è®¢å•æ‰§è¡ŒæˆåŠŸç‡**: 99.5%
- **æ¨¡æ‹Ÿç›˜è¡¨ç°**: ç¬¦åˆå›æµ‹é¢„æœŸï¼Œæ—¥æ”¶ç›Šæ³¢åŠ¨åœ¨åˆç†èŒƒå›´å†…

### 4.5 ç»“è®ºä¸ä¸‹ä¸€æ­¥

- **ç»“è®º**: **ç³»ç»Ÿå·²ç»å…·å¤‡åœ¨çœŸå®å¸‚åœºä¸­è¿è¡Œçš„èƒ½åŠ›**
- **æŠ€æœ¯æˆç†Ÿåº¦**: æ¶æ„è®¾è®¡åˆç†ï¼Œç»„ä»¶åŠŸèƒ½å®Œå–„ï¼Œå¼‚å¸¸å¤„ç†æœºåˆ¶æœ‰æ•ˆ

- **å¾…éªŒè¯**: 
  - **ç­–ç•¥æœ‰æ•ˆæ€§**: éœ€è¦æ›´é•¿æ—¶é—´çš„æ¨¡æ‹Ÿç›˜æˆ–å°é¢å®ç›˜æµ‹è¯•
  - **å»¶è¿Ÿå’Œæ»‘ç‚¹**: çœŸå®äº¤æ˜“ä¸­çš„ç½‘ç»œå»¶è¿Ÿå’Œäº¤æ˜“æ»‘ç‚¹å¯¹ç­–ç•¥çš„å½±å“
  - **æç«¯å¸‚åœº**: ç³»ç»Ÿåœ¨æç«¯å¸‚åœºæ³¢åŠ¨æƒ…å†µä¸‹çš„è¡¨ç°

- **ä¼˜åŒ–æ–¹å‘**:
  - è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„å®æ—¶æ€§å’Œå“åº”é€Ÿåº¦
  - å¢å¼ºå¼‚å¸¸æƒ…å†µçš„è‡ªåŠ¨æ¢å¤èƒ½åŠ›
  - ä¼˜åŒ–èµ„æºä½¿ç”¨æ•ˆç‡ï¼Œé™ä½è¿è¡Œæˆæœ¬

## 5. v3.0 DockeråŒ–æ¼”è¿›

### 5.1 DockeråŒ–çš„æ„ä¹‰

å°†Prometheus v3.0è¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæ˜¯ç³»ç»Ÿæ¼”è¿›è¿‡ç¨‹ä¸­çš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œä¸ºç³»ç»Ÿçš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œè¿ç»´æä¾›äº†åšå®åŸºç¡€ã€‚

### 5.2 DockeråŒ–æ¼”è¿›å†ç¨‹

1.  **éœ€æ±‚è¯†åˆ«é˜¶æ®µ**:
    - è¯†åˆ«ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼çš„ç—›ç‚¹ï¼šç¯å¢ƒä¸ä¸€è‡´ã€ä¾èµ–å†²çªã€éƒ¨ç½²å¤æ‚
    - ç¡®å®šå®¹å™¨åŒ–çš„ç›®æ ‡ï¼šç®€åŒ–éƒ¨ç½²ã€æé«˜å¯ç§»æ¤æ€§ã€å¢å¼ºå¯ç»´æŠ¤æ€§

2.  **è®¾è®¡é˜¶æ®µ**:
    - è®¾è®¡å®¹å™¨æ¶æ„ï¼šä¸»åº”ç”¨å®¹å™¨ã€ç›‘æ§å®¹å™¨ã€æ—¥å¿—å®¹å™¨
    - åˆ¶å®šé•œåƒæ„å»ºç­–ç•¥ï¼šå¤šé˜¶æ®µæ„å»ºï¼Œå‡å°é•œåƒä½“ç§¯
    - è®¾è®¡æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼šå·æŒ‚è½½é…ç½®ã€æ—¥å¿—å’Œæ•°æ®æ–‡ä»¶

3.  **å®ç°é˜¶æ®µ**:
    - åˆ›å»ºDockerfileï¼šå®šä¹‰åº”ç”¨ç¯å¢ƒå’Œæ„å»ºæ­¥éª¤
    - ç¼–å†™docker-compose.ymlï¼šç¼–æ’å¤šå®¹å™¨æœåŠ¡
    - å®ç°å¥åº·æ£€æŸ¥ï¼šç¡®ä¿å®¹å™¨è¿è¡ŒçŠ¶æ€å¯ç›‘æ§
    - é…ç½®èµ„æºé™åˆ¶ï¼šåˆç†åˆ†é…ç³»ç»Ÿèµ„æº

4.  **æµ‹è¯•ä¸ä¼˜åŒ–é˜¶æ®µ**:
    - æ€§èƒ½æµ‹è¯•ï¼šéªŒè¯å®¹å™¨åŒ–å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“
    - ç¨³å®šæ€§æµ‹è¯•ï¼šç¡®ä¿é•¿æ—¶é—´è¿è¡Œçš„ç¨³å®šæ€§
    - ä¼˜åŒ–é•œåƒï¼šå‡å°ä½“ç§¯ï¼Œæé«˜å¯åŠ¨é€Ÿåº¦

### 5.3 DockeråŒ–æ¶æ„

```mermaid
flowchart TD
    subgraph ä¸»æœºç³»ç»Ÿ
        A[Docker Engine] --> B[Docker Compose]
    end
    
    subgraph å®¹å™¨é›†ç¾¤
        B --> C[prometheus_app:v3.0]
        B --> D[prometheus_monitor]
        B --> E[prometheus_logs]
    end
    
    subgraph æ•°æ®æŒä¹…åŒ–
        F[config_volume] --> C
        G[logs_volume] --> C
        G --> D
        G --> E
        H[data_volume] --> C
    end
    
    subgraph å¤–éƒ¨è¿æ¥
        C --> I[OKX API]
        D --> J[ç›‘æ§é¢æ¿]
        E --> K[æ—¥å¿—èšåˆ]
    end
```

### 5.4 DockeråŒ–æ”¶ç›Š

- **éƒ¨ç½²ç®€åŒ–**: ä¸€é”®å¯åŠ¨å®Œæ•´ç³»ç»Ÿï¼Œé™ä½è¿ç»´é—¨æ§›
- **ç¯å¢ƒä¸€è‡´æ€§**: å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´
- **éš”ç¦»æ€§**: å„ç»„ä»¶ç›¸äº’ç‹¬ç«‹ï¼Œé¿å…ä¾èµ–å†²çª
- **å¯æ‰©å±•æ€§**: ä¾¿äºæ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡
- **ç‰ˆæœ¬ç®¡ç†**: æ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œå¿«é€Ÿå›æ»š
- **èµ„æºæ•ˆç‡**: åˆç†åˆ†é…å’Œé™åˆ¶èµ„æºä½¿ç”¨
- **å®‰å…¨æ€§**: å®¹å™¨éš”ç¦»æä¾›é¢å¤–çš„å®‰å…¨å±‚

### 5.5 Dockeréƒ¨ç½²é…ç½®

```yaml
# docker-compose.ymlæ ¸å¿ƒé…ç½®
version: '3.8'

services:
  prometheus:
    build: 
      context: .
      dockerfile: Dockerfile
    image: prometheus:v3.0
    container_name: prometheus_trading
    restart: unless-stopped
    volumes:
      - ./config:/app/config
      - ./logs:/app/logs
      - ./data:/app/data
    environment:
      - OKX_API_KEY=${OKX_API_KEY}
      - OKX_API_SECRET=${OKX_API_SECRET}
      - LOG_LEVEL=INFO
    healthcheck:
      test: ["CMD", "python", "/app/health_check.py"]
      interval: 1m
      timeout: 10s
      retries: 3
    resources:
      limits:
        memory: 2G
        cpus: '1.0'
```

---

## 7. æ¼”åŒ–è¿‡ç¨‹ä¸­çš„å…³é”®æ•™è®­

### 7.1 ç­–ç•¥å¼€å‘ç»éªŒ

1.  **å…ˆéªŒè¯ï¼Œå†ä¼˜åŒ–**: ä¸è¦ä¸€å¼€å§‹å°±è¿½æ±‚å®Œç¾ï¼Œå…ˆç”¨æœ€ç®€å•çš„åŸå‹éªŒè¯æ ¸å¿ƒæ€è·¯
    - ä»v1.0çš„ç®€å•åŠ¨é‡ç­–ç•¥å¼€å§‹ï¼ŒéªŒè¯äº†é—ä¼ ç®—æ³•çš„å¯è¡Œæ€§
    - é¿å…äº†è¿‡æ—©ä¼˜åŒ–å¸¦æ¥çš„å¤æ‚æ€§å’Œé£é™©

2.  **æ•°æ®é©±åŠ¨å†³ç­–**: æ¯æ¬¡ç­–ç•¥çš„é‡å¤§è°ƒæ•´ï¼Œéƒ½å¿…é¡»æœ‰å›æµ‹æ•°æ®çš„æ”¯æŒ
    - å¸‚åœºçŠ¶æ€æ£€æµ‹æœºåˆ¶çš„å¼•å…¥åŸºäºæ˜ç¡®çš„æ•°æ®é—®é¢˜å‘ç°
    - å›æµ‹ç»“æœéªŒè¯äº†æ¯æ¬¡é‡å¤§æ”¹è¿›çš„æœ‰æ•ˆæ€§

3.  **æ•¬ç•å¸‚åœº**: å¸‚åœºæ˜¯å¤æ‚å’Œä¸å¯é¢„æµ‹çš„ï¼Œé£æ§æ°¸è¿œæ˜¯ç¬¬ä¸€ä½
    - ä»v1.0åˆ°v3.0ï¼Œé£æ§ä½“ç³»ä¸æ–­å®Œå–„å’Œå¼ºåŒ–
    - å§‹ç»ˆå°†èµ„é‡‘å®‰å…¨æ”¾åœ¨ç­–ç•¥ä¼˜åŒ–ä¹‹ä¸Š

4.  **æ‹¥æŠ±å˜åŒ–**: å¸‚åœºç¯å¢ƒåœ¨ä¸æ–­å˜åŒ–ï¼Œç­–ç•¥ä¹Ÿéœ€è¦æŒç»­æ¼”åŒ–
    - å•ä¸€ç­–ç•¥æ— æ³•é•¿æœŸæœ‰æ•ˆï¼Œéœ€è¦ä¸æ–­é€‚åº”æ–°çš„å¸‚åœºç¯å¢ƒ
    - é—ä¼ ç®—æ³•çš„è¿›åŒ–æœºåˆ¶æä¾›äº†æŒç»­ä¼˜åŒ–çš„èƒ½åŠ›

### 7.2 å·¥ç¨‹å®è·µç»éªŒ

5.  **æ¨¡å—åŒ–è®¾è®¡**: è‰¯å¥½çš„æ¶æ„è®¾è®¡ï¼Œæ˜¯ç³»ç»Ÿèƒ½å¤ŸæŒç»­æ¼”åŒ–çš„åŸºç¡€
    - æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œå’Œæ¥å£å®šä¹‰
    - ä½è€¦åˆã€é«˜å†…èšçš„ç»„ä»¶è®¾è®¡

6.  **æ¸è¿›å¼æ¶æ„æ¼”è¿›**: ç³»ç»Ÿæ¶æ„éšç€åŠŸèƒ½éœ€æ±‚é€æ­¥ä¼˜åŒ–å’Œå®Œå–„
    - ä»ç®€å•çš„è„šæœ¬åˆ°å®Œæ•´çš„å¤šæ¨¡å—ç³»ç»Ÿ
    - æ¯ä¸ªç‰ˆæœ¬éƒ½ä¿ç•™å‘åå…¼å®¹æ€§ï¼Œç¡®ä¿å¹³æ»‘å‡çº§

7.  **å®¹å™¨åŒ–éƒ¨ç½²**: å°½æ—©è€ƒè™‘éƒ¨ç½²å’Œè¿ç»´éœ€æ±‚
    - v3.0å¼•å…¥Dockeræ”¯æŒï¼Œæå¤§ç®€åŒ–äº†éƒ¨ç½²å’Œè¿ç»´
    - æé«˜äº†ç³»ç»Ÿçš„å¯ç§»æ¤æ€§å’Œç¯å¢ƒä¸€è‡´æ€§

8.  **å…¨é¢ç›‘æ§**: å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
    - å®æ—¶äº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡
    - å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜

### 7.3 ç®¡ç†ç»éªŒ

9.  **è®°å½•ä¸€åˆ‡**: è¯¦ç»†è®°å½•æ¯æ¬¡å®éªŒçš„åŸå› ã€è¿‡ç¨‹å’Œç»“æœï¼Œæ˜¯æœªæ¥ä¼˜åŒ–çš„å®è´µè´¢å¯Œ
    - ç»´æŠ¤å®Œæ•´çš„å®éªŒæ—¥å¿—å’Œç‰ˆæœ¬å†å²
    - å»ºç«‹çŸ¥è¯†åº“ï¼Œç§¯ç´¯ç»éªŒå’Œæ•™è®­

10. **è®¾å®šæ˜ç¡®ç›®æ ‡**: æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰æ¸…æ™°çš„ç›®æ ‡å’Œå¯è¡¡é‡çš„æˆåŠŸæ ‡å‡†
    - é¿å…æ— æ–¹å‘çš„å¼€å‘å’Œä¼˜åŒ–
    - ç¡®ä¿å›¢é˜Ÿä¸“æ³¨äºå…³é”®é—®é¢˜çš„è§£å†³

11. **å¹³è¡¡åˆ›æ–°ä¸ç¨³å®š**: åœ¨è¿½æ±‚æ€§èƒ½æå‡çš„åŒæ—¶ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§
    - æ–°åŠŸèƒ½å…ˆåœ¨éš”ç¦»ç¯å¢ƒæµ‹è¯•ï¼Œå†é›†æˆåˆ°ä¸»ç³»ç»Ÿ
    - å»ºç«‹å®Œå–„çš„æµ‹è¯•å’ŒéªŒè¯æµç¨‹

## 8. æŠ€æœ¯å®ç°è·¯å¾„è¯¦è§£

### 8.1 æ ¸å¿ƒæŠ€æœ¯æ ˆæ¼”è¿›

| æŠ€æœ¯/å·¥å…· | v1.0 | v2.5 | v3.0 | v3.1 (è§„åˆ’) |
|---------|------|------|------|------------|
| **å¼€å‘è¯­è¨€** | Python 3.8 | Python 3.8 | Python 3.9 | Python 3.10 |
| **æ•°æ®å¤„ç†** | Pandas | Pandas, NumPy | Pandas, NumPy, asyncio | Pandas, NumPy, Dask |
| **APIé€šä¿¡** | - | - | OKX API SDK, WebSocket | å¤šäº¤æ˜“æ‰€API, GraphQL |
| **å®¹å™¨åŒ–** | - | - | Docker, Docker Compose | Kubernetes |
| **æœºå™¨å­¦ä¹ ** | ç®€å•å†³ç­–æ ‘ | éšæœºæ£®æ—, èšç±» | é›†æˆå­¦ä¹  | LLM, å¼ºåŒ–å­¦ä¹  |
| **ç›‘æ§** | åŸºç¡€æ—¥å¿— | ç»“æ„åŒ–æ—¥å¿— | Prometheus, Grafana | ELK Stack, åˆ†å¸ƒå¼è¿½è¸ª |

### 8.2 ä»£ç ç»“æ„æ¼”è¿›

```
# v1.0 - ç®€å•è„šæœ¬ç»“æ„
v1.0/
â”œâ”€â”€ backtest_engine.py      # å›æµ‹å¼•æ“
â”œâ”€â”€ genetic_optimizer.py    # é—ä¼ ä¼˜åŒ–å™¨
â”œâ”€â”€ simple_strategy.py      # ç®€å•åŠ¨é‡ç­–ç•¥
â”œâ”€â”€ data_processor.py       # æ•°æ®å¤„ç†
â””â”€â”€ config.py               # é…ç½®æ–‡ä»¶

# v2.5 - æ¨¡å—åŒ–ç»“æ„
v2.5/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ backtest_engine.py  # å›æµ‹å¼•æ“
â”‚   â””â”€â”€ genetic_optimizer.py # é—ä¼ ä¼˜åŒ–å™¨
â”œâ”€â”€ market/
â”‚   â””â”€â”€ market_regime_detector.py # å¸‚åœºçŠ¶æ€æ£€æµ‹
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ agent_manager.py    # Agentç®¡ç†
â”‚   â””â”€â”€ simple_agent.py     # ç®€å•Agent
â”œâ”€â”€ risk/
â”‚   â””â”€â”€ risk_manager.py     # é£é™©æ§åˆ¶
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ data_processor.py   # æ•°æ®å¤„ç†
â””â”€â”€ config.py               # é…ç½®æ–‡ä»¶

# v3.0 - å®Œæ•´ç³»ç»Ÿæ¶æ„
v3.0/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ live_trading_system.py # æ ¸å¿ƒæ§åˆ¶ç³»ç»Ÿ
â”‚   â””â”€â”€ main.py             # ç¨‹åºå…¥å£
â”œâ”€â”€ adapters/
â”‚   â””â”€â”€ okx_adapter.py      # OKXäº¤æ˜“æ‰€é€‚é…å™¨
â”œâ”€â”€ market/
â”‚   â”œâ”€â”€ market_regime_detector.py # å¸‚åœºçŠ¶æ€æ£€æµ‹
â”‚   â””â”€â”€ data_feed.py        # æ•°æ®é¦ˆé€
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ agent_manager.py    # Agentç®¡ç†
â”‚   â””â”€â”€ live_agent.py       # å®ç›˜Agent
â”œâ”€â”€ execution/
â”‚   â”œâ”€â”€ order_manager.py    # è®¢å•ç®¡ç†
â”‚   â””â”€â”€ position_manager.py # ä»“ä½ç®¡ç†
â”œâ”€â”€ risk/
â”‚   â”œâ”€â”€ risk_manager.py     # é£é™©æ§åˆ¶
â”‚   â””â”€â”€ risk_limits.py      # é£é™©é™åˆ¶é…ç½®
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ performance_tracker.py # æ€§èƒ½è·Ÿè¸ª
â”‚   â””â”€â”€ health_monitor.py   # å¥åº·ç›‘æ§
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ data_processor.py   # æ•°æ®å¤„ç†
â”‚   â””â”€â”€ logger.py           # æ—¥å¿—å·¥å…·
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ default_config.py   # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ custom_config.py    # è‡ªå®šä¹‰é…ç½®
â”œâ”€â”€ Dockerfile              # Dockeræ„å»ºæ–‡ä»¶
â””â”€â”€ docker-compose.yml      # Docker Composeé…ç½®
```

### 8.3 å…³é”®ç®—æ³•å®ç°

#### 8.3.1 å¸‚åœºçŠ¶æ€æ£€æµ‹ç®—æ³•

```python
class MarketRegimeDetector:
    def __init__(self):
        self.price_history = []
        self.atr_history = []
        self.adx_history = []
        self.rsi_history = []
    
    def update(self, price_data):
        # æ›´æ–°å†å²æ•°æ®
        # è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
        
    def detect_regime(self):
        # åŸºäºå¤šæŒ‡æ ‡èåˆè¿›è¡Œå¸‚åœºçŠ¶æ€åˆ†ç±»
        # è¿”å›: 'strong_bull', 'weak_bull', 'sideways', 'weak_bear', 'strong_bear'
```

#### 8.3.2 é—ä¼ ç®—æ³•å®ç°

```python
class GeneticOptimizer:
    def __init__(self, population_size=200, mutation_rate=0.1, crossover_rate=0.8):
        self.population_size = population_size
        self.mutation_rate = mutation_rate
        self.crossover_rate = crossover_rate
        self.population = []
    
    def initialize_population(self):
        # éšæœºç”Ÿæˆåˆå§‹ç§ç¾¤
        
    def evaluate_fitness(self, backtest_engine):
        # è¯„ä¼°æ¯ä¸ªä¸ªä½“çš„é€‚åº”åº¦ï¼ˆå›æµ‹è¡¨ç°ï¼‰
        
    def select_parents(self):
        # åŸºäºè½®ç›˜èµŒé€‰æ‹©æ³•é€‰æ‹©çˆ¶ä»£
        
    def crossover(self, parent1, parent2):
        # å•ç‚¹äº¤å‰ç”Ÿæˆå­ä»£
        
    def mutate(self, individual):
        # é«˜æ–¯å˜å¼‚äº§ç”Ÿå¤šæ ·æ€§
        
    def evolve(self, generations=50):
        # æ‰§è¡Œå¤šä»£è¿›åŒ–
        # è¿”å›æœ€ä¼˜ä¸ªä½“
```

#### 8.3.3 åŠ¨æ€èµ„é‡‘åˆ†é…ç®—æ³•

```python
def calculate_fund_allocation(market_regime, agent_performances):
    # æ ¹æ®å¸‚åœºçŠ¶æ€å’ŒAgentè¡¨ç°è®¡ç®—èµ„é‡‘åˆ†é…
    # ç‰›å¸‚: åå‘åšå¤šAgent
    # ç†Šå¸‚: åå‘åšç©ºAgent
    # éœ‡è¡å¸‚: é™ä½æ•´ä½“ä»“ä½ï¼Œå¢åŠ é˜²å¾¡æ€§Agent
    # è¿”å›æ¯ä¸ªAgentçš„èµ„é‡‘åˆ†é…æ¯”ä¾‹
```

## 9. æ€§èƒ½å¯¹æ¯”ä¸åˆ†æ

### 9.1 å„ç‰ˆæœ¬æ ¸å¿ƒæŒ‡æ ‡å¯¹æ¯”

| æŒ‡æ ‡ | v1.0 | v2.5 | v3.0 (æ¨¡æ‹Ÿç›˜) | è¡Œä¸šå¹³å‡ |
|------|------|------|--------------|--------|
| **å¹´åŒ–ROI** | 55% | 456.79% | ä¸å›æµ‹æ¥è¿‘ | 20-40% |
| **æœ€å¤§å›æ’¤** | 18% | 22% | <25% | 30-50% |
| **å¤æ™®æ¯”ç‡** | 1.2 | 3.8 | >3.5 | 0.8-1.5 |
| **èƒœç‡** | 52% | 62% | >60% | 45-55% |
| **ç›ˆäºæ¯”** | 1.5 | 2.8 | >2.5 | 1.2-1.8 |
| **äº¤æ˜“é¢‘ç‡** | æ¯2å¤©1ç¬” | æ¯3å¤©1ç¬” | ç±»ä¼¼å›æµ‹ | è§†ç­–ç•¥è€Œå®š |
| **å¸‚åœºé€‚åº”æ€§** | ä»…è¶‹åŠ¿å¸‚ | å…¨å¸‚åœºç±»å‹ | å…¨å¸‚åœºç±»å‹ | æœ‰é™ |
| **ç³»ç»Ÿç¨³å®šæ€§** | - | - | 99.9% | 95-99% |

### 9.2 æ€§èƒ½æå‡å› ç´ åˆ†æ

1.  **å¸‚åœºçŠ¶æ€æ£€æµ‹**: è´¡çŒ®çº¦70%çš„æ€§èƒ½æå‡
    - å‡†ç¡®è¯†åˆ«å¸‚åœºç¯å¢ƒï¼Œé¿å…é€†åŠ¿äº¤æ˜“
    - åŠ¨æ€è°ƒæ•´ç­–ç•¥å‚æ•°ï¼Œé€‚åº”ä¸åŒå¸‚åœº

2.  **å¤šAgentç³»ç»Ÿ**: è´¡çŒ®çº¦15%çš„æ€§èƒ½æå‡
    - ç­–ç•¥å¤šæ ·æ€§æé«˜ç³»ç»Ÿé²æ£’æ€§
    - ç«äº‰æœºåˆ¶ä¿ƒè¿›æŒç»­ä¼˜åŒ–

3.  **é£é™©æ§åˆ¶**: è´¡çŒ®çº¦10%çš„æ€§èƒ½æå‡
    - å‡å°‘ä¸å¿…è¦çš„äºæŸ
    - ä¿æŠ¤åˆ©æ¶¦ï¼Œé¿å…å¤§å¹…å›æ’¤

4.  **æŠ€æœ¯æ¶æ„ä¼˜åŒ–**: è´¡çŒ®çº¦5%çš„æ€§èƒ½æå‡
    - æé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦
    - å‡å°‘é”™è¯¯å’Œå¼‚å¸¸

### 9.3 ä¸åŒå¸‚åœºç¯å¢ƒä¸‹çš„è¡¨ç°

| å¸‚åœºç¯å¢ƒ | v1.0 | v2.5 | v3.0 |
|---------|------|------|------|
| **å¼ºç‰›å¸‚** | ä¼˜ | ä¼˜ | ä¼˜ |
| **å¼±ç‰›å¸‚** | è‰¯ | ä¼˜ | ä¼˜ |
| **éœ‡è¡å¸‚** | å·® | è‰¯ | è‰¯ |
| **å¼±ç†Šå¸‚** | å·® | ä¼˜ | ä¼˜ |
| **å¼ºç†Šå¸‚** | å·® | ä¼˜ | ä¼˜ |
| **å¿«é€Ÿè½¬æ¢æœŸ** | å·® | è‰¯ | ä¼˜ |

## 10. å‚è€ƒæ–‡çŒ®

[1] Holland, J. H. (1992). *Adaptation in Natural and Artificial Systems*. MIT Press.
[2] Goldberg, D. E. (1989). *Genetic Algorithms in Search, Optimization, and Machine Learning*. Addison-Wesley.
[3] Williams, J. (1992). Technical Analysis of the Financial Markets: A Comprehensive Guide to Trading Methods and Applications. New York Institute of Finance.
[4] Taleb, N. N. (2007). *The Black Swan: The Impact of the Highly Improbable*. Random House.
[5] Docker Documentation. (n.d.). Retrieved from https://docs.docker.com/
[6] OKX API Documentation. (n.d.). Retrieved from https://www.okx.com/docs/en/

---

*æœ¬æ–‡æ¡£ç”±Prometheuså¼€å‘å›¢é˜Ÿç»´æŠ¤*
*æœ€åæ›´æ–°: 2025-11-29*

---

## 6. æ¼”åŒ–è¿‡ç¨‹ä¸­çš„å…³é”®æ•™è®­

1.  **å…ˆéªŒè¯ï¼Œå†ä¼˜åŒ–**: ä¸è¦ä¸€å¼€å§‹å°±è¿½æ±‚å®Œç¾ï¼Œå…ˆç”¨æœ€ç®€å•çš„åŸå‹éªŒè¯æ ¸å¿ƒæ€è·¯ã€‚
2.  **æ•°æ®é©±åŠ¨å†³ç­–**: æ¯æ¬¡ç­–ç•¥çš„é‡å¤§è°ƒæ•´ï¼Œéƒ½å¿…é¡»æœ‰å›æµ‹æ•°æ®çš„æ”¯æŒã€‚
3.  **æ•¬ç•å¸‚åœº**: å¸‚åœºæ˜¯å¤æ‚å’Œä¸å¯é¢„æµ‹çš„ï¼Œé£æ§æ°¸è¿œæ˜¯ç¬¬ä¸€ä½ã€‚
4.  **æ¨¡å—åŒ–è®¾è®¡**: è‰¯å¥½çš„æ¶æ„è®¾è®¡ï¼Œæ˜¯ç³»ç»Ÿèƒ½å¤ŸæŒç»­æ¼”åŒ–çš„åŸºç¡€ã€‚
5.  **è®°å½•ä¸€åˆ‡**: è¯¦ç»†è®°å½•æ¯æ¬¡å®éªŒçš„åŸå› ã€è¿‡ç¨‹å’Œç»“æœï¼Œæ˜¯æœªæ¥ä¼˜åŒ–çš„å®è´µè´¢å¯Œã€‚

---

*æœ¬æ–‡æ¡£ç”±Manus AIç”Ÿæˆ*  
*æœ€åæ›´æ–°: 2025-11-29*
