# Prometheus V13 — Development Plan (Draft) v0 — 2026-01-10

Status: **DRAFT** (intended to be frozen in small increments; do not over-design).

This document is a **development plan**, not a theory essay:
- What we will build
- What we will not build
- What evidence we must produce
- When we stop

V13 positioning (inherits One-Page SSOT):
- NOT_MEASURABLE is a **valid world output**, not an engineering failure.
- No proxies into adjudication (no synthetic world evidence).
- Do not adapt rules to “keep system usable”.

References:
- V13 One-Page SSOT: `docs/v13/V13_SSOT_STARTUP_ONE_PAGE_V0_20260110.md`
- V13 Capture Window minimal contract (very hard freeze; 3 textual facts files): `docs/v13/V13_SSOT_CAPTURE_WINDOW_MIN_CONTRACT_V0_20260110.md`
- V12 Survival Space SSOT (fail-closed, no L_liq fallback): `docs/v12/V12_SSOT_SURVIVAL_SPACE_EM_V1_20260108.md`
- V12 E-liquidity gate (coverage + hard ban on last_px-spread synthesis): `docs/v12/V12_GATE_E_LIQUIDITY_MEASURABILITY_V0_20260109.md`
- Provenance gate (expected_source=orderbook): `tools/v12/verify_orderbook_e_contract_provenance_gate_v0.py`

---

## 0) Executive summary (one paragraph)

V13 accepts that long-horizon replay adjudication may be impossible in this world. Therefore V13’s core build is a **real-time capture → replay dataset → fail-closed verification → minimal adjudication** loop, where “world silence / refusal / drift” are first-class outputs and must be archived and reported without value ranking.

---

## 1) Goals (frozen intentions)

- **G1 — Build a real-time evidence pipeline** that can capture the world when it is willing to be observed:
  - order-book L1 (bid/ask) + trades (as provenance)
  - strict JSONL evidence, reconnect events, gaps, coverage stats

Execution translation (team internal, V13-specific):
- “We are testing whether the world is willing to be observed continuously for 7 days.”
  - In the first 48–72h, do not optimize for coverage thresholds.
  - The only primary question: **is the world cooperating (continuous observability)?**
  - If not, that is a first-class finding, not a failure.

- **G2 — Build a replay dataset from captured evidence** (new era; do not mix with 2021–2022):
  - `market_snapshot.jsonl` includes real `bid_px_1/ask_px_1`
  - provenance manifest is auditable (no synthesis)
  - framing: dataset is an **archived observation attempt**, not a guaranteed reusable research object
    - avoid over-cleaning “for future reuse”
    - avoid aligning to old replay eras by introducing extra assumptions

- **G3 — Fail-closed gates are first a seismograph (recording tool), then a constitution**:
  - provenance gate (G0): orderbook source must be real
  - coverage gate (G1): bid/ask coverage must be quantified; PASS/NOT_MEASURABLE/FAIL semantics frozen
  - drift gate (G2): API schema/field drift is detected and recorded as “world drift”
  - interpretation rule (V13):
    - gate FAIL / NOT_MEASURABLE is not “this path is bad”
    - it is “the world refused / broke / drifted here”

- **G4 — Minimal adjudication demo** (probe only; de-emphasize / may be delayed):
  - run minimal `full` Survival Space runs against the new dataset and verify evidence chain
  - treat as “can adjudication be triggered at all in this window?”, not as a validation target
  - the outcome may be PASS, NOT_MEASURABLE, or drift; all are acceptable outputs

---

## 2) Non-goals (hard bans)

- **NG1**: Do not fabricate bid/ask from `last_px` or any fixed spread (synthetic order-book).
- **NG2**: Do not use trade-derived quotes as order-book restoration.
- **NG3**: Do not modify adjudication logic to accommodate missing evidence (“keep system usable”).
- **NG4**: Do not chase stable continuous world-pressure gauges as a success metric.
- **NG5**: Do not claim cross-era comparability (captured 2026 dataset is not 2021–2022 replay).

---

## 3) System boundary / repo boundary

- Research repo responsibility:
  - SSOT / pre-reg / acceptance gates
  - verifiers / summarizers
  - immutable archives of artifacts and blocker reports

- Quant repo responsibility:
  - real-time capture/recorder implementation
  - dataset builder from captured evidence
  - minimal runner execution under frozen contracts

Interaction rule:
- Any Quant-side work must be driven by **explicit delivery instruction files** in Research (absolute paths, do-or-die gates).

---

## 4) Workstreams (parallel, but freeze outputs before scaling)

### WS-A: Real-time capture (books5 + trades)

Deliverables:
- Recorder that writes:
  - `raw_books5.jsonl`
  - `raw_trades.jsonl`
  - `recorder_events.jsonl` (connect/disconnect, backoff, errors, throttling)
- Capture manifest:
  - endpoints, subscription params, sampling policy, gap policy, machine clock policy

Acceptance:
- 7-day continuous run produces non-empty evidence; all gaps explicitly recorded.

Stop conditions:
- If API becomes unstable or schema drifts, record as drift output; do not “paper over”.

### WS-B: Dataset builder (live capture → replay dataset)

Deliverables:
- `dataset_replay_v2_live_orderbook_*` dataset_dir with:
  - `market_snapshot.jsonl` (1m ticks)
  - `dataset_build_manifest.json` with `orderbook_provenance` + coverage stats

Acceptance gates (Research-run):
- G0 provenance gate: PASS (expected_source=orderbook)
- G1 coverage gate: PASS (coverage >= 0.95, N>=1000)

### WS-C: Minimal adjudication demo (evidence integrity only)

Deliverables:
- Minimal `full` runs (3 seeds) on new dataset
- Research verifications PASS

Acceptance:
- `verify_survival_space_em_v1.py` PASS
- No forbidden fallback reason codes

Note (V13 pacing):
- WS-C should not pull schedule pressure from WS-A/WS-B. If capture is unstable, WS-C is intentionally postponed.

### WS-D: “World drift / silence registry” (V13-native reporting)

Deliverables:
- A small, append-only registry of:
  - drift events (schema change, endpoint behavior change, missing fields)
  - silence/refusal events (NOT_MEASURABLE gates)
  - their evidence pointers

Acceptance:
- Every blocker has a file under `docs/v13/artifacts/` with a minimal structured report.

Mandatory logging protocol (lightweight, no interpretation):
- See `docs/v13/V13_PHENOMENA_LOG_PROTOCOL_V0_20260110.md`
Hard freeze reminder:
- Per window, only the minimal textual artifacts are frozen; do not freeze directory depth or raw/binary requirements:
  - `docs/v13/V13_SSOT_CAPTURE_WINDOW_MIN_CONTRACT_V0_20260110.md`

---

## 5) Milestones (minimum viable, do-or-die)

### M0 — V13 documents bootstrap (this week)
- One-page SSOT exists (done)
- Dev plan v0 exists (this doc)
- Index entry exists

### M1 — Recorder deployed and running (T+1~2 days)
- Recorder runs for 24h without silent data loss
- Captures reconnect/gap events

### M2 — 7-day capture complete (T+7~10 days)
- Evidence archived
- Coverage stats computed

### M3 — Dataset build + gates (T+8~12 days)
- Build dataset_dir
- Run G0 + G1 (PASS required)

### M4 — Minimal adjudication demo (T+9~14 days)
- 3 seeds full runs + Research verifier PASS
- Archive all outputs

Pacing note:
- M4 is allowed to slip without being labeled a failure. The primary success of early V13 is **observability + archival**, not adjudication.

If any milestone fails due to world refusal/drift:
- record it; do not “fix” by proxying; decide whether to retry with a new capture window.

---

## 6) Acceptance artifacts checklist (what must exist on disk)

For any successful capture→dataset→run chain:
- `live_capture_root/` with raw JSONL + events JSONL
- `dataset_dir/market_snapshot.jsonl`
- `dataset_dir/dataset_build_manifest.json`
- Research gate reports:
  - provenance gate json
  - coverage gate json
- `runs_root/.../run_dir` (3 seeds)
- Research verifier reports for each run_dir
- A short README pointing to all of the above (immutable archive)

---

## 7) Immediate next action (what we do now)

- Proceed with **Trial-12** (real-time order-book capture) exactly as pre-registered:
  - Pre-reg: `docs/v12/pre_reg/V12_TRIAL12_REALTIME_ORDERBOOK_CAPTURE_E_CONTRACT_V0_20260109.md`
  - Delivery: `docs/v12/deliveries/V12_TRIAL12_REALTIME_ORDERBOOK_CAPTURE_E_CONTRACT_EXEC_20260109.md`

Then, once the first 24h capture exists, we add V13-native:
- drift/silence registry (WS-D) and a tiny summarizer (descriptive only).

