# å®Œå…¨è‡ªä¸»äº¤æ˜“æ¨¡å¼ - å®æ–½è®°å½•

## ğŸ“… æ—¥æœŸ
2025-12-02

---

## ğŸ¯ **æ ¸å¿ƒç†å¿µ**

> **"æ—¢ç„¶èµ‹äºˆäº†Agentå®Œå…¨è‡ªä¸»æƒï¼Œå°±ä¸åº”è¯¥å¹²é¢„å®ƒçš„å†³ç­–ï¼ŒSupervisoråªéœ€è¦åšå¥½ç›‘ç£å·¥ä½œ"**
> 
> â€”â€” ç”¨æˆ·ç†å¿µ

---

## ğŸ”„ **æ¶æ„æ¼”å˜**

### **é˜¶æ®µ1ï¼šé›†ä½“å…±è¯†æ¨¡å¼ï¼ˆå·²åºŸå¼ƒï¼‰**
```
10ä¸ªAgentå†³ç­– â†’ æŠ•ç¥¨ â†’ 30%æ”¯æŒæ‰èƒ½äº¤æ˜“
é—®é¢˜: å¹²é¢„Agentå†³ç­–ï¼Œä¸è‡ªä¸»ç†å¿µå†²çª
```

### **é˜¶æ®µ2ï¼šå®Œå…¨è‡ªä¸»æ¨¡å¼ï¼ˆå½“å‰ï¼‰**
```
10ä¸ªAgentå†³ç­– â†’ æ¯ä¸ªAgentç‹¬ç«‹äº¤æ˜“ â†’ Supervisorç›‘ç£
ç†å¿µ: çœŸæ­£çš„è‡ªä¸»ï¼Œæ— å¹²é¢„
```

---

## ğŸ—ï¸ **æ–°æ¶æ„è®¾è®¡**

### **æ ¸å¿ƒåŸåˆ™**

1. **Agentå®Œå…¨è‡ªä¸»**
   - æ¯ä¸ªAgentç‹¬ç«‹å†³ç­–
   - æ¯ä¸ªAgentç‹¬ç«‹ä¸‹å•
   - ä¸éœ€è¦æŠ•ç¥¨æˆ–å…±è¯†
   - ä¸å—å…¶ä»–Agentå½±å“

2. **Supervisoråªç›‘ç£**
   - ç»Ÿè®¡æ¯ä¸ªAgentçš„è™šæ‹Ÿè¡¨ç°
   - ç»Ÿè®¡æ¯ä¸ªAgentçš„å®é™…è¡¨ç°
   - å‘å¸ƒç›‘ç£æŠ¥å‘Š
   - é¢„è­¦é£é™©
   - **ä¸å¹²é¢„ä»»ä½•äº¤æ˜“å†³ç­–** âœ…

3. **èŒè´£æ¸…æ™°**
   - PrometheusLiveTrading: ç³»ç»Ÿåè°ƒ
   - Supervisor: ç›‘ç£ç»Ÿè®¡
   - Agent: ç‹¬ç«‹äº¤æ˜“

---

## ğŸ’» **å®æ–½è¯¦æƒ…**

### **æ–°å¢æ–¹æ³•**

#### **`_agent_independent_trade()`**
å•ä¸ªAgentç‹¬ç«‹æ‰§è¡Œå®é™…äº¤æ˜“

```python
def _agent_independent_trade(self, agent_id, signal, confidence, current_price):
    """
    å•ä¸ªAgentç‹¬ç«‹æ‰§è¡Œå®é™…äº¤æ˜“ï¼ˆå®Œå…¨è‡ªä¸»ï¼‰
    
    Args:
        agent_id: Agent ID
        signal: äº¤æ˜“ä¿¡å· ('buy' or 'sell')
        confidence: ä¿¡å¿ƒåº¦
        current_price: å½“å‰ä»·æ ¼
    """
    if signal == 'buy':
        # æ£€æŸ¥è¯¥Agentæ˜¯å¦å·²æœ‰æŒä»“
        if not agent_has_position:
            # Agentç‹¬ç«‹å¼€ä»“ï¼ˆ0.001 BTCï¼‰
            order = self.okx.place_market_order(...)
            print(f"âœ… {agent_id}: å®é™…å¼€å¤š 0.001 BTC")
    
    elif signal == 'sell':
        # æ£€æŸ¥è¯¥Agentæ˜¯å¦æœ‰æŒä»“
        if agent_positions:
            # Agentç‹¬ç«‹å¹³ä»“
            order = self.okx.place_market_order(...)
            print(f"âœ… {agent_id}: å®é™…å¹³ä»“")
```

---

### **ä¿®æ”¹çš„æ–¹æ³•**

#### **`_agents_autonomous_decide_and_execute()`**

**ä¿®æ”¹å‰ï¼ˆä»£è¡¨æ€§äº¤æ˜“ï¼‰**ï¼š
```python
# è™šæ‹Ÿæ‰§è¡Œ
self._execute_virtual_trades(agent_decisions, current_price)

# å®é™…æ‰§è¡Œ1ç¬”ä»£è¡¨æ€§äº¤æ˜“ï¼ˆå¹²é¢„ï¼‰
self._execute_representative_trade(buy_agents, sell_agents, current_price)
```

**ä¿®æ”¹åï¼ˆå®Œå…¨è‡ªä¸»ï¼‰**ï¼š
```python
# 1. è™šæ‹Ÿæ‰§è¡Œï¼ˆSupervisorç»Ÿè®¡ï¼‰
self._execute_virtual_trades(agent_decisions, current_price)

# 2. å®é™…æ‰§è¡Œï¼šæ¯ä¸ªAgentç‹¬ç«‹äº¤æ˜“ï¼ˆæ— å¹²é¢„ï¼‰
for decision in agent_decisions:
    if decision['signal']:
        self._agent_independent_trade(
            agent_id=decision['agent_id'],
            signal=decision['signal'],
            confidence=decision['confidence'],
            current_price=current_price
        )
```

---

### **åºŸå¼ƒçš„æ–¹æ³•**

#### **`_execute_representative_trade()`** âŒ

æ­¤æ–¹æ³•ä»£è¡¨"ä»£è¡¨æ€§äº¤æ˜“"é€»è¾‘ï¼Œå·²è¢«å®Œå…¨è‡ªä¸»æ¨¡å¼å–ä»£ã€‚

ä¿ç•™ç©ºå®ç°ç”¨äºå‘åå…¼å®¹ï¼Œä½†ä¸å†æ‰§è¡Œä»»ä½•é€»è¾‘ã€‚

---

## ğŸ“Š **æ•ˆæœå¯¹æ¯”**

### **åœºæ™¯ï¼š10ä¸ªAgentå†³ç­–ä¸åŒ**

```
Agent_01: ä¹°å…¥ (ä¿¡å¿ƒ0.8)
Agent_02: ä¹°å…¥ (ä¿¡å¿ƒ0.7)
Agent_03: ä¹°å…¥ (ä¿¡å¿ƒ0.6)
Agent_04: å–å‡º (ä¿¡å¿ƒ0.7)
Agent_05: å–å‡º (ä¿¡å¿ƒ0.8)
Agent_06: è§‚æœ›
Agent_07: ä¹°å…¥ (ä¿¡å¿ƒ0.5)
Agent_08: è§‚æœ›
Agent_09: ä¹°å…¥ (ä¿¡å¿ƒ0.6)
Agent_10: è§‚æœ›
```

#### **åŸä»£è¡¨æ€§äº¤æ˜“æ¨¡å¼**
```
ç»Ÿè®¡: 5ä¹° / 2å– / 3è§‚æœ›
â†’ å› ä¸º5ä¸ªAgentæ”¯æŒä¹°å…¥ï¼ˆå¤šæ•°ï¼‰
â†’ å®é™…æ‰§è¡Œ: BUY 0.01 BTCï¼ˆ1ç¬”ï¼‰
â†’ 2ä¸ªAgentçš„å–å‡ºå†³ç­–è¢«å¿½ç•¥ âŒ

ç»“æœ: å¹²é¢„äº†Agentå†³ç­–
```

#### **å®Œå…¨è‡ªä¸»æ¨¡å¼**
```
Agent_01: å®é™…å¼€å¤š 0.001 BTC âœ…
Agent_02: å®é™…å¼€å¤š 0.001 BTC âœ…
Agent_03: å®é™…å¼€å¤š 0.001 BTC âœ…
Agent_04: å®é™…å¹³ä»“ï¼ˆå¦‚æœ‰æŒä»“ï¼‰âœ…
Agent_05: å®é™…å¹³ä»“ï¼ˆå¦‚æœ‰æŒä»“ï¼‰âœ…
Agent_06: æ— äº¤æ˜“ âœ…
Agent_07: å®é™…å¼€å¤š 0.001 BTC âœ…
Agent_08: æ— äº¤æ˜“ âœ…
Agent_09: å®é™…å¼€å¤š 0.001 BTC âœ…
Agent_10: æ— äº¤æ˜“ âœ…

æ€»æŒä»“: 5 Ã— 0.001 = 0.005 BTC
ï¼ˆå¦‚æœAgent_04å’Œ05æœ‰æŒä»“åˆ™æ›´å°‘ï¼‰

ç»“æœ: æ¯ä¸ªAgentå†³ç­–éƒ½ä½“ç° âœ…
      æ— å¹²é¢„ âœ…
```

---

## ğŸ¯ **å…³é”®æ”¹è¿›**

### **1. çœŸæ­£çš„è‡ªä¸»å†³ç­–**
- âœ… æ¯ä¸ªAgentç‹¬ç«‹ä¸‹å•
- âœ… ä¸éœ€è¦æŠ•ç¥¨æˆ–å…±è¯†
- âœ… å†³ç­–ç«‹å³æ‰§è¡Œ

### **2. Supervisorè§’è‰²æ˜ç¡®**
- âœ… åªç›‘ç£ï¼Œä¸å¹²é¢„
- âœ… ç»Ÿè®¡è™šæ‹Ÿè¡¨ç°
- âœ… ç»Ÿè®¡å®é™…è¡¨ç°
- âœ… å‘å¸ƒç›‘ç£æŠ¥å‘Š

### **3. é£é™©åˆ†æ•£**
- âœ… æ¯ä¸ªAgentåªä¸‹å°å•ï¼ˆ0.001 BTCï¼‰
- âœ… æ€»æŒä»“ = Agentæ•°é‡ Ã— 0.001
- âœ… æœ€å¤š 10 Ã— 0.001 = 0.01 BTC

### **4. å¯è¿½è¸ªæ€§**
- âœ… å¯è¯†åˆ«æ¯ä¸ªAgentçš„å®é™…è®¢å•
- âœ… å¯å¯¹æ¯”è™šæ‹Ÿvså®é™…è¡¨ç°
- âœ… å¯è¯„ä¼°Agentå†³ç­–è´¨é‡

---

## ğŸ“ **é…ç½®å‚æ•°**

### **æ¯ä¸ªAgentä»“ä½å¤§å°**
```python
amount = 0.001  # æ¯ä¸ªAgentå›ºå®š 0.001 BTC
```

**è¯´æ˜**ï¼š
- æ€»èµ„é‡‘å‡è®¾: 10,000 USDT
- BTCä»·æ ¼å‡è®¾: 90,000 USDT
- æ¯ä¸ªAgentæœ€å¤§æŒä»“: 90 USDT (ä¸åˆ°1%)
- 10ä¸ªAgentå…¨éƒ¨æŒä»“: 900 USDT (9%)

**é£é™©æ§åˆ¶**ï¼š
- âœ… å•ä¸ªAgentå½±å“å°ï¼ˆ<1%ï¼‰
- âœ… æ€»æŒä»“å¯æ§ï¼ˆ<10%ï¼‰
- âœ… ä»ç•™æœ‰90%èµ„é‡‘å¤‡ç”¨

---

## ğŸ§ª **æµ‹è¯•è¦ç‚¹**

### **è§‚å¯ŸæŒ‡æ ‡**

1. **Agentäº¤æ˜“ç‹¬ç«‹æ€§**
   - æ¯ä¸ªAgentæ˜¯å¦èƒ½ç‹¬ç«‹ä¸‹å•ï¼Ÿ
   - æ˜¯å¦è¿˜æœ‰"æœªè¾¾æˆå…±è¯†"æç¤ºï¼Ÿ
   - å°‘æ•°æ´¾å†³ç­–æ˜¯å¦è¢«æ‰§è¡Œï¼Ÿ

2. **æŒä»“ç®¡ç†**
   - æ€»æŒä»“æ•°é‡ï¼ˆåº”è¯¥æ˜¯Agentæ•°é‡ Ã— 0.001ï¼‰
   - æ¯ä¸ªAgentçš„æŒä»“æ˜¯å¦ç‹¬ç«‹ï¼Ÿ
   - å¹³ä»“æ˜¯å¦æ­£ç¡®ï¼Ÿ

3. **SupervisoræŠ¥å‘Š**
   - è™šæ‹Ÿè¡¨ç°ç»Ÿè®¡
   - å®é™…è¡¨ç°å¯¹æ¯”
   - Agentæ’å

4. **é£é™©æ§åˆ¶**
   - æ€»æŒä»“æ˜¯å¦å¯æ§ï¼Ÿ
   - å•ä¸ªAgentæŒä»“æ˜¯å¦åˆç†ï¼Ÿ
   - æ˜¯å¦æœ‰æ„å¤–çš„å¤§é¢è®¢å•ï¼Ÿ

---

### **é¢„æœŸæ—¥å¿—**

```
ğŸ”„ å‘¨æœŸ 5 | 23:45:30
======================================================================

ğŸ“Š å½“å‰ä»·æ ¼: $90,500.00

ğŸ‘ï¸  ã€Supervisorã€‘å¸‚åœºåˆ†æ
   è¶‹åŠ¿: ä¸Šæ¶¨
   æ¶¨è·Œå¹…: 2.5%

ğŸ¤– ã€Agentsã€‘è‡ªä¸»å†³ç­–æ¨¡å¼

   ğŸ“Š Agentå†³ç­–åˆ†å¸ƒ:
      ğŸŸ¢ åšå¤š: 5ä¸ªAgent
      ğŸ”´ åšç©º/å¹³ä»“: 2ä¸ªAgent
      âšª è§‚æœ›: 3ä¸ªAgent

   ğŸ“‹ ä»£è¡¨æ€§Agentå†³ç­–:
      ğŸŸ¢ LiveAgent_01: open_long â†’ buy (ä¿¡å¿ƒ:0.75)
      ğŸŸ¢ LiveAgent_02: open_long â†’ buy (ä¿¡å¿ƒ:0.80)
      ğŸ”´ LiveAgent_03: reduce_risk â†’ sell (ä¿¡å¿ƒ:0.70)
      âšª LiveAgent_04: adjust_strategy â†’ hold (ä¿¡å¿ƒ:0.65)
      ğŸŸ¢ LiveAgent_05: analyze_opportunity â†’ buy (ä¿¡å¿ƒ:0.68)
      ... è¿˜æœ‰5ä¸ªAgent

ğŸ’¼ ã€å®é™…äº¤æ˜“æ‰§è¡Œã€‘å®Œå…¨è‡ªä¸»æ¨¡å¼
      âœ… LiveAgent_01: å®é™…å¼€å¤š 0.001 BTC (ä¿¡å¿ƒ:0.75)
      âœ… LiveAgent_02: å®é™…å¼€å¤š 0.001 BTC (ä¿¡å¿ƒ:0.80)
      âœ… LiveAgent_03: å®é™…å¹³ä»“ 0.001 BTC (ä¿¡å¿ƒ:0.70)
      âœ… LiveAgent_05: å®é™…å¼€å¤š 0.001 BTC (ä¿¡å¿ƒ:0.68)
      âœ… LiveAgent_07: å®é™…å¼€å¤š 0.001 BTC (ä¿¡å¿ƒ:0.72)
   ğŸ“Š 5ä¸ªAgentæ‰§è¡Œäº†å®é™…äº¤æ˜“

---

æ¯5ä¸ªå‘¨æœŸï¼ŒSupervisorå‘å¸ƒæŠ¥å‘Š:
==============================================================
ğŸ“Š Agentè¡¨ç°æ’åï¼ˆè™šæ‹Ÿï¼‰
==============================================================
   1. LiveAgent_02: èµ„é‡‘$10,280.00 (+2.8%), èƒœç‡80%, äº¤æ˜“5ç¬”
   2. LiveAgent_05: èµ„é‡‘$10,150.00 (+1.5%), èƒœç‡75%, äº¤æ˜“4ç¬”
   ...

==============================================================
ğŸ“Š Agentå®é™…äº¤æ˜“ç»Ÿè®¡
==============================================================
   1. LiveAgent_02: å®é™…äº¤æ˜“5ç¬”, å®é™…ç›ˆåˆ©$28.00
   2. LiveAgent_05: å®é™…äº¤æ˜“4ç¬”, å®é™…ç›ˆåˆ©$15.00
   ...
==============================================================
```

---

## âš ï¸ **æ½œåœ¨é£é™©ä¸å¯¹ç­–**

### **é£é™©1ï¼šæŒä»“è¿‡å¤š**
**ç°è±¡**ï¼š10ä¸ªAgentå…¨éƒ¨åšå¤š â†’ 0.01 BTCæŒä»“

**å¯¹ç­–**ï¼š
- å·²æ§åˆ¶ï¼šæ¯ä¸ªAgentåª0.001 BTC
- æ€»æŒä»“æœ€å¤š0.01 BTCï¼ˆçº¦900 USDTï¼‰
- å æ€»èµ„é‡‘<10%ï¼Œå¯æ¥å—

---

### **é£é™©2ï¼šè®¢å•ç®¡ç†å¤æ‚**
**ç°è±¡**ï¼š10ä¸ªAgent = 10ä¸ªç‹¬ç«‹è®¢å•

**å¯¹ç­–**ï¼š
- OKXæ”¯æŒå¤šè®¢å•ç®¡ç†
- å¯é€šè¿‡tagæ ‡è®°åŒºåˆ†
- Supervisorç»Ÿä¸€ç›‘ç£

---

### **é£é™©3ï¼šäº¤æ˜“æˆæœ¬**
**ç°è±¡**ï¼šè®¢å•æ•°é‡å¢åŠ  â†’ æ‰‹ç»­è´¹å¢åŠ 

**å¯¹ç­–**ï¼š
- æ¨¡æ‹Ÿç›˜æ— æ‰‹ç»­è´¹
- å®ç›˜éœ€è¯„ä¼°æˆæœ¬
- å¯è®¾ç½®æœ€å°äº¤æ˜“é—´éš”

---

## ğŸŠ **æ€»ç»“**

### **æ ¸å¿ƒæ”¹è¿›**
ä»"ä»£è¡¨æ€§äº¤æ˜“"åˆ°"å®Œå…¨è‡ªä¸»äº¤æ˜“"

### **ç†å¿µå‡çº§**
- âŒ é›†ä½“å†³ç­–ã€å¹²é¢„Agent
- âœ… å®Œå…¨è‡ªä¸»ã€Supervisorç›‘ç£

### **å®æ–½çŠ¶æ€**
âœ… å®Œæˆï¼Œå¯ç«‹å³æµ‹è¯•

### **æµ‹è¯•é‡ç‚¹**
1. Agentæ˜¯å¦çœŸæ­£ç‹¬ç«‹äº¤æ˜“
2. Supervisoræ˜¯å¦åªç›‘ç£ä¸å¹²é¢„
3. é£é™©æ˜¯å¦å¯æ§
4. è¡¨ç°ç»Ÿè®¡æ˜¯å¦å‡†ç¡®

---

**å®æ–½å®Œæˆæ—¶é—´**ï¼š2025-12-02  
**å®æ–½çŠ¶æ€**ï¼šâœ… å®Œæˆ  
**ä¿®æ”¹æ–‡ä»¶**ï¼š`examples/v4_okx_paper_trading.py`  
**æ–°å¢æ–¹æ³•**ï¼š`_agent_independent_trade()`  
**åºŸå¼ƒæ–¹æ³•**ï¼š`_execute_representative_trade()`

