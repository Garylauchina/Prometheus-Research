# åŒè´¦ç°¿ç³»ç»Ÿ - å®Œæ•´è®¾è®¡æ–‡æ¡£

## ðŸ“… æ—¥æœŸ
2025-12-02

---

## ðŸŽ¯ **è®¾è®¡ç†å¿µ**

> **"è´¦æˆ·ç³»ç»Ÿä¸­åº”è¯¥æœ‰ä¸¤ç±»è´¦ç°¿ï¼šå…¬å…±è´¦ç°¿åªæœ‰ä¸€æœ¬ç”±Supervisorç®¡ç†ï¼Œç§æœ‰è´¦ç°¿æ¯ä¸ªAgentä¸€æœ¬è‡ªå·±ç®¡ç†ã€‚Agentæ­»äº¡æ—¶éœ€è¦å½’æ¡£ï¼Œé¿å…å…¬å…±è´¦ç°¿è¿‡äºŽåºžå¤§ã€‚"**
> 
> â€”â€” ç”¨æˆ·æ ¸å¿ƒç†å¿µ

---

## ðŸ¦ **åŒè´¦ç°¿æž¶æž„**

### **ç±»æ¯”ï¼šé“¶è¡Œç³»ç»Ÿ**

```
é“¶è¡Œï¼ˆSupervisorï¼‰:
  â””â”€ æ€»è´¦æœ¬ï¼ˆPublicLedgerï¼‰
      â”œâ”€ è®°å½•æ‰€æœ‰å®¢æˆ·äº¤æ˜“
      â”œâ”€ ç›‘ç£ã€å®¡è®¡
      â”œâ”€ ç»Ÿè®¡ã€æŠ¥å‘Š
      â””â”€ å®¢æˆ·å½’æ¡£

å®¢æˆ·ï¼ˆAgentï¼‰:
  â””â”€ å­˜æŠ˜/Appï¼ˆPrivateLedgerï¼‰
      â”œâ”€ æŸ¥çœ‹è‡ªå·±ä½™é¢
      â”œâ”€ æŸ¥çœ‹è‡ªå·±äº¤æ˜“
      â”œâ”€ å†³å®šæ˜¯å¦äº¤æ˜“
      â””â”€ æäº¤ç”³è¯·
```

---

## ðŸ—ï¸ **ç³»ç»Ÿæž¶æž„**

### **ä¸‰å±‚ç»“æž„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PublicLedger (å…¬å…±è´¦ç°¿)                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  ðŸ“š åªæœ‰1æœ¬                                 â”‚
â”‚  ðŸ‘ï¸  Supervisorç®¡ç†                         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                            â”‚
â”‚  èŒè´£ï¼š                                     â”‚
â”‚  â”œâ”€ è®°å½•æ‰€æœ‰Agentçš„äº¤æ˜“                     â”‚
â”‚  â”œâ”€ ç›‘ç£ã€å®¡è®¡ã€ç»Ÿè®¡                        â”‚
â”‚  â”œâ”€ Agentè¡¨çŽ°æŽ’å                          â”‚
â”‚  â”œâ”€ å‘Mastermindæ±‡æŠ¥                       â”‚
â”‚  â””â”€ æ­»äº¡Agentå½’æ¡£                          â”‚
â”‚                                            â”‚
â”‚  æ•°æ®ç»“æž„ï¼š                                 â”‚
â”‚  â”œâ”€ all_trades: []                        â”‚
â”‚  â”œâ”€ trades_by_agent: {agent_id: []}      â”‚
â”‚  â”œâ”€ agent_balances: {agent_id: float}    â”‚
â”‚  â”œâ”€ agent_stats: {agent_id: {}}          â”‚
â”‚  â””â”€ archived_agents: {agent_id: {}}      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘ æäº¤äº¤æ˜“è®°å½•
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AgentAccountSystem (è´¦æˆ·ç³»ç»Ÿ)              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  ðŸ”— ç»„åˆå±‚                                  â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                            â”‚
â”‚  èŒè´£ï¼š                                     â”‚
â”‚  â”œâ”€ ç»„åˆç§æœ‰è´¦ç°¿å’Œå…¬å…±è´¦ç°¿                  â”‚
â”‚  â”œâ”€ åŒæ­¥æ›´æ–°ä¸¤ä¸ªè´¦ç°¿                        â”‚
â”‚  â””â”€ æä¾›ç»Ÿä¸€æŽ¥å£                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘ æ‹¥æœ‰
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PrivateLedger (ç§æœ‰è´¦ç°¿)                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  ðŸ“– æ¯ä¸ªAgent 1æœ¬                           â”‚
â”‚  ðŸ¤– Agentè‡ªå·±ç®¡ç†                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                            â”‚
â”‚  èŒè´£ï¼š                                     â”‚
â”‚  â”œâ”€ Agentå†³ç­–ä¾æ®                          â”‚
â”‚  â”œâ”€ å¿«é€ŸæŸ¥è¯¢è‡ªå·±çŠ¶æ€                        â”‚
â”‚  â”œâ”€ è®°å½•è‡ªå·±äº¤æ˜“                           â”‚
â”‚  â””â”€ ç‹¬ç«‹ç»´æŠ¤                               â”‚
â”‚                                            â”‚
â”‚  æ•°æ®ç»“æž„ï¼š                                 â”‚
â”‚  â”œâ”€ virtual_capital: float                â”‚
â”‚  â”œâ”€ virtual_position: Position            â”‚
â”‚  â”œâ”€ real_position: Position               â”‚
â”‚  â”œâ”€ trade_history: []                     â”‚
â”‚  â””â”€ stats: {}                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘
              â”‚ æŸ¥è¯¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent (å†³ç­–è€…)                             â”‚
â”‚  â”œâ”€ æŸ¥è¯¢ç§æœ‰è´¦ç°¿                            â”‚
â”‚  â”œâ”€ æ ¹æ®çŠ¶æ€å†³ç­–                            â”‚
â”‚  â””â”€ æäº¤è¯·æ±‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ’» **ä»£ç ç¤ºä¾‹**

### **1. Supervisoråˆ›å»ºå…¬å…±è´¦ç°¿**

```python
class Supervisor:
    def __init__(self):
        # åˆ›å»ºå…¬å…±è´¦ç°¿ï¼ˆåªæœ‰ä¸€æœ¬ï¼‰
        self.public_ledger = PublicLedger()
        
        # Agentè´¦æˆ·ç³»ç»Ÿ
        self.agent_accounts: Dict[str, AgentAccountSystem] = {}
    
    def create_agent_account(self, agent_id: str, initial_capital=10000):
        """ä¸ºAgentåˆ›å»ºè´¦æˆ·ç³»ç»Ÿ"""
        account_system = AgentAccountSystem(
            agent_id=agent_id,
            initial_capital=initial_capital,
            public_ledger=self.public_ledger  # æ³¨å…¥å…¬å…±è´¦ç°¿
        )
        
        self.agent_accounts[agent_id] = account_system
        return account_system
```

---

### **2. AgentæŸ¥è¯¢ç§æœ‰è´¦ç°¿**

```python
class LiveAgentV4:
    def __init__(self, agent_id, account_system):
        self.agent_id = agent_id
        self.account = account_system  # AgentAccountSystem
    
    def decide(self, current_price):
        """å†³ç­–æ—¶æŸ¥è¯¢è‡ªå·±çš„ç§æœ‰è´¦ç°¿"""
        
        # ä»Žç§æœ‰è´¦ç°¿èŽ·å–çŠ¶æ€
        status = self.account.get_status_for_decision(current_price)
        
        # AgentçŸ¥é“è‡ªå·±çš„çŠ¶æ€ï¼š
        # - status['balance'] : æˆ‘æœ‰å¤šå°‘é’±
        # - status['has_position'] : æˆ‘æœ‰æ²¡æœ‰æŒä»“
        # - status['unrealized_pnl'] : æˆ‘æµ®ç›ˆå¤šå°‘
        # - status['win_rate'] : æˆ‘çš„èƒœçŽ‡
        
        if status['has_position']:
            # å·²æœ‰æŒä»“ï¼Œè€ƒè™‘å¹³ä»“
            unrealized_pnl = status['unrealized_pnl']
            
            if unrealized_pnl > 100:
                return {'signal': 'sell', 'confidence': 0.9}
            elif unrealized_pnl < -50:
                return {'signal': 'sell', 'confidence': 1.0}
            else:
                return {'signal': None, 'confidence': 0.0}
        else:
            # æ— æŒä»“ï¼Œè€ƒè™‘å¼€ä»“
            if status['balance'] < current_price * 0.01:
                return {'signal': None, 'confidence': 0.0, 'reason': 'èµ„é‡‘ä¸è¶³'}
            
            # åˆ†æžå¸‚åœº...
            return {'signal': 'buy', 'confidence': 0.75}
```

---

### **3. Supervisoræ‰§è¡Œäº¤æ˜“å¹¶æ›´æ–°ä¸¤ä¸ªè´¦ç°¿**

```python
class Supervisor:
    def receive_trade_request(self, agent_id, signal, confidence, current_price):
        """æŽ¥æ”¶å¹¶æ‰§è¡Œäº¤æ˜“"""
        
        account = self.agent_accounts.get(agent_id)
        if not account:
            return False
        
        if signal == 'buy':
            # æ‰§è¡ŒOKXäº¤æ˜“
            order = self.okx.place_market_order(...)
            
            if order:
                # åŒæ—¶æ›´æ–°ç§æœ‰è´¦ç°¿å’Œå…¬å…±è´¦ç°¿
                account.record_trade(
                    trade_type='buy',
                    amount=0.01,
                    price=current_price,
                    confidence=confidence,
                    is_real=True
                )
                # â†‘ è¿™ä¸ªæ–¹æ³•ä¼šï¼š
                #   1. æ›´æ–°ç§æœ‰è´¦ç°¿ï¼ˆAgentå¯è§ï¼‰
                #   2. æäº¤åˆ°å…¬å…±è´¦ç°¿ï¼ˆSupervisorç»Ÿè®¡ï¼‰
                
                return True
        
        elif signal == 'sell':
            order = self.okx.place_market_order(...)
            
            if order:
                account.record_trade(
                    trade_type='sell',
                    amount=0.01,
                    price=current_price,
                    confidence=confidence,
                    is_real=True
                )
                return True
        
        return False
```

---

### **4. SupervisoræŸ¥è¯¢å…¬å…±è´¦ç°¿**

```python
class Supervisor:
    def publish_agent_performance_report(self):
        """å‘å¸ƒAgentè¡¨çŽ°æŠ¥å‘Š"""
        
        # ä»Žå…¬å…±è´¦ç°¿èŽ·å–æ‰€æœ‰Agentç»Ÿè®¡
        all_stats = self.public_ledger.get_all_agent_stats()
        
        # èŽ·å–Top 10è¡¨çŽ°è€…
        top_performers = self.public_ledger.get_top_performers(limit=10)
        
        # å‘å¸ƒå…¬å‘Š
        report = {
            'type': 'agent_performance',
            'timestamp': datetime.now(),
            'active_agents': len(all_stats),
            'top_performers': [
                {'agent_id': agent_id, 'pnl': stats['total_pnl']}
                for agent_id, stats in top_performers
            ]
        }
        
        self.bulletin_board.publish('supervisor', report)
```

---

### **5. Agentæ­»äº¡å¤„ç†**

```python
class Supervisor:
    def handle_agent_death(self, agent_id: str, death_reason: str):
        """å¤„ç†Agentæ­»äº¡"""
        
        account = self.agent_accounts.get(agent_id)
        if not account:
            return
        
        # å½’æ¡£åˆ°å…¬å…±è´¦ç°¿
        account.archive(death_reason)
        # â†‘ è¿™ä¼šï¼š
        #   1. ä¿å­˜Agentæœ€ç»ˆæ•°æ®åˆ°å½’æ¡£åŒº
        #   2. ä»Žæ´»è·ƒåˆ—è¡¨ä¸­ç§»é™¤
        #   3. åªä¿ç•™å¿…è¦ä¿¡æ¯ï¼ˆæœ€åŽ10ç¬”äº¤æ˜“ï¼‰
        #   4. ç§æœ‰è´¦ç°¿éšå¯¹è±¡é”€æ¯
        
        # ä»Žç®¡ç†åˆ—è¡¨ä¸­ç§»é™¤
        del self.agent_accounts[agent_id]
        
        logger.info(f"Agentå·²æ­»äº¡å¹¶å½’æ¡£: {agent_id}")
    
    def get_archive_summary(self):
        """èŽ·å–å½’æ¡£æ‘˜è¦"""
        return self.public_ledger.get_archive_summary()
        # è¿”å›ž: {
        #   'archived_count': 5,
        #   'active_count': 10,
        #   'total_trades': 1234,
        #   'archive_list': ['Agent_01', 'Agent_05', ...]
        # }
```

---

## ðŸ“Š **æ•°æ®æµç¤ºä¾‹**

### **å®Œæ•´å‘¨æœŸï¼šä¹°å…¥ â†’ æŒä»“ â†’ å–å‡º**

```
å‘¨æœŸ1: Agentå†³ç­–ä¹°å…¥
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. AgentæŸ¥è¯¢ç§æœ‰è´¦ç°¿
   agent.account.get_status_for_decision(90500)
   â†’ {
       'balance': 10000,
       'has_position': False,
       'unrealized_pnl': 0
     }

2. Agentå†³ç­–
   â†’ æ— æŒä»“ï¼Œæœ‰èµ„é‡‘
   â†’ å¸‚åœºä¸Šæ¶¨
   â†’ å†³å®šä¹°å…¥
   â†’ è¿”å›ž {'signal': 'buy', 'confidence': 0.75}

3. SupervisoræŽ¥æ”¶è¯·æ±‚
   supervisor.receive_trade_request('Agent_01', 'buy', 0.75, 90500)

4. Supervisoræ‰§è¡Œäº¤æ˜“
   okx.place_market_order(...) âœ…

5. æ›´æ–°è´¦ç°¿ï¼ˆå…³é”®ï¼ï¼‰
   account.record_trade('buy', 0.01, 90500, 0.75)
   
   5a. æ›´æ–°ç§æœ‰è´¦ç°¿:
       private_ledger.record_buy(0.01, 90500, 0.75)
       â†’ real_position = Position(...)
       â†’ trade_history.append(...)
   
   5b. æäº¤åˆ°å…¬å…±è´¦ç°¿:
       public_ledger.record_trade(TradeRecord(...))
       â†’ all_trades.append(...)
       â†’ trades_by_agent['Agent_01'].append(...)
       
       public_ledger.update_agent_balance('Agent_01', 10000)
       public_ledger.update_agent_stats('Agent_01', {...})

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å‘¨æœŸ2: AgentæŒä»“ä¸­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. AgentæŸ¥è¯¢ç§æœ‰è´¦ç°¿
   agent.account.get_status_for_decision(90800)
   â†’ {
       'balance': 10000,
       'has_position': True,  â† çŸ¥é“è‡ªå·±æœ‰æŒä»“
       'position_info': {
           'amount': 0.01,
           'entry_price': 90500,
           'unrealized_pnl': 3.0  â† (90800-90500)*0.01
       }
     }

2. Agentå†³ç­–
   â†’ æœ‰æŒä»“ï¼Œæµ®ç›ˆ$3
   â†’ æœªè¾¾æ­¢ç›ˆ/æ­¢æŸçº¿
   â†’ å†³å®šç»§ç»­æŒæœ‰
   â†’ è¿”å›ž {'signal': None}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å‘¨æœŸ5: Agentå†³ç­–å–å‡º
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. AgentæŸ¥è¯¢ç§æœ‰è´¦ç°¿
   agent.account.get_status_for_decision(91600)
   â†’ {
       'has_position': True,
       'position_info': {
           'unrealized_pnl': 11.0  â† (91600-90500)*0.01
       }
     }

2. Agentå†³ç­–
   â†’ æµ®ç›ˆ$11ï¼Œè¶…è¿‡$10
   â†’ å†³å®šæ­¢ç›ˆ
   â†’ è¿”å›ž {'signal': 'sell', 'confidence': 0.9}

3. Supervisoræ‰§è¡Œå¹³ä»“
   okx.place_market_order('sell', ...) âœ…

4. æ›´æ–°è´¦ç°¿
   account.record_trade('sell', 0.01, 91600, 0.9)
   
   4a. æ›´æ–°ç§æœ‰è´¦ç°¿:
       private_ledger.record_sell(91600, 0.9)
       â†’ pnl = 11.0
       â†’ virtual_capital = 10011.0
       â†’ win_count += 1
       â†’ real_position = None
   
   4b. æäº¤åˆ°å…¬å…±è´¦ç°¿:
       public_ledger.record_trade(TradeRecord(pnl=11.0))
       public_ledger.update_agent_balance('Agent_01', 10011.0)
       public_ledger.update_agent_stats('Agent_01', {
           'total_pnl': 11.0,
           'win_rate': 1.0
       })

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SupervisoræŸ¥è¯¢å…¬å…±è´¦ç°¿ï¼ˆæŽ’åï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

supervisor.public_ledger.get_top_performers(10)
â†’ [
    ('Agent_01', {'total_pnl': 11.0, 'win_rate': 1.0}),
    ('Agent_03', {'total_pnl': 5.2, 'win_rate': 0.75}),
    ...
  ]
```

---

## ðŸŽ¯ **æ ¸å¿ƒä¼˜åŠ¿**

### **1. èŒè´£åˆ†ç¦»**

| è´¦ç°¿ç±»åž‹ | ç®¡ç†è€… | ç”¨é€” | æ•°æ®é‡ |
|---------|--------|------|--------|
| **ç§æœ‰è´¦ç°¿** | Agent | å†³ç­–ä¾æ® | å°ï¼ˆåªæœ‰è‡ªå·±ï¼‰ |
| **å…¬å…±è´¦ç°¿** | Supervisor | ç›‘ç£ç»Ÿè®¡ | å¤§ï¼ˆæ‰€æœ‰Agentï¼‰ |

### **2. æ€§èƒ½ä¼˜åŒ–**

```
Agentå†³ç­–æ—¶:
  âœ… åªæŸ¥è¯¢è‡ªå·±çš„ç§æœ‰è´¦ç°¿
  âœ… æ•°æ®é‡å°ï¼ŒæŸ¥è¯¢å¿«
  âŒ ä¸éœ€è¦æŸ¥è¯¢æ‰€æœ‰Agentæ•°æ®

Supervisorç»Ÿè®¡æ—¶:
  âœ… æŸ¥è¯¢å…¬å…±è´¦ç°¿
  âœ… æ•°æ®é›†ä¸­ï¼Œæ˜“äºŽç»Ÿè®¡
  âœ… å¯ä»¥æŽ’åã€å¯¹æ¯”
```

### **3. æ•°æ®ç‹¬ç«‹**

```
Agentæ­»äº¡:
  â”œâ”€ ç§æœ‰è´¦ç°¿: éšå¯¹è±¡é”€æ¯ âœ… è‡ªåŠ¨æ¸…ç†
  â””â”€ å…¬å…±è´¦ç°¿: å½’æ¡£åˆ°archived_agents âœ… ä¿ç•™å¿…è¦ä¿¡æ¯

é¿å…å†…å­˜æ³„æ¼ï¼
```

### **4. æ˜“äºŽå®¡è®¡**

```
å…¬å…±è´¦ç°¿å®Œæ•´è®°å½•:
  â”œâ”€ æ‰€æœ‰äº¤æ˜“åŽ†å²
  â”œâ”€ Agentè¡¨çŽ°ç»Ÿè®¡
  â”œâ”€ æ­»äº¡Agentå½’æ¡£
  â””â”€ å¯å¯¼å‡ºJSONå®¡è®¡
```

---

## ðŸ”„ **Agentæ­»äº¡å¤„ç†æœºåˆ¶**

### **å½’æ¡£ç­–ç•¥**

```python
# Agentæ­»äº¡æ—¶
supervisor.handle_agent_death('Agent_01', 'fitness_too_low')

å½’æ¡£æ•°æ®åŒ…å«:
  â”œâ”€ agent_id
  â”œâ”€ death_time
  â”œâ”€ death_reason
  â”œâ”€ final_balance
  â”œâ”€ final_stats (æ€»ç›ˆäºã€èƒœçŽ‡...)
  â”œâ”€ total_trades (æ€»äº¤æ˜“ç¬”æ•°)
  â””â”€ last_trades (åªä¿ç•™æœ€åŽ10ç¬”)  â† å…³é”®ï¼

æ¸…ç†:
  â”œâ”€ ä»Žtrades_by_agentä¸­åˆ é™¤
  â”œâ”€ ä»Žagent_balancesä¸­åˆ é™¤
  â”œâ”€ ä»Žagent_statsä¸­åˆ é™¤
  â””â”€ ç§æœ‰è´¦ç°¿éšå¯¹è±¡é”€æ¯

ç»“æžœ:
  âœ… å…¬å…±è´¦ç°¿å¤§å°å¯æŽ§
  âœ… å¿…è¦ä¿¡æ¯å·²å½’æ¡£
  âœ… å¯æŸ¥è¯¢å½’æ¡£åŽ†å²
```

---

## ðŸ“Š **æ•°æ®è§„æ¨¡å¯¹æ¯”**

### **1000ä¸ªAgentï¼Œæ¯ä¸ª100ç¬”äº¤æ˜“**

| åœºæ™¯ | æ— å½’æ¡£æœºåˆ¶ | æœ‰å½’æ¡£æœºåˆ¶ |
|------|-----------|-----------|
| **æ´»è·ƒAgent** | 1000 | 10ï¼ˆå‡è®¾990æ­»äº¡ï¼‰ |
| **æ´»è·ƒäº¤æ˜“è®°å½•** | 100,000ç¬” | 1,000ç¬” |
| **å½’æ¡£Agent** | 0 | 990 |
| **å½’æ¡£äº¤æ˜“è®°å½•** | 0 | 9,900ç¬”ï¼ˆæ¯ä¸ª10ç¬”ï¼‰ |
| **æ€»å†…å­˜** | ~500MB | ~50MB |

**èŠ‚çœå†…å­˜ï¼š90%** âœ…

---

## ðŸŽŠ **æž¶æž„å®Œæ•´æ€§**

### **ä¸‰å±‚æž¶æž„**

```
Mastermind (æˆ˜ç•¥å±‚)
    â””â”€ æˆ˜ç•¥å†³ç­–

Supervisor (è¿è¥å±‚)
    â”œâ”€ ç®¡ç†å…¬å…±è´¦ç°¿ âœ…
    â”œâ”€ åˆ›å»ºAgentè´¦æˆ· âœ…
    â”œâ”€ æŽ¥æ”¶äº¤æ˜“è¯·æ±‚ âœ…
    â”œâ”€ æ‰§è¡Œäº¤æ˜“ âœ…
    â”œâ”€ æ›´æ–°è´¦ç°¿ âœ…
    â”œâ”€ ç»Ÿè®¡æŽ’å âœ…
    â”œâ”€ å½’æ¡£æ­»äº¡Agent âœ…
    â””â”€ å‘Mastermindæ±‡æŠ¥ âœ…

Agents (æ‰§è¡Œå±‚)
    â”œâ”€ æ‹¥æœ‰ç§æœ‰è´¦ç°¿ âœ…
    â”œâ”€ æŸ¥è¯¢è‡ªå·±çŠ¶æ€ âœ…
    â”œâ”€ æ ¹æ®çŠ¶æ€å†³ç­– âœ…
    â””â”€ æäº¤äº¤æ˜“è¯·æ±‚ âœ…

è´¦ç°¿ç³»ç»Ÿ
    â”œâ”€ PublicLedger (å…¬å…±è´¦ç°¿) âœ…
    â”œâ”€ PrivateLedger (ç§æœ‰è´¦ç°¿) âœ…
    â””â”€ AgentAccountSystem (ç»„åˆ) âœ…
```

**å®Œç¾Žï¼** â­â­â­â­â­

---

## ðŸš€ **å®žæ–½çŠ¶æ€**

### **å·²å®Œæˆ**
- âœ… `PrivateLedger` ç±»
- âœ… `PublicLedger` ç±»
- âœ… `AgentAccountSystem` ç»„åˆç±»
- âœ… Agentæ­»äº¡å½’æ¡£æœºåˆ¶
- âœ… æ•°æ®å¯¼å‡ºåŠŸèƒ½

### **å¾…é›†æˆ**
- ðŸ”„ Supervisorä½¿ç”¨PublicLedger
- ðŸ”„ Agentä½¿ç”¨AgentAccountSystem
- ðŸ”„ æµ‹è¯•éªŒè¯

---

## ðŸ’¡ **ä¸‹ä¸€æ­¥**

### **é›†æˆæ­¥éª¤**

1. **Supervisoré›†æˆPublicLedger**
   - åˆ›å»ºpublic_ledgerå®žä¾‹
   - ä½¿ç”¨public_ledgeråˆ›å»ºagent_accounts
   - æ›´æ–°receive_trade_requestä½¿ç”¨account.record_trade

2. **Agenté›†æˆAgentAccountSystem**
   - Agentåˆå§‹åŒ–æŽ¥æ”¶account_system
   - Agentå†³ç­–æ—¶è°ƒç”¨account.get_status_for_decision
   - æ ¹æ®è´¦æˆ·çŠ¶æ€æ™ºèƒ½å†³ç­–

3. **æµ‹è¯•éªŒè¯**
   - Agentèƒ½å¦æ­£ç¡®æŸ¥è¯¢ç§æœ‰è´¦ç°¿
   - Supervisorèƒ½å¦æ­£ç¡®æ›´æ–°å…¬å…±è´¦ç°¿
   - æ•°æ®æ˜¯å¦åŒæ­¥
   - å½’æ¡£æœºåˆ¶æ˜¯å¦æ­£å¸¸

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**ï¼š2025-12-02  
**å®žæ–½çŠ¶æ€**ï¼šæ ¸å¿ƒç±»å·²å®Œæˆï¼Œç­‰å¾…é›†æˆ  
**æž¶æž„è¯„åˆ†**ï¼šâ­â­â­â­â­ (é‡‘èžçº§)

