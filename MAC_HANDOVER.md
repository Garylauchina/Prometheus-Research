# Prometheus v5.2 å¼€å‘äº¤æ¥æ–‡æ¡£

> **ç›®æ ‡**ï¼šè®©MACä¸Šçš„Cursor AIèƒ½å¤Ÿæ— ç¼æ¥æ‰‹å¼€å‘å·¥ä½œ
> 
> **æ—¥æœŸ**ï¼š2025-12-05
> 
> **å½“å‰ç‰ˆæœ¬**ï¼šv5.2 Fitnessç³»ç»Ÿå‡çº§å®Œæˆ

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### **é¡¹ç›®åç§°**
Prometheus v5.2 - å¤šAgentè¿›åŒ–äº¤æ˜“ç³»ç»Ÿ

### **æ ¸å¿ƒæ¶æ„**
```
prometheus/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ agent_v5.py              # Agentæ ¸å¿ƒï¼ˆå·²å‡çº§ï¼‰
â”‚   â”œâ”€â”€ instinct.py              # æœ¬èƒ½ç³»ç»Ÿï¼ˆfear_of_deathå¯å˜ï¼‰
â”‚   â”œâ”€â”€ inner_council.py         # Daimonå†³ç­–ç³»ç»Ÿï¼ˆå·²æ”¹è¿›ï¼‰
â”‚   â”œâ”€â”€ evolution_manager_v5.py  # è¿›åŒ–ç®¡ç†å™¨ï¼ˆFitness v2ï¼‰
â”‚   â”œâ”€â”€ moirai.py                # ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”‚   â”œâ”€â”€ lineage.py               # å®¶æ—è¡€ç»Ÿ
â”‚   â”œâ”€â”€ genome.py                # åŸºå› å‘é‡
â”‚   â””â”€â”€ meta_genome.py           # å…ƒåŸºå› ï¼ˆDaimonæƒé‡ï¼‰
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ data/                        # å¸‚åœºæ•°æ®
```

### **å…³é”®ç‰¹æ€§**
- âœ… v5.0æ¶æ„å®Œæ•´
- âœ… v5.1å…ƒåŸºå› ç³»ç»Ÿ
- âœ… v5.2 Fitnesså‡çº§ï¼ˆåˆšå®Œæˆï¼‰
- âœ… OKXå†å²æ•°æ®ä¸‹è½½
- âœ… å¸‚åœºå™ªå£°å±‚ï¼ˆv5.2 Day 2ï¼‰
- âœ… äººå£åŠ¨æ€è°ƒæ•´ï¼ˆv5.2 Day 1ï¼‰

---

## ğŸ¯ å½“å‰å¼€å‘çŠ¶æ€

### **æœ€è¿‘å®Œæˆçš„å·¥ä½œï¼ˆv5.2 Fitnesså‡çº§ï¼‰**

#### 1. **ç§»é™¤è‡ªæ€æœºåˆ¶** âœ…
**æ–‡ä»¶ä¿®æ”¹**ï¼š
- `prometheus/core/agent_v5.py`
  - åˆ é™¤ `should_commit_suicide()` æ–¹æ³•
  - åˆ é™¤ `commit_suicide()` æ–¹æ³•
  - åˆ é™¤ `DeathReason.SUICIDE` ç›¸å…³é€»è¾‘

- `prometheus/core/evolution_manager_v5.py`
  - åˆ é™¤è‡ªæ€æ£€æŸ¥é€»è¾‘

**è®¾è®¡ç†ç”±**ï¼š
- ç®€åŒ–ç³»ç»Ÿï¼Œé‡‡ç”¨å•ä¸€æ·˜æ±°é€»è¾‘
- å›å½’è‡ªç„¶é€‰æ‹©ï¼šç³»ç»Ÿå†³å®šAgentç”Ÿæ­»
- é¿å…Agent"ä¸»åŠ¨é€ƒé¿"è¿›åŒ–å‹åŠ›

#### 2. **å®ç°Fitness v2å¤šç»´è¯„åˆ†** âœ…
**æ–‡ä»¶ä¿®æ”¹**ï¼š
- `prometheus/core/evolution_manager_v5.py`
  - æ–°å¢ `_calculate_fitness_v2()` æ–¹æ³•
  - æ›´æ–° `_rank_agents()` ä½¿ç”¨æ–°fitness

**å…­å¤§ç»´åº¦**ï¼š
1. **Base Score**ï¼šèµ„é‡‘æ¯”ç‡
2. **Survival Bonus**ï¼šç”Ÿå­˜æ—¶é•¿ï¼ˆâˆš(cycles_survived/total_cycles)ï¼‰
3. **Stability Bonus**ï¼šSharpeæ¯”ç‡åŠ æˆ
4. **Near Death Penalty**ï¼šæ¿’æ­»æƒ©ç½šï¼ˆèµ„é‡‘ < 50%ï¼‰
5. **Risk Adjustment**ï¼šå›æ’¤æƒ©ç½šï¼ˆ1/(1+max_drawdown)ï¼‰
6. **Negativity Penalty**ï¼šæ¶ˆææƒ©ç½šï¼ˆäº¤æ˜“è¿‡å°‘ã€æŒä»“è¿‡å°‘ã€é•¿æœŸä½æ”¶ç›Šï¼‰

**å…¬å¼**ï¼š
```python
fitness = (
    base_score 
    * survival_bonus 
    * stability_bonus 
    * near_death_penalty 
    * risk_adjustment
    * negativity_penalty
)
```

#### 3. **å¢å¼ºAgentç»Ÿè®¡è¿½è¸ª** âœ…
**æ–‡ä»¶ä¿®æ”¹**ï¼š
- `prometheus/core/agent_v5.py`
  - æ–°å¢ `days_alive`, `max_drawdown`, `cycles_with_position` ç­‰å±æ€§
  - æ–°å¢ `update_cycle_statistics()` æ–¹æ³•
  - æ–°å¢ `get_sharpe_ratio()` æ–¹æ³•

#### 4. **ä¿®å¤é™¤é›¶é”™è¯¯** âœ…
**æ–‡ä»¶ä¿®æ”¹**ï¼š
- `test_evolution_with_fitness_v2.py`
- `test_fitness_v2.py`
- `V5.2_FITNESS_UPGRADE_COMPLETE.md`

**ä¿®å¤æ–¹å¼**ï¼š
```python
position_rate = agent.cycles_with_position / agent.cycles_survived if agent.cycles_survived > 0 else 0
```

#### 5. **æ¸…ç†è¿‡æ—¶æµ‹è¯•ä»£ç ** âœ…
**æ–‡ä»¶ä¿®æ”¹**ï¼š
- `test_fitness_v2.py`
  - åˆ é™¤è‡ªæ€æœºåˆ¶æµ‹è¯•éƒ¨åˆ†
  - åˆ é™¤ `DeathReason` å¯¼å…¥
  - æ›´æ–°æ–‡æ¡£å’Œè¾“å‡º

---

## ğŸ§ª éªŒè¯æµ‹è¯•ç»“æœ

### **æµ‹è¯•1ï¼šå•Agentå¯¹æ¯”ï¼ˆtest_fitness_v2.pyï¼‰**
```
ç¨³å¥è€…: Fitness 2.717 | +81.1% | Sharpe 2.92 | æŒä»“100%
æ¶ˆæè€…: Fitness 0.495 | +4.8%  | Sharpe 4.79 | æŒä»“23.3%
æ¿€è¿›è€…: Fitness 0.081 | -60.6% | Sharpe -0.25 | æŒä»“100%
```
âœ… æ’ååˆç†

### **æµ‹è¯•2ï¼š10è½®çœŸå®è¿›åŒ–ï¼ˆtest_evolution_with_fitness_v2.pyï¼‰**
```
å‰5åï¼š
- æŒä»“ç‡56%-90%ï¼ˆå¹³å‡68.6%ï¼‰
- å…¨éƒ¨æ­£Sharpeï¼ˆ0.13-0.70ï¼‰
- å…¨éƒ¨å¤§å¹…ç›ˆåˆ©ï¼ˆ117%-185%ï¼‰

å5åï¼š
- å…¨æ˜¯æ–°ç”ŸAgentï¼ˆ0äº¤æ˜“ï¼Œ0æŒä»“ï¼‰
- Fitness = 0.00
```
âœ… æ¶ˆæç­–ç•¥æœªæ‰©æ•£ï¼Œç³»ç»Ÿå¥åº·

---

## ğŸ”‘ å…³é”®è®¾è®¡å†³ç­–

### **1. ä¸ºä»€ä¹ˆç§»é™¤è‡ªæ€æœºåˆ¶ï¼Ÿ**
**å†³ç­–**ï¼šé‡‡ç”¨å•ä¸€æ·˜æ±°é€»è¾‘ï¼Œç”±ç³»ç»Ÿå†³å®šAgentç”Ÿæ­»

**ç†ç”±**ï¼š
- ç®€åŒ–ç³»ç»Ÿæ¶æ„
- å›å½’"ç³»ç»Ÿæ€»ä½“ç›ˆåˆ©"çš„åˆå¿ƒ
- é¿å…Agent"ä¸»åŠ¨é€ƒé¿"è¿›åŒ–å‹åŠ›
- çº¯ç²¹çš„è‡ªç„¶é€‰æ‹©æ›´ç¬¦åˆè¿›åŒ–å“²å­¦

### **2. ä¸ºä»€ä¹ˆæ¶ˆæè€…æ’åé«˜äºæ¿€è¿›è€…ï¼Ÿ**
**ç°è±¡**ï¼šåœ¨å•ä¸€æµ‹è¯•åœºæ™¯ä¸­ï¼Œæ¶ˆæè€…(0.495) > æ¿€è¿›è€…(0.081)

**è§£é‡Š**ï¼š
- åœ¨ç‰¹å®šæç«¯åœºæ™¯ä¸‹ï¼ˆæ¿€è¿›è€…-60.6%ï¼‰ï¼Œä¿æœ¬ç¡®å®ä¼˜äºäºæŸ
- ä½†åœ¨çœŸå®è¿›åŒ–ä¸­ï¼Œæ¶ˆæç­–ç•¥æ— æ³•ä¸ç¨³å¥è€…ç«äº‰
- æ•°æ®è¯æ˜ï¼šæ¶ˆæç­–ç•¥ä¸ä¼šæ‰©æ•£

**ç»“è®º**ï¼šå½“å‰Fitnessè®¾è®¡åˆç†ï¼Œæ— éœ€è°ƒæ•´

### **3. fear_of_deathä½œä¸ºå¯å˜åŸºå› **
**å†³ç­–**ï¼šfear_of_deathä»å›ºå®šå€¼1.0æ”¹ä¸ºå¯å˜èŒƒå›´[0, 2]

**å®ç°**ï¼š
- `prometheus/core/instinct.py`ï¼šfear_of_deathå¯å˜å¹¶å¯é—ä¼ 
- `prometheus/core/inner_council.py`ï¼šåŠ¨æ€fear_thresholdï¼Œé¼“åŠ±æ¢ç´¢

**æ•ˆæœ**ï¼š
- é«˜fear Agentæ›´ä¿å®ˆï¼ˆé˜ˆå€¼ä½ï¼Œå®¹æ˜“å¹³ä»“ï¼‰
- ä½fear Agentæ›´æ¿€è¿›ï¼ˆé˜ˆå€¼é«˜ï¼Œä¸æ˜“å¹³ä»“ï¼‰
- å¢åŠ ç§ç¾¤å¤šæ ·æ€§

---

## ğŸ“š é‡è¦æ–‡æ¡£

### **å¿…è¯»æ–‡æ¡£**
1. `V5.2_FITNESS_UPGRADE_COMPLETE.md` - Fitnesså‡çº§å®Œæ•´æ–‡æ¡£
2. `FEAR_EXPERIMENT_SUMMARY.md` - fear_of_deathå®éªŒæ€»ç»“
3. `DAIMON_IMPROVEMENT_PLAN.md` - Daimonæ”¹è¿›æ–¹æ¡ˆ
4. `V5.2_FINAL_DESIGN.md` - v5.2æœ€ç»ˆè®¾è®¡å“²å­¦
5. `FUTURE_IDEAS.md` - æœªæ¥å¼€å‘æƒ³æ³•

### **æµ‹è¯•æ–‡ä»¶**
- `test_fitness_v2.py` - Fitnesså¯¹æ¯”æµ‹è¯•
- `test_evolution_with_fitness_v2.py` - çœŸå®è¿›åŒ–æµ‹è¯•
- `test_daimon_improvement.py` - Daimonæ”¹è¿›éªŒè¯
- `test_fear_with_improved_daimon.py` - Fearæœºåˆ¶æµ‹è¯•

---

## ğŸš§ å¾…åŠäº‹é¡¹ï¼ˆDay 3-7ï¼‰

### **v5.2å¼€å‘è®¡åˆ’**

#### **Day 3ï¼šLineageç†µç›‘æ§ä¼˜åŒ–**
- [ ] å®ç°å®æ—¶ç†µå€¼ç›‘æ§
- [ ] ç†µå€¼è¿‡ä½æ—¶è§¦å‘å¼ºåˆ¶å¤šæ ·æ€§æœºåˆ¶
- [ ] å¯è§†åŒ–ç†µå€¼å˜åŒ–è¶‹åŠ¿

#### **Day 4ï¼šåŸºå› å¤šæ ·æ€§ä¿æŠ¤**
- [ ] å®ç°Nicheä¿æŠ¤æœºåˆ¶ï¼ˆå°‘æ•°ç­–ç•¥ä¿æŠ¤ï¼‰
- [ ] é˜²æ­¢å•ä¸€ç­–ç•¥ç»Ÿæ²»ç§ç¾¤
- [ ] åŸºå› å¤šæ ·æ€§è¯„åˆ†

#### **Day 5ï¼šåŠ¨æ€è¿›åŒ–å‚æ•°**
- [ ] æ ¹æ®å¸‚åœºç¯å¢ƒè°ƒæ•´æ·˜æ±°ç‡
- [ ] æ ¹æ®ç§ç¾¤å¥åº·è°ƒæ•´å˜å¼‚ç‡
- [ ] è‡ªé€‚åº”è¿›åŒ–é€Ÿåº¦

#### **Day 6ï¼šé«˜çº§åˆ†æå·¥å…·**
- [ ] Agentå®¶æ—æ ‘å¯è§†åŒ–
- [ ] ç­–ç•¥æ¼”åŒ–è½¨è¿¹è¿½è¸ª
- [ ] æ€§èƒ½åˆ†ææŠ¥å‘Šç”Ÿæˆ

#### **Day 7ï¼šå‹åŠ›æµ‹è¯•å’Œä¼˜åŒ–**
- [ ] æç«¯å¸‚åœºå‹åŠ›æµ‹è¯•
- [ ] é•¿æœŸè¿è¡Œç¨³å®šæ€§æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œä»£ç æ¸…ç†

---

## ğŸ’» MACç¯å¢ƒè®¾ç½®æŒ‡å—

### **1. å…‹éš†é¡¹ç›®**
```bash
cd ~/Projects  # æˆ–ä½ å–œæ¬¢çš„ç›®å½•
git clone <your-repo-url> prometheus-v30
cd prometheus-v30
```

### **2. ç¯å¢ƒå‡†å¤‡**
```bash
# å®‰è£…Python 3.10+
brew install python@3.10

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### **3. éªŒè¯å®‰è£…**
```bash
# è¿è¡Œæµ‹è¯•
python test_fitness_v2.py
python test_evolution_with_fitness_v2.py

# é¢„æœŸï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œæ— é”™è¯¯
```

### **4. Cursor AIè®¾ç½®**
- æ‰“å¼€Cursor
- File -> Open Folder -> é€‰æ‹© `prometheus-v30`
- å°†æœ¬æ–‡ä»¶ï¼ˆ`MAC_HANDOVER.md`ï¼‰æ”¾åœ¨æ ¹ç›®å½•
- åœ¨Cursorä¸­æ‰“å¼€æ­¤æ–‡ä»¶ï¼Œä½œä¸ºä¸Šä¸‹æ–‡å‚è€ƒ

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤ï¼ˆMACï¼‰

### **è¿è¡Œæµ‹è¯•**
```bash
# Fitnesså¯¹æ¯”æµ‹è¯•
python test_fitness_v2.py

# çœŸå®è¿›åŒ–æµ‹è¯•
python test_evolution_with_fitness_v2.py

# Daimonæ”¹è¿›æµ‹è¯•
python test_daimon_improvement.py
```

### **Gitæ“ä½œ**
```bash
# æŸ¥çœ‹çŠ¶æ€
git status

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# æäº¤æ›´æ”¹
git add .
git commit -m "feat: æè¿°"
git push origin main
```

### **ç¯å¢ƒç®¡ç†**
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# é€€å‡ºè™šæ‹Ÿç¯å¢ƒ
deactivate

# æ›´æ–°ä¾èµ–
pip install --upgrade -r requirements.txt
```

---

## ğŸ¯ ç»™MAC Cursor AIçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å»ºè®®

å½“ä½ åœ¨MACä¸Šæ‰“å¼€é¡¹ç›®åï¼Œå¯ä»¥è¿™æ ·å¼€å§‹ï¼š

```
ä½ å¥½ï¼æˆ‘åˆšæŠŠé¡¹ç›®ä»Windowsè½¬ç§»åˆ°MACã€‚
æˆ‘å·²ç»è¯»è¿‡äº†MAC_HANDOVER.mdäº¤æ¥æ–‡æ¡£ã€‚

å½“å‰é¡¹ç›®çŠ¶æ€ï¼š
- v5.2 Fitnessç³»ç»Ÿå‡çº§åˆšåˆšå®Œæˆ
- æ‰€æœ‰æµ‹è¯•é€šè¿‡
- å‡†å¤‡å¼€å§‹Day 3-7çš„å¼€å‘

è¯·ç¡®è®¤ä½ äº†è§£äº†ï¼š
1. æœ€è¿‘çš„Fitness v2å‡çº§
2. ç§»é™¤è‡ªæ€æœºåˆ¶çš„è®¾è®¡å†³ç­–
3. fear_of_deathä½œä¸ºå¯å˜åŸºå› çš„å®ç°
4. å¾…åŠäº‹é¡¹ï¼ˆDay 3-7ï¼‰

ç„¶åæˆ‘ä»¬å¯ä»¥è®¨è®ºä¸‹ä¸€æ­¥çš„å¼€å‘è®¡åˆ’ã€‚
```

---

## ğŸ“ å…³é”®ä¿¡æ¯å¿«é€ŸæŸ¥è¯¢

### **æ ¸å¿ƒè®¾è®¡å“²å­¦**
```
"ç³»ç»Ÿæ€»ä½“ç›ˆåˆ©æ‰æ˜¯åˆå¿ƒ"
"é€‚è€…ç”Ÿå­˜ï¼Œçº¯ç²¹çš„è‡ªç„¶é€‰æ‹©"
"Agentåªéœ€åŠªåŠ›äº¤æ˜“ï¼Œç³»ç»Ÿå†³å®šç”Ÿæ­»"
"æ´»çš„Agentæ‰æ˜¯å¥½Agent = èµšé’±çš„Agentæ‰æ˜¯å¥½Agent"
```

### **Fitness v2å…¬å¼**
```python
fitness = (
    capital_ratio 
    * sqrt(survival_rate) 
    * (1 + sharpe_bonus) 
    * near_death_penalty 
    * (1 / (1 + max_drawdown))
    * negativity_penalty
)
```

### **æ¶ˆææƒ©ç½šè§¦å‘æ¡ä»¶**
- äº¤æ˜“æ¬¡æ•° < æœŸæœ›çš„30%
- é•¿æœŸä½æ”¶ç›Šï¼ˆå­˜æ´»>20è½®ä½†æ”¶ç›Š<5%ï¼‰
- è¿œä½äºå¸‚åœºå¹³å‡ï¼ˆç›¸å¯¹è¡¨ç°<30%ï¼‰
- æŒä»“æ—¶é—´ < 20%

### **DaimonåŠ¨æ€é˜ˆå€¼**
```python
fear_threshold = 3.0 - instinct.fear_of_death * 1.5
# é«˜fear(1.8) -> é˜ˆå€¼0.3ï¼ˆå®¹æ˜“å¹³ä»“ï¼‰
# ä½fear(0.3) -> é˜ˆå€¼2.55ï¼ˆä¸æ˜“å¹³ä»“ï¼‰
```

---

## âœ… äº¤æ¥æ£€æŸ¥æ¸…å•

åœ¨MACä¸Šå¼€å§‹å·¥ä½œå‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] é¡¹ç›®å·²å…‹éš†åˆ°MAC
- [ ] Pythonè™šæ‹Ÿç¯å¢ƒå·²åˆ›å»ºå¹¶æ¿€æ´»
- [ ] æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼ˆ`pip install -r requirements.txt`ï¼‰
- [ ] `test_fitness_v2.py` è¿è¡ŒæˆåŠŸ
- [ ] `test_evolution_with_fitness_v2.py` è¿è¡ŒæˆåŠŸ
- [ ] å·²è¯»å®Œæœ¬æ–‡æ¡£ï¼ˆ`MAC_HANDOVER.md`ï¼‰
- [ ] å·²è¯»æ ¸å¿ƒæ–‡æ¡£ï¼ˆ`V5.2_FITNESS_UPGRADE_COMPLETE.md`ï¼‰
- [ ] ç†è§£æœ€è¿‘çš„è®¾è®¡å†³ç­–ï¼ˆç§»é™¤è‡ªæ€ã€Fitness v2ã€fearå¯å˜ï¼‰
- [ ] å‡†å¤‡å¥½å¼€å§‹Day 3å¼€å‘

---

## ğŸš€ å‡†å¤‡å°±ç»ªï¼

ä½ ç°åœ¨åº”è¯¥æ‹¥æœ‰ç»§ç»­å¼€å‘æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚

**ä¸‹ä¸€æ­¥**ï¼šDay 3 - Lineageç†µç›‘æ§ä¼˜åŒ–

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸ‰

---

*æœ€åæ›´æ–°ï¼š2025-12-05*
*Windows â†’ MAC äº¤æ¥*

